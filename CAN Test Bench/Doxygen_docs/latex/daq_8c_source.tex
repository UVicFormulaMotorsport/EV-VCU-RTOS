\doxysection{daq.\+c}
\hypertarget{daq_8c_source}{}\label{daq_8c_source}\index{Core/Src/daq.c@{Core/Src/daq.c}}
\mbox{\hyperlink{daq_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00001}\mbox{\hyperlink{daq_8c_a5a6490a76926af0287e58c4b1af260bd}{00001}}\ \textcolor{preprocessor}{\#define\ \_SRC\_UVFR\_DAQ}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00004}00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{uvfr__utils_8h}{uvfr\_utils.h}}"{}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00005}00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{daq_8h}{daq.h}}"{}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00006}00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{stm32f4xx__hal__conf_8h}{stm32f4xx\_hal\_conf.h}}"{}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00007}00007\ \textcolor{preprocessor}{\#include\ "{}stm32f407xx.h"{}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00008}00008\ \textcolor{preprocessor}{\#include\ "{}stm32f4xx\_hal.h"{}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}stm32f4xx\_hal\_adc.h"{}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}stm32f4xx\_hal\_rcc.h"{}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00012}\mbox{\hyperlink{daq_8c_aba239cbf28dfdbe0359593717f8705d5}{00012}}\ \textcolor{preprocessor}{\#define\ INV\_DAQ\_P\ 0xFFFF}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00014}00014\ \textcolor{comment}{//\#define\ daq\_settings\ current\_vehicle\_settings-\/>daq\_settings}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00016}\mbox{\hyperlink{daq_8c_a08de9f1889def4ee8d79962e6044bb0f}{00016}}\ uint64\_t\ \mbox{\hyperlink{daq_8c_a08de9f1889def4ee8d79962e6044bb0f}{constant\_zero}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00018}\mbox{\hyperlink{daq_8c_a2273a53b295e470100af298a0be7d8d7}{00018}}\ \textcolor{keyword}{volatile}\ uint16\_t\ \mbox{\hyperlink{daq_8c_a2273a53b295e470100af298a0be7d8d7}{coolant\_temp\_adc}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00019}\mbox{\hyperlink{daq_8c_a0611933f2919b8900cd5e667043747fe}{00019}}\ \textcolor{keyword}{volatile}\ uint16\_t\ \mbox{\hyperlink{daq_8c_a0611933f2919b8900cd5e667043747fe}{motor\_temp\_adc}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00021}00021\ \textcolor{comment}{//configuring\ ADCs}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00022}\mbox{\hyperlink{daq_8c_a22b804736f5648d52f639b2647d4ed13}{00022}}\ ADC\_HandleTypeDef\ \mbox{\hyperlink{daq_8c_a22b804736f5648d52f639b2647d4ed13}{hadc1}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00024}00024\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00025}00025\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00028}\mbox{\hyperlink{structdaq__param__list__node}{00028}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00029}\mbox{\hyperlink{structdaq__param__list__node_aa70718d4adff315eb53a8c00e4b1021a}{00029}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}*\ \mbox{\hyperlink{structdaq__param__list__node_aa70718d4adff315eb53a8c00e4b1021a}{next}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00031}\mbox{\hyperlink{structdaq__param__list__node_a6b52773cafc7e69fdb4eca2d64a2fab3}{00031}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{structdaq__param__list__node_a6b52773cafc7e69fdb4eca2d64a2fab3}{can\_id}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00032}\mbox{\hyperlink{structdaq__param__list__node_a8e1cf08361b1b644c795742ab1406c66}{00032}}\ \ \ \ \ uint16\_t\ \mbox{\hyperlink{structdaq__param__list__node_a8e1cf08361b1b644c795742ab1406c66}{param}}[4];}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00034}\mbox{\hyperlink{structdaq__param__list__node_a5264395f002b308398fb581559eafc37}{00034}}\ \ \ \ \ uint8\_t\ \mbox{\hyperlink{structdaq__param__list__node_a5264395f002b308398fb581559eafc37}{size}}[4];}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00035}\mbox{\hyperlink{daq_8c_a4a7e5c4a5e65c315010bab902f2268a6}{00035}}\ \}\mbox{\hyperlink{daq_8c_a4a7e5c4a5e65c315010bab902f2268a6}{daq\_param\_list\_node}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00037}\mbox{\hyperlink{structdaq__child__task}{00037}}\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00038}\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{00038}}\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}*\ \mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00039}\mbox{\hyperlink{structdaq__child__task_aeb649c4b5047ed12107eea04fb68042e}{00039}}\ \ \ \ \ \mbox{\hyperlink{structtsk_task_control_block}{TaskHandle\_t}}\ \mbox{\hyperlink{structdaq__child__task_aeb649c4b5047ed12107eea04fb68042e}{meta\_task\_handle}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00040}\mbox{\hyperlink{structdaq__child__task_ada97dc181bb6a3919f978fb17431d336}{00040}}\ \ \ \ \ uint32\_t\ \mbox{\hyperlink{structdaq__child__task_ada97dc181bb6a3919f978fb17431d336}{period}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00041}\mbox{\hyperlink{structdaq__child__task_ab58febeab8b66376a3b3520e9cff950f}{00041}}\ \ \ \ \ \mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}*\ \mbox{\hyperlink{structdaq__child__task_ab58febeab8b66376a3b3520e9cff950f}{param\_list}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00044}\mbox{\hyperlink{daq_8c_a2104fed000d8cb392baf5d14e06193c1}{00044}}\ \}\mbox{\hyperlink{daq_8c_a2104fed000d8cb392baf5d14e06193c1}{daq\_child\_task}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00046}\mbox{\hyperlink{daq_8c_a5a9a97f4494923c066b5c4faaaaf8f88}{00046}}\ \mbox{\hyperlink{structdaq__loop__args}{daq\_loop\_args}}*\ \mbox{\hyperlink{daq_8c_a5a9a97f4494923c066b5c4faaaaf8f88}{curr\_daq\_settings}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00047}00047\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00048}\mbox{\hyperlink{daq_8c_a22b4a1eccdbbbf445f1847cc3a49c3e0}{00048}}\ \mbox{\hyperlink{structdaq__loop__args}{daq\_loop\_args}}\ \mbox{\hyperlink{daq_8c_a22b4a1eccdbbbf445f1847cc3a49c3e0}{default\_daq\_settings}}\ =\ \{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00049}00049\ \ \ \ \ .total\_params\_logged\ =\ 8,}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00050}00050\ \ \ \ \ .throttle\_daq\_to\_preserve\_performance\ =\ 1,}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00051}00051\ \ \ \ \ .minimum\_daq\_period\ =\ 10,}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00052}00052\ \ \ \ \ .can\_channel\ =\ \mbox{\hyperlink{uvfr__utils_8h_a68cc2bdb140f7959b6090b771f3358a9}{CAN\_BUS\_1}},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00053}00053\ \ \ \ \ .daq\_child\_priority\ =\ 1}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00054}00054\ \};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00056}\mbox{\hyperlink{daq_8c_af2240542724a20552b90fafa9642884d}{00056}}\ \mbox{\hyperlink{structdaq__msg}{daq\_msg}}\ \mbox{\hyperlink{daq_8c_af2240542724a20552b90fafa9642884d}{default\_datapoints}}[]\ =\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00057}00057\ \ \ \ \ \{.can\_id\ =\ 0x530,}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00058}00058\ \ \ \ \ .param\ =\ \{\mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9a4aa469f8ff609f64a67cb8f94bbae331}{APPS1\_ADC\_VAL}},\mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9a649cfa800751dbfadfee50fbb49f8a0c}{APPS2\_ADC\_VAL}},\mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9a217d6550cdad0d3eaff0189d269d8929}{BPS1\_ADC\_VAL}},\mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9a75e438f4c4f3e2113352eb85475f8fa7}{BPS2\_ADC\_VAL}}\},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00059}00059\ \ \ \ \ .period\ =\ 50,}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00060}00060\ \ \ \ \ .type\ =\ \{\mbox{\hyperlink{uvfr__utils_8h_ac2ad7f431e3446fddcd9b6b9f93c4c14a536b610b4345a500e7eac0aa798d8fe0}{UV\_UINT16}},\mbox{\hyperlink{uvfr__utils_8h_ac2ad7f431e3446fddcd9b6b9f93c4c14a536b610b4345a500e7eac0aa798d8fe0}{UV\_UINT16}},\mbox{\hyperlink{uvfr__utils_8h_ac2ad7f431e3446fddcd9b6b9f93c4c14a536b610b4345a500e7eac0aa798d8fe0}{UV\_UINT16}},\mbox{\hyperlink{uvfr__utils_8h_ac2ad7f431e3446fddcd9b6b9f93c4c14a536b610b4345a500e7eac0aa798d8fe0}{UV\_UINT16}}\}\},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00062}00062\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00064}00064\ \ \ \ \ \{.can\_id\ =\ 0x540,}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00065}00065\ \ \ \ \ .param\ =\ \{\mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9a7370a4980da3b06231cacd01246e6382}{VCU\_VEHICLE\_STATE}},\mbox{\hyperlink{daq_8c_aba239cbf28dfdbe0359593717f8705d5}{INV\_DAQ\_P}},\mbox{\hyperlink{daq_8c_aba239cbf28dfdbe0359593717f8705d5}{INV\_DAQ\_P}},\mbox{\hyperlink{daq_8c_aba239cbf28dfdbe0359593717f8705d5}{INV\_DAQ\_P}}\},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00066}00066\ \ \ \ \ .period\ =\ 100,}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00067}00067\ \ \ \ \ .type\ =\ \{\mbox{\hyperlink{uvfr__utils_8h_ac2ad7f431e3446fddcd9b6b9f93c4c14a536b610b4345a500e7eac0aa798d8fe0}{UV\_UINT16}},0,0,0\}\},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00072}00072\ \};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00074}\mbox{\hyperlink{daq_8c_aeed531c2be2a5177eebeaacd47c04526}{00074}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{daq_8c_aeed531c2be2a5177eebeaacd47c04526}{param\_ptrs}}[\mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9ab17c72af1b52d361cceed996a9cbc502}{MAX\_LOGGABLE\_PARAMS}}];}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00076}\mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{00076}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}*\ \mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00078}\mbox{\hyperlink{daq_8c_ac392727a4f2b768d9702e3796feca27c}{00078}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdaq__msg}{daq\_msg}}*\ \mbox{\hyperlink{daq_8c_ac392727a4f2b768d9702e3796feca27c}{datapoints}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00080}\mbox{\hyperlink{daq_8c_a463311a3d81da8e08c8c9c78d447fc59}{00080}}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}*\ \mbox{\hyperlink{daq_8c_a463311a3d81da8e08c8c9c78d447fc59}{param\_bank}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00081}00081\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00082}00082\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{daq_8c_a740f6299f5ce19d6d94d148e13231dd9}{daqSubTask}}(\textcolor{keywordtype}{void}*\ args);}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00087}\mbox{\hyperlink{daq_8h_a56ca1193de01115c27ceb3768994017f}{00087}}\ \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\_status}}\ \mbox{\hyperlink{daq_8c_a56ca1193de01115c27ceb3768994017f}{associateDaqParamWithVar}}(uint16\_t\ paramID,\ \textcolor{keywordtype}{void}*\ var)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00088}00088\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{uvfr__utils_8h_a0186c036688c7852cf0ceaee96b343a3}{uvIsPTRValid}}(var)!=\mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0}{UV\_ERROR}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00090}00090\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00092}00092\ \ \ \ \ \textcolor{keywordflow}{if}(paramID\ >=\ \mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9ab17c72af1b52d361cceed996a9cbc502}{MAX\_LOGGABLE\_PARAMS}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0}{UV\_ERROR}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00094}00094\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00095}00095\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{daq_8c_aeed531c2be2a5177eebeaacd47c04526}{param\_ptrs}}[paramID]\ =\ var;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00098}00098\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00099}00099\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00104}\mbox{\hyperlink{daq_8c_adcd689b5d7e750a2970e1f9e05c16c55}{00104}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{daq_8c_adcd689b5d7e750a2970e1f9e05c16c55}{insertParamToParamList}}(\mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}*\ node,\ \mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}**\ list)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00105}00105\ \ \ \ \ \textcolor{keywordflow}{if}(*list\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00106}00106\ \ \ \ \ \ \ \ \ *list\ =\ node;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00107}00107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00108}00108\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00110}00110\ \ \ \ \ \mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}*\ tmp\ =\ *list;\ \textcolor{comment}{//Sets\ a\ temporary\ var\ as\ the\ first\ list\ entry}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00112}00112\ \ \ \ \ \textcolor{keywordflow}{while}(tmp-\/>\mbox{\hyperlink{structdaq__param__list__node_aa70718d4adff315eb53a8c00e4b1021a}{next}}\ !=\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00113}00113\ \ \ \ \ \ \ \ \ tmp\ =\ tmp-\/>\mbox{\hyperlink{structdaq__param__list__node_aa70718d4adff315eb53a8c00e4b1021a}{next}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00114}00114\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00116}00116\ \ \ \ \ \textcolor{comment}{//Now\ this\ is\ a\ situation\ where\ tmp-\/>next\ MUST\ be\ NULL}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00117}00117\ \ \ \ \ tmp-\/>\mbox{\hyperlink{structdaq__param__list__node_aa70718d4adff315eb53a8c00e4b1021a}{next}}\ =\ node;\ \textcolor{comment}{//\ Set\ it's\ next\ as\ a\ node}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00119}00119\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00124}\mbox{\hyperlink{daq_8c_ab5fd6b7e1a2b15c2c834291f9386d1ef}{00124}}\ \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\_status}}\ \mbox{\hyperlink{daq_8c_ab5fd6b7e1a2b15c2c834291f9386d1ef}{insertParamToRegister}}(\mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}*\ node,\ \mbox{\hyperlink{structdaq__msg}{daq\_msg}}*\ datapoint)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00125}00125\ \ \ \ \ \textcolor{comment}{//Step\ 1:\ find\ which\ task\ this\ will\ be\ assigned\ to.\ If\ no\ tasks\ have\ been\ created\ yet,\ then\ create\ them\ lol}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00126}00126\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}}\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00127}00127\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}}\ =\ uvMalloc(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}));}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00129}00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}}\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Oopsies}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00131}00131\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00132}00132\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00133}00133\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}}-\/>\mbox{\hyperlink{structdaq__child__task_ada97dc181bb6a3919f978fb17431d336}{period}}\ =\ datapoint-\/>\mbox{\hyperlink{structdaq__msg_af9db1e60fe6df3c871d1ac3c07b4747e}{period}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00134}00134\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}}-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00135}00135\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}}-\/>\mbox{\hyperlink{structdaq__child__task_ab58febeab8b66376a3b3520e9cff950f}{param\_list}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00136}00136\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00138}00138\ \ \ \ \ \mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}*\ list\_tmp\ =\ \mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00139}00139\ \ \ \ \ node-\/>\mbox{\hyperlink{structdaq__param__list__node_a6b52773cafc7e69fdb4eca2d64a2fab3}{can\_id}}\ =\ datapoint-\/>\mbox{\hyperlink{structdaq__msg_aa0d10ac95162c7b964551a3281237bbd}{can\_id}};\ \textcolor{comment}{//Ensure\ that\ the\ daq\_node\ has\ the\ needed\ params}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00140}00140\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 1;\ i<4\ ;\ i++)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00141}00141\ \ \ \ \ \ \ \ \ node-\/>\mbox{\hyperlink{structdaq__param__list__node_a8e1cf08361b1b644c795742ab1406c66}{param}}[i]\ =\ datapoint-\/>\mbox{\hyperlink{structdaq__msg_ad40de4162a6b6c6c34ae4d05ccb4892a}{param}}[i];}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00142}00142\ \ \ \ \ \ \ \ \ node-\/>\mbox{\hyperlink{structdaq__param__list__node_a5264395f002b308398fb581559eafc37}{size}}[i]\ =\ \mbox{\hyperlink{uvfr__utils_8h_a657e7e858d8847396634fd9912747f8b}{data\_size}}[datapoint-\/>\mbox{\hyperlink{structdaq__msg_a25218bd34b7e1104ba182806065950ad}{type}}[i]];}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00143}00143\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00144}00144\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00145}00145\ \ \ \ \ node-\/>\mbox{\hyperlink{structdaq__param__list__node_aa70718d4adff315eb53a8c00e4b1021a}{next}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00147}00147\ \ \ \ \ \textcolor{keywordflow}{while}(1)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Keep\ going\ until\ we\ find\ one\ with\ a\ period\ that\ matches}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00149}00149\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_ada97dc181bb6a3919f978fb17431d336}{period}}\ ==\ datapoint-\/>\mbox{\hyperlink{structdaq__msg_af9db1e60fe6df3c871d1ac3c07b4747e}{period}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Insert\ to\ list}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_adcd689b5d7e750a2970e1f9e05c16c55}{insertParamToParamList}}(node,\ \&(list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_ab58febeab8b66376a3b3520e9cff950f}{param\_list}}));}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00153}00153\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00154}00154\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00155}00155\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00156}00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}\ =\ uvMalloc(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}));}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Another\ big\ oopsie}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}-\/>\mbox{\hyperlink{structdaq__child__task_ada97dc181bb6a3919f978fb17431d336}{period}}\ =\ datapoint-\/>\mbox{\hyperlink{structdaq__msg_af9db1e60fe6df3c871d1ac3c07b4747e}{period}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}-\/>\mbox{\hyperlink{structdaq__child__task_ab58febeab8b66376a3b3520e9cff950f}{param\_list}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00166}00166\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//list\_tmp-\/>param\_list\ =\ NULL;}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00167}00167\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_adcd689b5d7e750a2970e1f9e05c16c55}{insertParamToParamList}}(node,\ \&(list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}}-\/>\mbox{\hyperlink{structdaq__child__task_ab58febeab8b66376a3b3520e9cff950f}{param\_list}}));}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00168}00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00169}00169\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00170}00170\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00172}00172\ \ \ \ \ \ \ \ \ list\_tmp\ =\ list\_tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00173}00173\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00174}00174\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00175}00175\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00176}00176\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00177}00177\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00178}00178\ \textcolor{comment}{//daq\_param\_list\_node*\ param\_bank;}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00179}00179\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00183}\mbox{\hyperlink{daq_8c_a9e1cd582f8748d018266ba4ab15561ae}{00183}}\ \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\_status}}\ \mbox{\hyperlink{daq_8c_a9e1cd582f8748d018266ba4ab15561ae}{configureDaqSubTasks}}()\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00184}00184\ \ \ \ \ uint16\_t\ n\_logged\_params\ =\ \mbox{\hyperlink{daq_8c_a5a9a97f4494923c066b5c4faaaaf8f88}{curr\_daq\_settings}}-\/>\mbox{\hyperlink{structdaq__loop__args_acb7bf20ade7a6544c747aebc165b7faf}{total\_params\_logged}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00185}00185\ \ \ \ \ \textcolor{comment}{//uint16\_t\ n;\ //\ Will\ use\ this\ to\ track\ number\ of\ params\ used\ as\ we\ iterate}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00186}00186\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00187}00187\ \ \ \ \ \mbox{\hyperlink{structdaq__msg}{daq\_msg}}*\ master\_param\_list\ =\ \mbox{\hyperlink{uvfr__settings_8h_a03566822d1b8893362970a459bd67daf}{current\_vehicle\_settings}}-\/>\mbox{\hyperlink{structuv__vehicle__settings_a7af5e3466cb7d152a26970be33ca9f5e}{daq\_param\_list}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00188}00188\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00189}00189\ \ \ \ \ \mbox{\hyperlink{daq_8c_a463311a3d81da8e08c8c9c78d447fc59}{param\_bank}}\ =\ uvMalloc(n\_logged\_params*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}));}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00191}00191\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{daq_8c_a463311a3d81da8e08c8c9c78d447fc59}{param\_bank}}\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00192}00192\ \ \ \ \ \ \ \ \ uvPanic(\textcolor{stringliteral}{"{}outofmem"{}},0);}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00193}00193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0}{UV\_ERROR}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00194}00194\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00195}00195\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00196}00196\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ i<n\_logged\_params\ ;\ i++)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00197}00197\ \ \ \ \ \ \ \ \ \textcolor{comment}{//We\ now\ go\ through\ all\ of\ the\ parameters.}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00198}00198\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{daq_8c_ab5fd6b7e1a2b15c2c834291f9386d1ef}{insertParamToRegister}}(\&(\mbox{\hyperlink{daq_8c_a463311a3d81da8e08c8c9c78d447fc59}{param\_bank}}[i]),\&(master\_param\_list[i]))\ !=\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00199}00199\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//This\ is\ a\ non\_critical\ system,\ so\ I\ vote\ we\ just\ ignore\ it.}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00200}00200\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00201}00201\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00203}00203\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00205}00205\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00206}00206\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00210}\mbox{\hyperlink{daq_8c_a65df75bcd76d421bf28fca5704c8ff95}{00210}}\ \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\_status}}\ \mbox{\hyperlink{daq_8c_a65df75bcd76d421bf28fca5704c8ff95}{startDaqSubTasks}}()\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00211}00211\ \ \ \ \ \mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}*\ tmp\ =\ \mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00212}00212\ \ \ \ \ \mbox{\hyperlink{portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t}}\ retval\ =\ 0;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00213}00213\ \ \ \ \ \textcolor{keywordflow}{while}(tmp\ !=\ NULL)\{\ \textcolor{comment}{//Iterate\ through\ linked\ list\ of\ DAQ\ subtasks}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00214}00214\ \ \ \ \ \ \ \ \ retval\ =\ xTaskCreate(\mbox{\hyperlink{daq_8c_a740f6299f5ce19d6d94d148e13231dd9}{daqSubTask}},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00215}00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}DaqSub"{}},256,tmp,}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_a5a9a97f4494923c066b5c4faaaaf8f88}{curr\_daq\_settings}}-\/>\mbox{\hyperlink{structdaq__loop__args_af3ed9db4033594f8f7db2649a1ca59c0}{daq\_child\_priority}},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&(tmp-\/>\mbox{\hyperlink{structdaq__child__task_aeb649c4b5047ed12107eea04fb68042e}{meta\_task\_handle}}));}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00218}00218\ \ \ \ \ \ \ \ \ tmp\ =\ tmp-\/>\mbox{\hyperlink{structdaq__child__task_a1c1a861279f70722384c45e9a62eecee}{next\_task}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00219}00219\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00220}00220\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(retval\ !=\ \mbox{\hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00221}00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Do\ something\ to\ handle\ the\ error}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00222}00222\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00224}00224\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00225}00225\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00226}00226\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00231}\mbox{\hyperlink{daq_8c_ad3997ae047f3e30136b3f2b668c8030a}{00231}}\ \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\_status}}\ \mbox{\hyperlink{daq_8c_ad3997ae047f3e30136b3f2b668c8030a}{stopDaqSubTasks}}()\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00232}00232\ \ \ \ \ \mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}*\ tmp\ =\ \mbox{\hyperlink{daq_8c_a912bd9ed0555d1bedc46ec216962c5f1}{daq\_tlist}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00233}00233\ \ \ \ \ \textcolor{comment}{//BaseType\_t\ retval\ =\ 0;}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00234}00234\ \ \ \ \ \textcolor{keywordflow}{while}(tmp!=NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00235}00235\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{task_8h_a27ff4ebce26565bef136bda84201ff80}{vTaskDelete}}(tmp-\/>\mbox{\hyperlink{structdaq__child__task_aeb649c4b5047ed12107eea04fb68042e}{meta\_task\_handle}});}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00236}00236\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00237}00237\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0}{UV\_ERROR}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00238}00238\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00239}00239\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00240}\mbox{\hyperlink{daq_8c_a46330ae75c3716f15677e104e8cced32}{00240}}\ \mbox{\hyperlink{structuv___c_a_n__msg}{uv\_CAN\_msg}}\ \mbox{\hyperlink{daq_8c_a46330ae75c3716f15677e104e8cced32}{tmp\_daq\_msg}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00241}00241\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00257}\mbox{\hyperlink{daq_8h_af2c619df9f3d115dcbc511b0bb738e87}{00257}}\ \mbox{\hyperlink{can_8h_aef3770e45bbacbf527fd93dd80eea9b9}{uv\_status}}\ \mbox{\hyperlink{daq_8c_af2c619df9f3d115dcbc511b0bb738e87}{initDaqTask}}(\textcolor{keywordtype}{void}\ *\ args)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00258}00258\ \ \ \ \ \textcolor{comment}{//MX\_ADC1\_Init;\ //calling\ initialization\ of\ ADC1}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00259}00259\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00260}00260\ \ \ \ \ \mbox{\hyperlink{daq_8c_a5a9a97f4494923c066b5c4faaaaf8f88}{curr\_daq\_settings}}\ =\ \mbox{\hyperlink{uvfr__settings_8h_a03566822d1b8893362970a459bd67daf}{current\_vehicle\_settings}}-\/>\mbox{\hyperlink{structuv__vehicle__settings_a6caecf0c9fd669e421c4005600d81b71}{daq\_settings}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00261}00261\ \ \ \ \ \mbox{\hyperlink{daq_8c_ac392727a4f2b768d9702e3796feca27c}{datapoints}}\ =\ \mbox{\hyperlink{uvfr__settings_8h_a03566822d1b8893362970a459bd67daf}{current\_vehicle\_settings}}-\/>\mbox{\hyperlink{structuv__vehicle__settings_a7af5e3466cb7d152a26970be33ca9f5e}{daq\_param\_list}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00262}00262\ \ \ \ \ \mbox{\hyperlink{daq_8c_a46330ae75c3716f15677e104e8cced32}{tmp\_daq\_msg}}.\mbox{\hyperlink{structuv___c_a_n__msg_a3a3fdc7fed06a631fefa58ea44052d8d}{flags}}\ =\ \mbox{\hyperlink{daq_8c_a5a9a97f4494923c066b5c4faaaaf8f88}{curr\_daq\_settings}}-\/>\mbox{\hyperlink{structdaq__loop__args_ac6e97a06cf45265c74de1ac1f13fad81}{can\_channel}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00263}00263\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00264}00264\ \ \ \ \ \mbox{\hyperlink{daq_8c_a56ca1193de01115c27ceb3768994017f}{associateDaqParamWithVar}}(\mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9a5bdd2cd7badbaa890b54c82af7da4035}{COOLANT\_TEMP\_ADC}},\ (\textcolor{keywordtype}{void}*)\&\mbox{\hyperlink{daq_8c_a2273a53b295e470100af298a0be7d8d7}{coolant\_temp\_adc}});\ \textcolor{comment}{//HOOKING\ ADC\ VARS\ TO\ DAQ.\ }}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00265}00265\ \ \ \ \ \mbox{\hyperlink{daq_8c_a56ca1193de01115c27ceb3768994017f}{associateDaqParamWithVar}}(\mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9a6e2e0d55959021b3a1926482664a3e03}{MOTOR\_TEMP\_ADC}},\ (\textcolor{keywordtype}{void}*)\&\mbox{\hyperlink{daq_8c_a0611933f2919b8900cd5e667043747fe}{motor\_temp\_adc}});\ \textcolor{comment}{//HOOKING\ ADC\ VARS\ TO\ DAQ.\ }}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00266}00266\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00267}00267\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00268}00268\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{daq_8c_a9e1cd582f8748d018266ba4ab15561ae}{configureDaqSubTasks}}()\ !=\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00269}00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0}{UV\_ERROR}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00270}00270\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00271}00271\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00272}00272\ \ \ \ \ \mbox{\hyperlink{structuv__task__info}{uv\_task\_info}}*\ daq\_task\ =\ \mbox{\hyperlink{group__state__engine__api_gac977eb33c99a9ac0a5f51a7db20e24d6}{uvCreateTask}}();}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00273}00273\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00274}00274\ \ \ \ \ \textcolor{keywordflow}{if}(daq\_task\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00275}00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Oh\ dear\ lawd}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00276}00276\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0}{UV\_ERROR}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00277}00277\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00278}00278\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00279}00279\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00280}00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//DO\ NOT\ TOUCH\ ANY\ OF\ THE\ FIELDS\ WE\ HAVENT\ ALREADY\ MENTIONED\ HERE.\ FOR\ THE\ LOVE\ OF\ GOD.}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00281}00281\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_ad24b438130bb3098ee5e855222dff21d}{task\_name}}\ =\ \textcolor{stringliteral}{"{}daq"{}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00282}00282\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00283}00283\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_afcd240d2b6b01b4acea600ef4dfe8fbc}{task\_function}}\ =\ \mbox{\hyperlink{daq_8c_a433bb586ceab47aed8d633fa2ff8ce56}{daqMasterTask}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00284}00284\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_aff45751f7189980589d55379d1d5a355}{task\_priority}}\ =\ \mbox{\hyperlink{daq_8c_a5a9a97f4494923c066b5c4faaaaf8f88}{curr\_daq\_settings}}-\/>\mbox{\hyperlink{structdaq__loop__args_af3ed9db4033594f8f7db2649a1ca59c0}{daq\_child\_priority}}\ +\ 1;\ \textcolor{comment}{//Slightly\ more\ important\ than\ the\ children\ tasks}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00285}00285\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00286}00286\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00287}00287\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_a353ec6bf2c42ab0920f3d1e671e568a3}{stack\_size}}\ =\ 256;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00288}00288\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00289}00289\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00290}00290\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_ab24dea3bde4de2d839bf15e65c2df0d6}{active\_states}}\ =\ \mbox{\hyperlink{group__state__engine__api_gga259abff5a03eaf908dc8f03d99f478e4a9ec1eef180c6208b25b08f0526dc5eb8}{UV\_READY}}\ |\ \mbox{\hyperlink{group__state__engine__api_gga259abff5a03eaf908dc8f03d99f478e4aa4f9f0d81d66079ab97ea3abc3808969}{UV\_DRIVING}}\ |\ \mbox{\hyperlink{group__state__engine__api_gga259abff5a03eaf908dc8f03d99f478e4ac1fcacc095b8c0f1c9f452d51815bcb5}{UV\_ERROR\_STATE}}\ |\ \mbox{\hyperlink{group__state__engine__api_gga259abff5a03eaf908dc8f03d99f478e4a7ff39f8abdc9adbfd693e412e4aaeb6e}{UV\_LAUNCH\_CONTROL}}\ ;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00291}00291\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_aafd4e2d916f50b54b99fd02d63831e43}{suspension\_states}}\ =\ 0x00;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00292}00292\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_a6986d7216c7f889164931b37ab752c29}{deletion\_states}}\ =\ \mbox{\hyperlink{group__state__engine__api_gga259abff5a03eaf908dc8f03d99f478e4abed5371c079ef927fb67d8bb8e8aa286}{PROGRAMMING}}\ ;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00293}00293\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00294}00294\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_ad157811debce6672bb6d00da7e90b6ca}{task\_period}}\ =\ 20;\ \textcolor{comment}{//measured\ in\ ms}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00295}00295\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00296}00296\ \ \ \ \ daq\_task-\/>\mbox{\hyperlink{structuv__task__info_ae255dff9b38fc8c0754085060e8ae699}{task\_args}}\ =\ NULL;\ \textcolor{comment}{//TODO:\ Add\ actual\ settings\ dipshit}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00297}00297\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00298}00298\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00299}00299\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00300}00300\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00301}00301\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00305}\mbox{\hyperlink{daq_8h_a433bb586ceab47aed8d633fa2ff8ce56}{00305}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{daq_8c_a433bb586ceab47aed8d633fa2ff8ce56}{daqMasterTask}}(\textcolor{keywordtype}{void}*\ args)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00306}00306\ \ \ \ \ \mbox{\hyperlink{structuv__task__info}{uv\_task\_info}}*\ params\ =\ (\mbox{\hyperlink{structuv__task__info}{uv\_task\_info}}*)\ args;\ \textcolor{comment}{//Evil\ pointer\ typecast}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00307}00307\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00308}00308\ \ \ \ \ \mbox{\hyperlink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{vTaskDelay}}(50);\ \textcolor{comment}{//Give\ it\ a\ moment\ before\ spawning\ in\ a\ bunch\ of\ daq\_tasks}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00309}00309\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00310}00310\ \ \ \ \ \textcolor{comment}{//updateReadings();\ //update\ ADC\ values}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00311}00311\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00312}00312\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{daq_8c_a65df75bcd76d421bf28fca5704c8ff95}{startDaqSubTasks}}()!=\mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00313}00313\ \ \ \ \ \ \ \ \ \textcolor{comment}{//failed\ to\ start\ the\ daq\ subtasks}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00314}00314\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00315}00315\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00320}00320\ \ \ \ \ \textcolor{comment}{//TickType\_t\ tick\_period\ =\ pdMS\_TO\_TICKS(params-\/>task\_period);\ //Convert\ ms\ of\ period\ to\ the\ RTOS\ ticks}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00321}00321\ \ \ \ \ \textcolor{comment}{//TickType\_t\ last\_time\ =\ xTaskGetTickCount();\ \ \ \ \ \ \ /**@endcode\ */}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00322}00322\ \ \ \ \ \textcolor{keywordflow}{for}(;;)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00323}00323\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(params-\/>\mbox{\hyperlink{structuv__task__info_af532b5031cd6a168a3ec45ab9ead4f23}{cmd\_data}}\ ==\ \mbox{\hyperlink{group__state__engine__api_ggaf11e8677926913f2dd803fabbed3455ca0e75e398c2bbcb663eaeb98684ca69d6}{UV\_KILL\_CMD}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//stopDaqSubTasks();}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00325}00325\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00326}00326\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group__state__engine__backend_ga5f35b34432afed7f18f91fb8607f096f}{killSelf}}(params);}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00327}00327\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(params-\/>\mbox{\hyperlink{structuv__task__info_af532b5031cd6a168a3ec45ab9ead4f23}{cmd\_data}}\ ==\ \mbox{\hyperlink{group__state__engine__api_ggaf11e8677926913f2dd803fabbed3455ca5f389a67f2a45fe1f51492b3b8f04077}{UV\_SUSPEND\_CMD}})\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00328}00328\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//stopDaqSubTasks();}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00329}00329\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00330}00330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//suspendSelf(params);}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00331}00331\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00332}00332\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group__state__engine__api_ga5073c1aa60fa9292bc88054a2184daee}{uvTaskDelay}}(params,params-\/>\mbox{\hyperlink{structuv__task__info_ad157811debce6672bb6d00da7e90b6ca}{task\_period}});}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00333}00333\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00334}00334\ \ \ \ \ \ \ \ \ \textcolor{comment}{//HAL\_GPIO\_TogglePin(GPIOD,GPIO\_PIN\_15);}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00335}00335\ \textcolor{comment}{//\ \ \ \ \ \ if(HAL\_GPIO\_ReadPin(GPIOA,\ GPIO\_PIN\_0))\{}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00336}00336\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ vTaskDelay(25);}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00337}00337\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ while(HAL\_GPIO\_ReadPin(GPIOA,\ GPIO\_PIN\_0))\{}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00338}00338\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00339}00339\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00340}00340\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00341}00341\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00342}00342\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00343}00343\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ \ \ \ \ changeVehicleState(UV\_DRIVING);}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00344}00344\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00345}00345\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00346}00346\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00347}00347\ \textcolor{comment}{//\ \ \ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00348}00348\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00349}00349\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00350}00350\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00351}00351\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00352}00352\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00353}00353\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00354}00354\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00355}00355\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00359}\mbox{\hyperlink{daq_8c_a35e09915fc9dccafc842112110511923}{00359}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{daq_8c_a35e09915fc9dccafc842112110511923}{sendDaqMsg}}(\mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}*\ dmsg)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00360}00360\ \textcolor{comment}{//\ \ if(param-\/>param\ >\ 32)\{}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00361}00361\ \textcolor{comment}{//\ \ \ \ \ \ return;}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00362}00362\ \textcolor{comment}{//\ \ \}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00363}00363\ \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00364}00364\ \textcolor{comment}{//\ \ if(param\_ptrs[param-\/>param]\ ==\ NULL)\{\ //We\ simply\ ignore\ nulls\ instead\ of\ say,\ crashing}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00365}00365\ \textcolor{comment}{//\ \ \ \ \ \ return;}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00366}00366\ \textcolor{comment}{//\ \ \}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00367}00367\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00368}00368\ \textcolor{comment}{//\ \ tmp\_daq\_msg.msg\_id\ =\ param-\/>can\_id;}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00369}00369\ \textcolor{comment}{//\ \ tmp\_daq\_msg.data[0]\ =\ *((uint8\_t*)(param\_ptrs[param-\/>param]));}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00370}00370\ \textcolor{comment}{//\ \ tmp\_daq\_msg.data[1]\ =\ *((uint8\_t*)(param\_ptrs[param-\/>param]+1));}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00371}00371\ \textcolor{comment}{//\ \ tmp\_daq\_msg.data[2]\ =\ *((uint8\_t*)(param\_ptrs[param-\/>param]+2));}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00372}00372\ \textcolor{comment}{//\ \ tmp\_daq\_msg.data[3]\ =\ *((uint8\_t*)(param\_ptrs[param-\/>param]+3));}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00373}00373\ \textcolor{comment}{//\ \ tmp\_daq\_msg.dlc\ =\ param-\/>size;}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00374}00374\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00375}00375\ \ \ \ \ \mbox{\hyperlink{structuv___c_a_n__msg}{uv\_CAN\_msg}}\ msg\ =\ \{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00376}00376\ \ \ \ \ \ \ \ \ .flags\ =\ \mbox{\hyperlink{daq_8c_a5a9a97f4494923c066b5c4faaaaf8f88}{curr\_daq\_settings}}-\/>\mbox{\hyperlink{structdaq__loop__args_ac6e97a06cf45265c74de1ac1f13fad81}{can\_channel}},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00377}00377\ \ \ \ \ \ \ \ \ .data\ =\ \{0,0,0,0,0,0,0,0\},}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00378}00378\ \ \ \ \ \ \ \ \ .msg\_id\ =\ dmsg-\/>\mbox{\hyperlink{structdaq__param__list__node_a6b52773cafc7e69fdb4eca2d64a2fab3}{can\_id}}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00379}00379\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00380}00380\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00381}00381\ \ \ \ \ uint16\_t\ param\ =\ 0xFFFF;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00382}00382\ \ \ \ \ uint8\_t\ dlc\ =\ 0;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00383}00383\ \ \ \ \ uint8\_t\ psize\ =\ 0;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00384}00384\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00385}00385\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ i<4\ ;\ i++)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00386}00386\ \ \ \ \ \ \ \ \ param\ =\ dmsg-\/>\mbox{\hyperlink{structdaq__param__list__node_a8e1cf08361b1b644c795742ab1406c66}{param}}[i];}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00387}00387\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00388}00388\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(param\ >=\ \mbox{\hyperlink{daq_8h_a5249d5d3ad44df9d4479b814028469a9ab17c72af1b52d361cceed996a9cbc502}{MAX\_LOGGABLE\_PARAMS}})\{\ \textcolor{comment}{//Not\ a\ real\ parameter,\ sorry!}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00389}00389\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00390}00390\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00391}00391\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00392}00392\ \ \ \ \ \ \ \ \ uint8\_t*\ p\_ptr\ =\ (uint8\_t*)\mbox{\hyperlink{daq_8c_aeed531c2be2a5177eebeaacd47c04526}{param\_ptrs}}[param];}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00393}00393\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00394}00394\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(p\_ptr\ ==\ NULL)\{\ \textcolor{comment}{//cover\ edge\ case\ where\ the\ param\ ID\ has\ not\ been\ associated\ with\ a\ variable\ -\/\ send\ 0\ in\ this\ case}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00395}00395\ \ \ \ \ \ \ \ \ \ \ \ \ p\_ptr\ =\ (uint8\_t*)(\&\mbox{\hyperlink{daq_8c_a08de9f1889def4ee8d79962e6044bb0f}{constant\_zero}});}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00396}00396\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00397}00397\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00398}00398\ \ \ \ \ \ \ \ \ psize\ =\ dmsg-\/>\mbox{\hyperlink{structdaq__param__list__node_a5264395f002b308398fb581559eafc37}{size}}[i];}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00399}00399\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00400}00400\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}((dlc\ +\ psize)\ >\ 8)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00401}00401\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//out\ of\ room\ in\ the\ message}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00402}00402\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00403}00403\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00404}00404\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00405}00405\ \ \ \ \ \ \ \ \ \textcolor{comment}{//increment\ your\ data\ length\ code\ :)}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00406}00406\ \ \ \ \ \ \ \ \ dlc\ +=\ psize;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00407}00407\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00408}00408\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ j\ =\ 0;\ j<psize\ ;\ j++)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00409}00409\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Add\ each\ byte\ of\ content\ to\ the\ message}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00410}00410\ \ \ \ \ \ \ \ \ \ \ \ \ msg.\mbox{\hyperlink{structuv___c_a_n__msg_aec63cc112176da7895d0cfc8b32e6935}{data}}[(dlc\ -\/\ i)\ -\/\ 1]\ =\ *(p\_ptr\ +\ j);\ \textcolor{comment}{//This\ puts\ DAQ\ messages\ in\ BIG\ endian,\ for\ optimal\ human\ readibility}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00411}00411\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00412}00412\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00413}00413\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00414}00414\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00415}00415\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00416}00416\ \ \ \ \ \mbox{\hyperlink{group__uvfr__can__api_ga62414944c3b631f57fdd08e467bcf5a4}{uvSendCanMSG}}(\&msg);}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00417}00417\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00418}00418\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00419}00419\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00423}\mbox{\hyperlink{daq_8c_ae7274a95a4e4881bc3fe84c9021d4a6c}{00423}}\ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{daq_8c_ae7274a95a4e4881bc3fe84c9021d4a6c}{sendAllParamsFromList}}(\mbox{\hyperlink{structdaq__param__list__node}{daq\_param\_list\_node}}*\ list)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00424}00424\ \ \ \ \ \textcolor{keywordflow}{if}(list\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00425}00425\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00426}00426\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00427}00427\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00428}00428\ \ \ \ \ \textcolor{comment}{//Linked\ list\ iteration\ moment}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00429}00429\ \ \ \ \ \textcolor{keywordflow}{while}(list\ !=\ NULL)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00430}00430\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_a35e09915fc9dccafc842112110511923}{sendDaqMsg}}(list);}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00431}00431\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00432}00432\ \ \ \ \ \ \ \ \ list\ =\ list-\/>\mbox{\hyperlink{structdaq__param__list__node_aa70718d4adff315eb53a8c00e4b1021a}{next}};}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00433}00433\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00434}00434\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00435}00435\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00441}\mbox{\hyperlink{daq_8c_a740f6299f5ce19d6d94d148e13231dd9}{00441}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{daq_8c_a740f6299f5ce19d6d94d148e13231dd9}{daqSubTask}}(\textcolor{keywordtype}{void}*\ args)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00442}00442\ \ \ \ \ \mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}*\ params\ =\ (\mbox{\hyperlink{structdaq__child__task}{daq\_child\_task}}*)args;}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00443}00443\ }
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00444}00444\ \ \ \ \ \mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}}\ curr\_time\ =\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}();}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00445}00445\ \ \ \ \ \textcolor{keywordflow}{for}(;;)\{}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00446}00446\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{daq_8c_ae7274a95a4e4881bc3fe84c9021d4a6c}{sendAllParamsFromList}}(params-\/>\mbox{\hyperlink{structdaq__child__task_ab58febeab8b66376a3b3520e9cff950f}{param\_list}});}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00447}00447\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{task_8h_a067da3e949e248096ec6c01f9cb75a47}{vTaskDelayUntil}}(\&curr\_time,\mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(params-\/>\mbox{\hyperlink{structdaq__child__task_ada97dc181bb6a3919f978fb17431d336}{period}}));}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00448}00448\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00449}00449\ \}}
\DoxyCodeLine{\Hypertarget{daq_8c_source_l00450}00450\ }

\end{DoxyCode}
