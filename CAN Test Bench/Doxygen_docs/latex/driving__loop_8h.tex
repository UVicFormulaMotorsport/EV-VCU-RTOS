\doxysection{Core/\+Inc/driving\+\_\+loop.h File Reference}
\hypertarget{driving__loop_8h}{}\label{driving__loop_8h}\index{Core/Inc/driving\_loop.h@{Core/Inc/driving\_loop.h}}
{\ttfamily \#include "{}motor\+\_\+controller.\+h"{}}\newline
{\ttfamily \#include "{}uvfr\+\_\+utils.\+h"{}}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structlinear__torque__map__args}{linear\+\_\+torque\+\_\+map\+\_\+args}}
\item 
struct \mbox{\hyperlink{structexp__torque__map__args}{exp\+\_\+torque\+\_\+map\+\_\+args}}
\begin{DoxyCompactList}\small\item\em struct to hold parameters used in an exponential torque map \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structs__curve__torque__map__args}{s\+\_\+curve\+\_\+torque\+\_\+map\+\_\+args}}
\begin{DoxyCompactList}\small\item\em struct for s-\/curve parameters for torque \end{DoxyCompactList}\item 
union \mbox{\hyperlink{uniondriving_mode_params}{driving\+Mode\+Params}}
\begin{DoxyCompactList}\small\item\em this struct is designed to hold information about each drivingmode\textquotesingle{}s map params \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structdriving_mode}{driving\+Mode}}
\begin{DoxyCompactList}\small\item\em This is where the driving mode and the \doxylink{uniondriving_mode_params}{driving\+Mode\+Params} are at. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structdriving__loop__args}{driving\+\_\+loop\+\_\+args}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef uint16\+\_\+t \mbox{\hyperlink{driving__loop_8h_a5ec2330fa2301c68498a6ff0825998c9}{MC\+\_\+\+Torque}}
\item 
typedef uint16\+\_\+t \mbox{\hyperlink{driving__loop_8h_abd1701d9bbc137696fe99b6df6eb7d3e}{MC\+\_\+\+RPM}}
\item 
typedef uint16\+\_\+t \mbox{\hyperlink{driving__loop_8h_a93f3b2b453b1ad01d8555f12e529dfed}{MC\+\_\+\+POWER}}
\item 
typedef struct linear\+\_\+torque\+\_\+map\+\_\+args \mbox{\hyperlink{driving__loop_8h_a21e30cbee7e12df40656ce0e97c8c1ea}{linear\+\_\+torque\+\_\+map\+\_\+args}}
\item 
typedef struct exp\+\_\+torque\+\_\+map\+\_\+args \mbox{\hyperlink{driving__loop_8h_aa86f54df15fe3c127ae83c1fecbb5d24}{exp\+\_\+torque\+\_\+map\+\_\+args}}
\begin{DoxyCompactList}\small\item\em struct to hold parameters used in an exponential torque map \end{DoxyCompactList}\item 
typedef struct s\+\_\+curve\+\_\+torque\+\_\+map\+\_\+args \mbox{\hyperlink{driving__loop_8h_a32f012927e4624d674120b51cb6ee8c0}{s\+\_\+curve\+\_\+torque\+\_\+map\+\_\+args}}
\begin{DoxyCompactList}\small\item\em struct for s-\/curve parameters for torque \end{DoxyCompactList}\item 
typedef union driving\+Mode\+Params \mbox{\hyperlink{driving__loop_8h_af90b0e528bd940abca8f5e2cf4bce18c}{driving\+Mode\+Params}}
\begin{DoxyCompactList}\small\item\em this struct is designed to hold information about each drivingmode\textquotesingle{}s map params \end{DoxyCompactList}\item 
typedef struct driving\+Mode \mbox{\hyperlink{driving__loop_8h_a29e04283e579e9092d205b1937c785c6}{driving\+Mode}}
\begin{DoxyCompactList}\small\item\em This is where the driving mode and the \doxylink{uniondriving_mode_params}{driving\+Mode\+Params} are at. \end{DoxyCompactList}\item 
typedef struct driving\+\_\+loop\+\_\+args \mbox{\hyperlink{driving__loop_8h_aa421e50f529a1770ef0b2a00a44a0601}{driving\+\_\+loop\+\_\+args}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800}{map\+\_\+mode}} \{ \newline
\mbox{\hyperlink{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a24491cb716ed427ea52ef6cdbf415b52}{linear\+\_\+speed\+\_\+map}}
, \mbox{\hyperlink{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a20916d6e654ff6402aa120d8710a81a0}{s\+\_\+curve\+\_\+speed\+\_\+map}}
, \mbox{\hyperlink{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a260f2e914699db0b53b3cb852559b40f}{exp\+\_\+speed\+\_\+map}}
, \mbox{\hyperlink{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a02e428d0c5cf187b04a2e9825079d26a}{linear\+\_\+torque\+\_\+map}}
, \newline
\mbox{\hyperlink{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a97cb36a9ac4fbbe2e7b481a2677993f9}{s\+\_\+curve\+\_\+torque\+\_\+map}}
, \mbox{\hyperlink{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a22ffbb99cbb49917aac9c53aba81df32}{exp\+\_\+torque\+\_\+map}}
 \}
\begin{DoxyCompactList}\small\item\em DL\+\_\+\+PERIOD is meant to represent how often the driving loop executes, in ms. \end{DoxyCompactList}\item 
enum \mbox{\hyperlink{driving__loop_8h_adef4571b048b5b1f2b712713741296c7}{DL\+\_\+internal\+\_\+state}} \{ \mbox{\hyperlink{driving__loop_8h_adef4571b048b5b1f2b712713741296c7a51000915ad3f7b4a5874322723d879ca}{Plausible}} = 0x01
, \mbox{\hyperlink{driving__loop_8h_adef4571b048b5b1f2b712713741296c7a6425b90f597e6400cfb9422ec518334f}{Implausible}} = 0x02
, \mbox{\hyperlink{driving__loop_8h_adef4571b048b5b1f2b712713741296c7abb3086179f14a3715ce589bd10c3ec98}{Erroneous}} = 0x04
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{driving__loop_8h_af580185fb5bb1cfba30ee1709d90628c}{init\+Driving\+Loop}} (void \texorpdfstring{$\ast$}{*}argument)
\item 
void \mbox{\hyperlink{driving__loop_8h_a80cc48f06202edc29bcad26a956bcc98}{Start\+Driving\+Loop}} (void \texorpdfstring{$\ast$}{*}argument)
\begin{DoxyCompactList}\small\item\em Sends the filtered torque value to the motor controller. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\Hypertarget{driving__loop_8h_aa421e50f529a1770ef0b2a00a44a0601}\index{driving\_loop.h@{driving\_loop.h}!driving\_loop\_args@{driving\_loop\_args}}
\index{driving\_loop\_args@{driving\_loop\_args}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{driving\_loop\_args}{driving\_loop\_args}}
{\footnotesize\ttfamily \label{driving__loop_8h_aa421e50f529a1770ef0b2a00a44a0601} 
typedef struct driving\+\_\+loop\+\_\+args driving\+\_\+loop\+\_\+args}

\Hypertarget{driving__loop_8h_a29e04283e579e9092d205b1937c785c6}\index{driving\_loop.h@{driving\_loop.h}!drivingMode@{drivingMode}}
\index{drivingMode@{drivingMode}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{drivingMode}{drivingMode}}
{\footnotesize\ttfamily \label{driving__loop_8h_a29e04283e579e9092d205b1937c785c6} 
typedef struct driving\+Mode driving\+Mode}



This is where the driving mode and the \doxylink{uniondriving_mode_params}{driving\+Mode\+Params} are at. 

\Hypertarget{driving__loop_8h_af90b0e528bd940abca8f5e2cf4bce18c}\index{driving\_loop.h@{driving\_loop.h}!drivingModeParams@{drivingModeParams}}
\index{drivingModeParams@{drivingModeParams}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{drivingModeParams}{drivingModeParams}}
{\footnotesize\ttfamily \label{driving__loop_8h_af90b0e528bd940abca8f5e2cf4bce18c} 
typedef union driving\+Mode\+Params driving\+Mode\+Params}



this struct is designed to hold information about each drivingmode\textquotesingle{}s map params 

\Hypertarget{driving__loop_8h_aa86f54df15fe3c127ae83c1fecbb5d24}\index{driving\_loop.h@{driving\_loop.h}!exp\_torque\_map\_args@{exp\_torque\_map\_args}}
\index{exp\_torque\_map\_args@{exp\_torque\_map\_args}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{exp\_torque\_map\_args}{exp\_torque\_map\_args}}
{\footnotesize\ttfamily \label{driving__loop_8h_aa86f54df15fe3c127ae83c1fecbb5d24} 
typedef struct exp\+\_\+torque\+\_\+map\+\_\+args exp\+\_\+torque\+\_\+map\+\_\+args}



struct to hold parameters used in an exponential torque map 

\Hypertarget{driving__loop_8h_a21e30cbee7e12df40656ce0e97c8c1ea}\index{driving\_loop.h@{driving\_loop.h}!linear\_torque\_map\_args@{linear\_torque\_map\_args}}
\index{linear\_torque\_map\_args@{linear\_torque\_map\_args}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{linear\_torque\_map\_args}{linear\_torque\_map\_args}}
{\footnotesize\ttfamily \label{driving__loop_8h_a21e30cbee7e12df40656ce0e97c8c1ea} 
typedef struct linear\+\_\+torque\+\_\+map\+\_\+args linear\+\_\+torque\+\_\+map\+\_\+args}

\Hypertarget{driving__loop_8h_a93f3b2b453b1ad01d8555f12e529dfed}\index{driving\_loop.h@{driving\_loop.h}!MC\_POWER@{MC\_POWER}}
\index{MC\_POWER@{MC\_POWER}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{MC\_POWER}{MC\_POWER}}
{\footnotesize\ttfamily \label{driving__loop_8h_a93f3b2b453b1ad01d8555f12e529dfed} 
typedef uint16\+\_\+t \mbox{\hyperlink{driving__loop_8h_a93f3b2b453b1ad01d8555f12e529dfed}{MC\+\_\+\+POWER}}}



Definition at line \mbox{\hyperlink{driving__loop_8h_source_l00016}{16}} of file \mbox{\hyperlink{driving__loop_8h_source}{driving\+\_\+loop.\+h}}.

\Hypertarget{driving__loop_8h_abd1701d9bbc137696fe99b6df6eb7d3e}\index{driving\_loop.h@{driving\_loop.h}!MC\_RPM@{MC\_RPM}}
\index{MC\_RPM@{MC\_RPM}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{MC\_RPM}{MC\_RPM}}
{\footnotesize\ttfamily \label{driving__loop_8h_abd1701d9bbc137696fe99b6df6eb7d3e} 
typedef uint16\+\_\+t \mbox{\hyperlink{driving__loop_8h_abd1701d9bbc137696fe99b6df6eb7d3e}{MC\+\_\+\+RPM}}}



Definition at line \mbox{\hyperlink{driving__loop_8h_source_l00015}{15}} of file \mbox{\hyperlink{driving__loop_8h_source}{driving\+\_\+loop.\+h}}.

\Hypertarget{driving__loop_8h_a5ec2330fa2301c68498a6ff0825998c9}\index{driving\_loop.h@{driving\_loop.h}!MC\_Torque@{MC\_Torque}}
\index{MC\_Torque@{MC\_Torque}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{MC\_Torque}{MC\_Torque}}
{\footnotesize\ttfamily \label{driving__loop_8h_a5ec2330fa2301c68498a6ff0825998c9} 
typedef uint16\+\_\+t \mbox{\hyperlink{driving__loop_8h_a5ec2330fa2301c68498a6ff0825998c9}{MC\+\_\+\+Torque}}}



Definition at line \mbox{\hyperlink{driving__loop_8h_source_l00014}{14}} of file \mbox{\hyperlink{driving__loop_8h_source}{driving\+\_\+loop.\+h}}.

\Hypertarget{driving__loop_8h_a32f012927e4624d674120b51cb6ee8c0}\index{driving\_loop.h@{driving\_loop.h}!s\_curve\_torque\_map\_args@{s\_curve\_torque\_map\_args}}
\index{s\_curve\_torque\_map\_args@{s\_curve\_torque\_map\_args}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{s\_curve\_torque\_map\_args}{s\_curve\_torque\_map\_args}}
{\footnotesize\ttfamily \label{driving__loop_8h_a32f012927e4624d674120b51cb6ee8c0} 
typedef struct s\+\_\+curve\+\_\+torque\+\_\+map\+\_\+args s\+\_\+curve\+\_\+torque\+\_\+map\+\_\+args}



struct for s-\/curve parameters for torque 



\doxysubsection{Enumeration Type Documentation}
\Hypertarget{driving__loop_8h_adef4571b048b5b1f2b712713741296c7}\index{driving\_loop.h@{driving\_loop.h}!DL\_internal\_state@{DL\_internal\_state}}
\index{DL\_internal\_state@{DL\_internal\_state}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{DL\_internal\_state}{DL\_internal\_state}}
{\footnotesize\ttfamily \label{driving__loop_8h_adef4571b048b5b1f2b712713741296c7} 
enum \mbox{\hyperlink{driving__loop_8h_adef4571b048b5b1f2b712713741296c7}{DL\+\_\+internal\+\_\+state}}}

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Plausible@{Plausible}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!Plausible@{Plausible}}}\Hypertarget{driving__loop_8h_adef4571b048b5b1f2b712713741296c7a51000915ad3f7b4a5874322723d879ca}\label{driving__loop_8h_adef4571b048b5b1f2b712713741296c7} 
Plausible&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Implausible@{Implausible}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!Implausible@{Implausible}}}\Hypertarget{driving__loop_8h_adef4571b048b5b1f2b712713741296c7a6425b90f597e6400cfb9422ec518334f}\label{driving__loop_8h_adef4571b048b5b1f2b712713741296c7} 
Implausible&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Erroneous@{Erroneous}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!Erroneous@{Erroneous}}}\Hypertarget{driving__loop_8h_adef4571b048b5b1f2b712713741296c7abb3086179f14a3715ce589bd10c3ec98}\label{driving__loop_8h_adef4571b048b5b1f2b712713741296c7} 
Erroneous&\\
\hline

\end{DoxyEnumFields}


Definition at line \mbox{\hyperlink{driving__loop_8h_source_l00042}{42}} of file \mbox{\hyperlink{driving__loop_8h_source}{driving\+\_\+loop.\+h}}.

\Hypertarget{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800}\index{driving\_loop.h@{driving\_loop.h}!map\_mode@{map\_mode}}
\index{map\_mode@{map\_mode}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{map\_mode}{map\_mode}}
{\footnotesize\ttfamily \label{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800} 
enum \mbox{\hyperlink{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800}{map\+\_\+mode}}}



DL\+\_\+\+PERIOD is meant to represent how often the driving loop executes, in ms. 

This is a define since I would eventually like this to be configurable via a global variable, or possible be dynamic in the future.

Just replace the number with the name of the variable, and you\textquotesingle{}re all set.

enum meant to represent the different types of pedal map

This enum is meant to represent different functions that map the torque to speed. \begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{linear\_speed\_map@{linear\_speed\_map}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!linear\_speed\_map@{linear\_speed\_map}}}\Hypertarget{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a24491cb716ed427ea52ef6cdbf415b52}\label{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800} 
linear\+\_\+speed\+\_\+map&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{s\_curve\_speed\_map@{s\_curve\_speed\_map}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!s\_curve\_speed\_map@{s\_curve\_speed\_map}}}\Hypertarget{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a20916d6e654ff6402aa120d8710a81a0}\label{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800} 
s\+\_\+curve\+\_\+speed\+\_\+map&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{exp\_speed\_map@{exp\_speed\_map}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!exp\_speed\_map@{exp\_speed\_map}}}\Hypertarget{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a260f2e914699db0b53b3cb852559b40f}\label{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800} 
exp\+\_\+speed\+\_\+map&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{linear\_torque\_map@{linear\_torque\_map}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!linear\_torque\_map@{linear\_torque\_map}}}\Hypertarget{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a02e428d0c5cf187b04a2e9825079d26a}\label{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800} 
linear\+\_\+torque\+\_\+map&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{s\_curve\_torque\_map@{s\_curve\_torque\_map}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!s\_curve\_torque\_map@{s\_curve\_torque\_map}}}\Hypertarget{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a97cb36a9ac4fbbe2e7b481a2677993f9}\label{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800} 
s\+\_\+curve\+\_\+torque\+\_\+map&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{exp\_torque\_map@{exp\_torque\_map}!driving\_loop.h@{driving\_loop.h}}\index{driving\_loop.h@{driving\_loop.h}!exp\_torque\_map@{exp\_torque\_map}}}\Hypertarget{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800a22ffbb99cbb49917aac9c53aba81df32}\label{driving__loop_8h_a9d8fd287924cbb6baa4afd1c585da800} 
exp\+\_\+torque\+\_\+map&\\
\hline

\end{DoxyEnumFields}


Definition at line \mbox{\hyperlink{driving__loop_8h_source_l00033}{33}} of file \mbox{\hyperlink{driving__loop_8h_source}{driving\+\_\+loop.\+h}}.



\doxysubsection{Function Documentation}
\Hypertarget{driving__loop_8h_af580185fb5bb1cfba30ee1709d90628c}\index{driving\_loop.h@{driving\_loop.h}!initDrivingLoop@{initDrivingLoop}}
\index{initDrivingLoop@{initDrivingLoop}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{initDrivingLoop()}{initDrivingLoop()}}
{\footnotesize\ttfamily \label{driving__loop_8h_af580185fb5bb1cfba30ee1709d90628c} 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} init\+Driving\+Loop (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{argument}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00108}{108}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{uvfr__state__engine_8h_source_l00258}{uv\+\_\+task\+\_\+info\+::active\+\_\+states}}, \mbox{\hyperlink{main_8c_source_l00067}{adc1\+\_\+\+APPS1}}, \mbox{\hyperlink{main_8c_source_l00068}{adc1\+\_\+\+APPS2}}, \mbox{\hyperlink{main_8c_source_l00069}{adc1\+\_\+\+BPS1}}, \mbox{\hyperlink{main_8c_source_l00070}{adc1\+\_\+\+BPS2}}, \mbox{\hyperlink{daq_8h_source_l00055}{APPS1\+\_\+\+ADC\+\_\+\+VAL}}, \mbox{\hyperlink{daq_8h_source_l00056}{APPS2\+\_\+\+ADC\+\_\+\+VAL}}, \mbox{\hyperlink{daq_8c_source_l00087}{associate\+Daq\+Param\+With\+Var()}}, \mbox{\hyperlink{daq_8h_source_l00057}{BPS1\+\_\+\+ADC\+\_\+\+VAL}}, \mbox{\hyperlink{daq_8h_source_l00058}{BPS2\+\_\+\+ADC\+\_\+\+VAL}}, \mbox{\hyperlink{uvfr__settings_8c_source_l00025}{current\+\_\+vehicle\+\_\+settings}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00259}{uv\+\_\+task\+\_\+info\+::deletion\+\_\+states}}, \mbox{\hyperlink{driving__loop_8c_source_l00031}{driving\+\_\+args}}, \mbox{\hyperlink{uvfr__settings_8h_source_l00158}{uv\+\_\+vehicle\+\_\+settings\+::driving\+\_\+loop\+\_\+settings}}, \mbox{\hyperlink{cmsis__os_8h_source_l00179}{os\+Priority\+High}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00091}{PROGRAMMING}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00238}{uv\+\_\+task\+\_\+info\+::stack\+\_\+size}}, \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00260}{uv\+\_\+task\+\_\+info\+::suspension\+\_\+states}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00250}{uv\+\_\+task\+\_\+info\+::task\+\_\+args}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00234}{uv\+\_\+task\+\_\+info\+::task\+\_\+function}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00229}{uv\+\_\+task\+\_\+info\+::task\+\_\+name}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00231}{uv\+\_\+task\+\_\+info\+::task\+\_\+period}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00235}{uv\+\_\+task\+\_\+info\+::task\+\_\+priority}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00092}{UV\+\_\+\+DRIVING}}, \mbox{\hyperlink{uvfr__utils_8h_source_l00176}{UV\+\_\+\+ERROR}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00095}{UV\+\_\+\+ERROR\+\_\+\+STATE}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00089}{UV\+\_\+\+INIT}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00094}{UV\+\_\+\+LAUNCH\+\_\+\+CONTROL}}, \mbox{\hyperlink{uvfr__utils_8h_source_l00174}{UV\+\_\+\+OK}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00090}{UV\+\_\+\+READY}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00093}{UV\+\_\+\+SUSPENDED}}, and \mbox{\hyperlink{uvfr__state__engine_8c_source_l00285}{uv\+Create\+Task()}}.



Referenced by \mbox{\hyperlink{uvfr__state__engine_8c_source_l00168}{uv\+Init\+State\+Engine()}}.

\Hypertarget{driving__loop_8h_a80cc48f06202edc29bcad26a956bcc98}\index{driving\_loop.h@{driving\_loop.h}!StartDrivingLoop@{StartDrivingLoop}}
\index{StartDrivingLoop@{StartDrivingLoop}!driving\_loop.h@{driving\_loop.h}}
\doxysubsubsection{\texorpdfstring{StartDrivingLoop()}{StartDrivingLoop()}}
{\footnotesize\ttfamily \label{driving__loop_8h_a80cc48f06202edc29bcad26a956bcc98} 
void Start\+Driving\+Loop (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{argument}{}\end{DoxyParamCaption})}



Sends the filtered torque value to the motor controller. 

Rachan 


\begin{DoxyParams}{Parameters}
{\em T\+\_\+filtered} & Final torque value after filtering. \\
\hline
\end{DoxyParams}
This line extracts the specific driving loop parameters as specified in the vehicle settings 
\begin{DoxyCode}{0}
\DoxyCodeLine{\ */}
\DoxyCodeLine{\mbox{\hyperlink{structdriving__loop__args}{driving\_loop\_args}}*\ dl\_params\ =\ \mbox{\hyperlink{uvfr__settings_8h_a03566822d1b8893362970a459bd67daf}{current\_vehicle\_settings}}-\/>\mbox{\hyperlink{structuv__vehicle__settings_a7a5207ef389290242764f49c6c48a5ad}{driving\_loop\_settings}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//Timeout\ values}}
\DoxyCodeLine{\textcolor{comment}{//static\ TickType\_t\ last\_input\_change\_time\ =\ 0;}}
\DoxyCodeLine{\textcolor{comment}{//static\ float\ last\_throttle\_percent\ =\ 0.0f;}}
\DoxyCodeLine{\textcolor{comment}{//static\ float\ last\_brake\_percent\ =\ 0.0f;}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}}\ tick\_period\ =\ \mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(params-\/>task\_period);\ \textcolor{comment}{//Convert\ ms\ of\ period\ to\ the\ RTOS\ ticks}}
\DoxyCodeLine{\mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}}\ last\_time\ =\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}();}
\DoxyCodeLine{\mbox{\hyperlink{driving__loop_8c_a80a40a6a77773c08f900289e4605f4a8}{last\_input\_change\_time}}\ =\ last\_time;}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/**}}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00254}{254}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{main_8c_source_l00067}{adc1\+\_\+\+APPS1}}, \mbox{\hyperlink{main_8c_source_l00068}{adc1\+\_\+\+APPS2}}, \mbox{\hyperlink{main_8c_source_l00069}{adc1\+\_\+\+BPS1}}, \mbox{\hyperlink{main_8c_source_l00070}{adc1\+\_\+\+BPS2}}, \mbox{\hyperlink{driving__loop_8c_source_l00222}{apply\+Torque\+Filter()}}, \mbox{\hyperlink{driving__loop_8c_source_l00045}{BRAKE\+\_\+\+CHANGE\+\_\+\+THRESHOLD}}, \mbox{\hyperlink{driving__loop_8c_source_l00203}{calculate\+Brake\+Percentage()}}, \mbox{\hyperlink{driving__loop_8c_source_l00174}{calculate\+Throttle\+Percentage()}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00248}{uv\+\_\+task\+\_\+info\+::cmd\+\_\+data}}, \mbox{\hyperlink{uvfr__settings_8c_source_l00025}{current\+\_\+vehicle\+\_\+settings}}, \mbox{\hyperlink{uvfr__settings_8h_source_l00158}{uv\+\_\+vehicle\+\_\+settings\+::driving\+\_\+loop\+\_\+settings}}, \mbox{\hyperlink{driving__loop_8c_source_l00043}{INPUT\+\_\+\+TIMEOUT\+\_\+\+MS}}, \mbox{\hyperlink{driving__loop_8c_source_l00033}{is\+\_\+accelerating}}, \mbox{\hyperlink{uvfr__state__engine_8c_source_l00724}{kill\+Self()}}, \mbox{\hyperlink{driving__loop_8c_source_l00050}{last\+\_\+brake\+\_\+percent}}, \mbox{\hyperlink{motor__controller_8c_source_l00024}{last\+\_\+driver\+\_\+input\+\_\+time}}, \mbox{\hyperlink{driving__loop_8c_source_l00048}{last\+\_\+input\+\_\+change\+\_\+time}}, \mbox{\hyperlink{driving__loop_8c_source_l00049}{last\+\_\+throttle\+\_\+percent}}, \mbox{\hyperlink{driving__loop_8c_source_l00142}{map\+Throttle\+To\+Torque()}}, \mbox{\hyperlink{projdefs_8h_source_l00041}{pd\+MS\+\_\+\+TO\+\_\+\+TICKS}}, \mbox{\hyperlink{driving__loop_8c_source_l00432}{perform\+Safety\+Checks()}}, \mbox{\hyperlink{driving__loop_8h_source_l00043}{Plausible}}, \mbox{\hyperlink{motor__controller_8c_source_l00069}{send\+Torque\+To\+Motor\+Controller()}}, \mbox{\hyperlink{driving__loop_8c_source_l00054}{sent\+\_\+zero\+\_\+torque}}, \mbox{\hyperlink{uvfr__state__engine_8c_source_l00765}{suspend\+Self()}}, \mbox{\hyperlink{driving__loop_8c_source_l00034}{T\+\_\+\+PREV}}, \mbox{\hyperlink{driving__loop_8c_source_l00035}{T\+\_\+\+REQ}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00231}{uv\+\_\+task\+\_\+info\+::task\+\_\+period}}, \mbox{\hyperlink{driving__loop_8c_source_l00044}{THROTTLE\+\_\+\+CHANGE\+\_\+\+THRESHOLD}}, \mbox{\hyperlink{driving__loop_8c_source_l00037}{torque\+\_\+inhibit\+\_\+active}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00092}{UV\+\_\+\+DRIVING}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00105}{UV\+\_\+\+KILL\+\_\+\+CMD}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00106}{UV\+\_\+\+SUSPEND\+\_\+\+CMD}}, \mbox{\hyperlink{uvfr__state__engine_8c_source_l00038}{vehicle\+\_\+state}}, \mbox{\hyperlink{task_8h_a067da3e949e248096ec6c01f9cb75a47}{v\+Task\+Delay\+Until()}}, and \mbox{\hyperlink{tasks_8c_source_l02303}{x\+Task\+Get\+Tick\+Count()}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00108}{init\+Driving\+Loop()}}.

