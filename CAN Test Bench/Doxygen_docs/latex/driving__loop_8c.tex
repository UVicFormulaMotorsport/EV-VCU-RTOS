\doxysection{Core/\+Src/driving\+\_\+loop.c File Reference}
\hypertarget{driving__loop_8c}{}\label{driving__loop_8c}\index{Core/Src/driving\_loop.c@{Core/Src/driving\_loop.c}}


File containing the meat and potatoes driving loop thread, and all supporting functions.  


{\ttfamily \#include "{}main.\+h"{}}\newline
{\ttfamily \#include "{}uvfr\+\_\+utils.\+h"{}}\newline
{\ttfamily \#include "{}can.\+h"{}}\newline
{\ttfamily \#include "{}motor\+\_\+controller.\+h"{}}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include "{}driving\+\_\+loop.\+h"{}}\newline
{\ttfamily \#include "{}../\+Free\+RTOS/\+Source/\+CMSIS\+\_\+\+RTOS/cmsis\+\_\+os.\+h"{}}\newline
{\ttfamily \#include "{}../\+Free\+RTOS/\+Source/include/\+Free\+RTOS.\+h"{}}\newline
{\ttfamily \#include "{}../\+Free\+RTOS/\+Source/include/task.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{driving__loop_8c_aeac6e5795cef1c6971bde245d54de5d5}{INPUT\+\_\+\+TIMEOUT\+\_\+\+MS}}~500
\item 
\#define \mbox{\hyperlink{driving__loop_8c_ade8c2b92f80dab9f21a39ad68f8d6e0a}{THROTTLE\+\_\+\+CHANGE\+\_\+\+THRESHOLD}}~5
\item 
\#define \mbox{\hyperlink{driving__loop_8c_a4bf993c3531318a98fc092ffde90602f}{BRAKE\+\_\+\+CHANGE\+\_\+\+THRESHOLD}}~5
\item 
\#define \mbox{\hyperlink{driving__loop_8c_abdb111971b9caeabf750f90e1ae5756c}{TORQUE\+\_\+\+DECAY\+\_\+\+STEP}}~2.\+5f
\item 
\#define \mbox{\hyperlink{driving__loop_8c_a633cd4f78d82907f7cc81cd051b6bf4c}{THROTTLE\+\_\+\+ZERO\+\_\+\+THRESHOLD}}~0.\+01f
\item 
\#define \mbox{\hyperlink{driving__loop_8c_a3fa2d9e8a3ff5bc7ac576fda26265b44}{ACCELERATION}}~0
\item 
\#define \mbox{\hyperlink{driving__loop_8c_a7c627c95d1731c3c24a41b8aa86a5fd5}{AUTOCROSS}}~1
\item 
\#define \mbox{\hyperlink{driving__loop_8c_a64a87e1f80735e94aac871db572dda97}{ENDURANCE}}~2
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
float \mbox{\hyperlink{driving__loop_8c_ad5227d6e3a1f9c241f31f07abe9f1695}{calculate\+Throttle\+Percentage}} (uint16\+\_\+t apps1, uint16\+\_\+t apps2)
\item 
float \mbox{\hyperlink{driving__loop_8c_a4f65fe44f806e3c040579c36f6134349}{calculate\+Brake\+Percentage}} (uint16\+\_\+t bps1)
\item 
\mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} \mbox{\hyperlink{driving__loop_8c_ac9c776513f26edd5cf75280eea26275b}{perform\+Safety\+Checks}} (\mbox{\hyperlink{structdriving__loop__args}{driving\+\_\+loop\+\_\+args}} \texorpdfstring{$\ast$}{*}dl\+\_\+params, uint16\+\_\+t apps1\+\_\+value, uint16\+\_\+t apps2\+\_\+value, uint16\+\_\+t bps1\+\_\+value, uint16\+\_\+t bps2\+\_\+value, enum \mbox{\hyperlink{driving__loop_8h_adef4571b048b5b1f2b712713741296c7}{DL\+\_\+internal\+\_\+state}} \texorpdfstring{$\ast$}{*}dl\+\_\+status)
\begin{DoxyCompactList}\small\item\em Performs safety checks on APPS (Throttle) and BPS (Brake) sensors. \end{DoxyCompactList}\item 
static float \mbox{\hyperlink{driving__loop_8c_abdfd52d179ac8c6707ea8e0ddb98b7cd}{get\+KValue}} (int race\+Mode)
\item 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} \mbox{\hyperlink{driving__loop_8c_af580185fb5bb1cfba30ee1709d90628c}{init\+Driving\+Loop}} (void \texorpdfstring{$\ast$}{*}argument)
\item 
static float \mbox{\hyperlink{driving__loop_8c_a14bdb2b38c226aa850a0c25207afd1fa}{map\+Throttle\+To\+Torque}} (float throttle\+\_\+percent)
\item 
static float \mbox{\hyperlink{driving__loop_8c_a42c4321a28da09906e185c9c5971fce9}{apply\+Torque\+Filter}} (float T\+\_\+req, float T\+\_\+prev, \mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} is\+\_\+accelearting)
\begin{DoxyCompactList}\small\item\em Applies filtering to smooth torque transitions. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{driving__loop_8c_a80cc48f06202edc29bcad26a956bcc98}{Start\+Driving\+Loop}} (void \texorpdfstring{$\ast$}{*}argument)
\begin{DoxyCompactList}\small\item\em Sends the filtered torque value to the motor controller. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \mbox{\hyperlink{driving__loop_8c_a549b3590f54dfc129d2eebf2604c16e8}{adc1\+\_\+\+APPS1}}
\item 
uint16\+\_\+t \mbox{\hyperlink{driving__loop_8c_a8567d6e2f5ad8bd53f71ecc2b2b0ae30}{adc1\+\_\+\+APPS2}}
\item 
uint16\+\_\+t \mbox{\hyperlink{driving__loop_8c_ad36d3aa4037203058df6816d56f4c186}{adc1\+\_\+\+BPS1}}
\item 
uint16\+\_\+t \mbox{\hyperlink{driving__loop_8c_a277f7921a7a1e0fb8a6f953943dc06dc}{adc1\+\_\+\+BPS2}}
\item 
\mbox{\hyperlink{structdriving__loop__args}{driving\+\_\+loop\+\_\+args}} \mbox{\hyperlink{driving__loop_8c_ab8788a0f246816c11002008cb43d1886}{default\+\_\+dl\+\_\+settings}}
\item 
\mbox{\hyperlink{structdriving__loop__args}{driving\+\_\+loop\+\_\+args}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{driving__loop_8c_a401dd8422f51d8d344e5ac9559ef8908}{driving\+\_\+args}} = NULL
\item 
\mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} \mbox{\hyperlink{driving__loop_8c_a15e200c9bf4f5d49b02215e273d2d841}{is\+\_\+accelerating}} = \mbox{\hyperlink{group__utility__macros_ga65e9886d74aaee76545e83dd09011727}{false}}
\item 
float \mbox{\hyperlink{driving__loop_8c_afb126e9ab9acbc2c02585ce5728a538a}{T\+\_\+\+PREV}} = 0
\item 
float \mbox{\hyperlink{driving__loop_8c_a8096732d061a4d6d6a9b78780025f056}{T\+\_\+\+REQ}} = 0
\item 
static \mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} \mbox{\hyperlink{driving__loop_8c_a0131bf37bd5fbfaefac74ca3e6fdd661}{torque\+\_\+inhibit\+\_\+active}} = \mbox{\hyperlink{group__utility__macros_ga65e9886d74aaee76545e83dd09011727}{false}}
\item 
static \mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t}} \mbox{\hyperlink{driving__loop_8c_a80a40a6a77773c08f900289e4605f4a8}{last\+\_\+input\+\_\+change\+\_\+time}} = 0
\item 
static float \mbox{\hyperlink{driving__loop_8c_aaa0cf1ce25f6295e6f5bc62ff3e5fd34}{last\+\_\+throttle\+\_\+percent}} = 0.\+0f
\item 
static float \mbox{\hyperlink{driving__loop_8c_acebecb0a23929da61d8512ddded82450}{last\+\_\+brake\+\_\+percent}} = 0.\+0f
\item 
static \mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} \mbox{\hyperlink{driving__loop_8c_aa5e709aa0b6ce54eee6f0396eedc37df}{sent\+\_\+zero\+\_\+torque}} = \mbox{\hyperlink{group__utility__macros_ga65e9886d74aaee76545e83dd09011727}{false}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
File containing the meat and potatoes driving loop thread, and all supporting functions. 



Definition in file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



\doxysubsection{Macro Definition Documentation}
\Hypertarget{driving__loop_8c_a3fa2d9e8a3ff5bc7ac576fda26265b44}\index{driving\_loop.c@{driving\_loop.c}!ACCELERATION@{ACCELERATION}}
\index{ACCELERATION@{ACCELERATION}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{ACCELERATION}{ACCELERATION}}
{\footnotesize\ttfamily \label{driving__loop_8c_a3fa2d9e8a3ff5bc7ac576fda26265b44} 
\#define ACCELERATION~0}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00156}{156}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00161}{get\+KValue()}}.

\Hypertarget{driving__loop_8c_a7c627c95d1731c3c24a41b8aa86a5fd5}\index{driving\_loop.c@{driving\_loop.c}!AUTOCROSS@{AUTOCROSS}}
\index{AUTOCROSS@{AUTOCROSS}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{AUTOCROSS}{AUTOCROSS}}
{\footnotesize\ttfamily \label{driving__loop_8c_a7c627c95d1731c3c24a41b8aa86a5fd5} 
\#define AUTOCROSS~1}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00157}{157}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00161}{get\+KValue()}}.

\Hypertarget{driving__loop_8c_a4bf993c3531318a98fc092ffde90602f}\index{driving\_loop.c@{driving\_loop.c}!BRAKE\_CHANGE\_THRESHOLD@{BRAKE\_CHANGE\_THRESHOLD}}
\index{BRAKE\_CHANGE\_THRESHOLD@{BRAKE\_CHANGE\_THRESHOLD}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{BRAKE\_CHANGE\_THRESHOLD}{BRAKE\_CHANGE\_THRESHOLD}}
{\footnotesize\ttfamily \label{driving__loop_8c_a4bf993c3531318a98fc092ffde90602f} 
\#define BRAKE\+\_\+\+CHANGE\+\_\+\+THRESHOLD~5}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00045}{45}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a64a87e1f80735e94aac871db572dda97}\index{driving\_loop.c@{driving\_loop.c}!ENDURANCE@{ENDURANCE}}
\index{ENDURANCE@{ENDURANCE}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{ENDURANCE}{ENDURANCE}}
{\footnotesize\ttfamily \label{driving__loop_8c_a64a87e1f80735e94aac871db572dda97} 
\#define ENDURANCE~2}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00158}{158}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00161}{get\+KValue()}}.

\Hypertarget{driving__loop_8c_aeac6e5795cef1c6971bde245d54de5d5}\index{driving\_loop.c@{driving\_loop.c}!INPUT\_TIMEOUT\_MS@{INPUT\_TIMEOUT\_MS}}
\index{INPUT\_TIMEOUT\_MS@{INPUT\_TIMEOUT\_MS}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{INPUT\_TIMEOUT\_MS}{INPUT\_TIMEOUT\_MS}}
{\footnotesize\ttfamily \label{driving__loop_8c_aeac6e5795cef1c6971bde245d54de5d5} 
\#define INPUT\+\_\+\+TIMEOUT\+\_\+\+MS~500}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00043}{43}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_ade8c2b92f80dab9f21a39ad68f8d6e0a}\index{driving\_loop.c@{driving\_loop.c}!THROTTLE\_CHANGE\_THRESHOLD@{THROTTLE\_CHANGE\_THRESHOLD}}
\index{THROTTLE\_CHANGE\_THRESHOLD@{THROTTLE\_CHANGE\_THRESHOLD}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{THROTTLE\_CHANGE\_THRESHOLD}{THROTTLE\_CHANGE\_THRESHOLD}}
{\footnotesize\ttfamily \label{driving__loop_8c_ade8c2b92f80dab9f21a39ad68f8d6e0a} 
\#define THROTTLE\+\_\+\+CHANGE\+\_\+\+THRESHOLD~5}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00044}{44}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a633cd4f78d82907f7cc81cd051b6bf4c}\index{driving\_loop.c@{driving\_loop.c}!THROTTLE\_ZERO\_THRESHOLD@{THROTTLE\_ZERO\_THRESHOLD}}
\index{THROTTLE\_ZERO\_THRESHOLD@{THROTTLE\_ZERO\_THRESHOLD}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{THROTTLE\_ZERO\_THRESHOLD}{THROTTLE\_ZERO\_THRESHOLD}}
{\footnotesize\ttfamily \label{driving__loop_8c_a633cd4f78d82907f7cc81cd051b6bf4c} 
\#define THROTTLE\+\_\+\+ZERO\+\_\+\+THRESHOLD~0.\+01f}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00053}{53}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.

\Hypertarget{driving__loop_8c_abdb111971b9caeabf750f90e1ae5756c}\index{driving\_loop.c@{driving\_loop.c}!TORQUE\_DECAY\_STEP@{TORQUE\_DECAY\_STEP}}
\index{TORQUE\_DECAY\_STEP@{TORQUE\_DECAY\_STEP}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{TORQUE\_DECAY\_STEP}{TORQUE\_DECAY\_STEP}}
{\footnotesize\ttfamily \label{driving__loop_8c_abdb111971b9caeabf750f90e1ae5756c} 
\#define TORQUE\+\_\+\+DECAY\+\_\+\+STEP~2.\+5f}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00052}{52}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{driving__loop_8c_a42c4321a28da09906e185c9c5971fce9}\index{driving\_loop.c@{driving\_loop.c}!applyTorqueFilter@{applyTorqueFilter}}
\index{applyTorqueFilter@{applyTorqueFilter}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{applyTorqueFilter()}{applyTorqueFilter()}}
{\footnotesize\ttfamily \label{driving__loop_8c_a42c4321a28da09906e185c9c5971fce9} 
static float apply\+Torque\+Filter (\begin{DoxyParamCaption}\item[{float}]{T\+\_\+req}{, }\item[{float}]{T\+\_\+prev}{, }\item[{\mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}}}]{is\+\_\+accelearting}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Applies filtering to smooth torque transitions. 


\begin{DoxyParams}{Parameters}
{\em T\+\_\+req} & Requested torque before filtering. \\
\hline
{\em T\+\_\+prev} & Previous filtered torque value.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Smoothed torque value. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00222}{222}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{driving__loop_8c_source_l00161}{get\+KValue()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00033}{is\+\_\+accelerating}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a4f65fe44f806e3c040579c36f6134349}\index{driving\_loop.c@{driving\_loop.c}!calculateBrakePercentage@{calculateBrakePercentage}}
\index{calculateBrakePercentage@{calculateBrakePercentage}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{calculateBrakePercentage()}{calculateBrakePercentage()}}
{\footnotesize\ttfamily \label{driving__loop_8c_a4f65fe44f806e3c040579c36f6134349} 
float calculate\+Brake\+Percentage (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{bps1}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00203}{203}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{driving__loop_8c_source_l00031}{driving\+\_\+args}}, \mbox{\hyperlink{driving__loop_8h_source_l00128}{driving\+\_\+loop\+\_\+args\+::max\+\_\+\+BPS\+\_\+value}}, and \mbox{\hyperlink{driving__loop_8h_source_l00127}{driving\+\_\+loop\+\_\+args\+::min\+\_\+\+BPS\+\_\+value}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00432}{perform\+Safety\+Checks()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_ad5227d6e3a1f9c241f31f07abe9f1695}\index{driving\_loop.c@{driving\_loop.c}!calculateThrottlePercentage@{calculateThrottlePercentage}}
\index{calculateThrottlePercentage@{calculateThrottlePercentage}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{calculateThrottlePercentage()}{calculateThrottlePercentage()}}
{\footnotesize\ttfamily \label{driving__loop_8c_ad5227d6e3a1f9c241f31f07abe9f1695} 
float calculate\+Throttle\+Percentage (\begin{DoxyParamCaption}\item[{uint16\+\_\+t}]{apps1}{, }\item[{uint16\+\_\+t}]{apps2}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00174}{174}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{driving__loop_8h_source_l00131}{driving\+\_\+loop\+\_\+args\+::apps1\+\_\+bottom}}, \mbox{\hyperlink{driving__loop_8h_source_l00130}{driving\+\_\+loop\+\_\+args\+::apps1\+\_\+top}}, and \mbox{\hyperlink{driving__loop_8c_source_l00031}{driving\+\_\+args}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00432}{perform\+Safety\+Checks()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_abdfd52d179ac8c6707ea8e0ddb98b7cd}\index{driving\_loop.c@{driving\_loop.c}!getKValue@{getKValue}}
\index{getKValue@{getKValue}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{getKValue()}{getKValue()}}
{\footnotesize\ttfamily \label{driving__loop_8c_abdfd52d179ac8c6707ea8e0ddb98b7cd} 
float get\+KValue (\begin{DoxyParamCaption}\item[{int}]{race\+Mode}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00161}{161}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{driving__loop_8c_source_l00156}{ACCELERATION}}, \mbox{\hyperlink{driving__loop_8c_source_l00157}{AUTOCROSS}}, and \mbox{\hyperlink{driving__loop_8c_source_l00158}{ENDURANCE}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00222}{apply\+Torque\+Filter()}}.

\Hypertarget{driving__loop_8c_af580185fb5bb1cfba30ee1709d90628c}\index{driving\_loop.c@{driving\_loop.c}!initDrivingLoop@{initDrivingLoop}}
\index{initDrivingLoop@{initDrivingLoop}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{initDrivingLoop()}{initDrivingLoop()}}
{\footnotesize\ttfamily \label{driving__loop_8c_af580185fb5bb1cfba30ee1709d90628c} 
enum \mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9e}{uv\+\_\+status\+\_\+t}} init\+Driving\+Loop (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{argument}{}\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00108}{108}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{uvfr__state__engine_8h_source_l00258}{uv\+\_\+task\+\_\+info\+::active\+\_\+states}}, \mbox{\hyperlink{main_8c_source_l00067}{adc1\+\_\+\+APPS1}}, \mbox{\hyperlink{main_8c_source_l00068}{adc1\+\_\+\+APPS2}}, \mbox{\hyperlink{main_8c_source_l00069}{adc1\+\_\+\+BPS1}}, \mbox{\hyperlink{main_8c_source_l00070}{adc1\+\_\+\+BPS2}}, \mbox{\hyperlink{daq_8h_source_l00055}{APPS1\+\_\+\+ADC\+\_\+\+VAL}}, \mbox{\hyperlink{daq_8h_source_l00056}{APPS2\+\_\+\+ADC\+\_\+\+VAL}}, \mbox{\hyperlink{daq_8c_source_l00087}{associate\+Daq\+Param\+With\+Var()}}, \mbox{\hyperlink{daq_8h_source_l00057}{BPS1\+\_\+\+ADC\+\_\+\+VAL}}, \mbox{\hyperlink{daq_8h_source_l00058}{BPS2\+\_\+\+ADC\+\_\+\+VAL}}, \mbox{\hyperlink{uvfr__settings_8c_source_l00025}{current\+\_\+vehicle\+\_\+settings}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00259}{uv\+\_\+task\+\_\+info\+::deletion\+\_\+states}}, \mbox{\hyperlink{driving__loop_8c_source_l00031}{driving\+\_\+args}}, \mbox{\hyperlink{uvfr__settings_8h_source_l00158}{uv\+\_\+vehicle\+\_\+settings\+::driving\+\_\+loop\+\_\+settings}}, \mbox{\hyperlink{cmsis__os_8h_source_l00179}{os\+Priority\+High}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00091}{PROGRAMMING}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00238}{uv\+\_\+task\+\_\+info\+::stack\+\_\+size}}, \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00260}{uv\+\_\+task\+\_\+info\+::suspension\+\_\+states}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00250}{uv\+\_\+task\+\_\+info\+::task\+\_\+args}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00234}{uv\+\_\+task\+\_\+info\+::task\+\_\+function}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00229}{uv\+\_\+task\+\_\+info\+::task\+\_\+name}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00231}{uv\+\_\+task\+\_\+info\+::task\+\_\+period}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00235}{uv\+\_\+task\+\_\+info\+::task\+\_\+priority}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00092}{UV\+\_\+\+DRIVING}}, \mbox{\hyperlink{uvfr__utils_8h_source_l00176}{UV\+\_\+\+ERROR}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00095}{UV\+\_\+\+ERROR\+\_\+\+STATE}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00089}{UV\+\_\+\+INIT}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00094}{UV\+\_\+\+LAUNCH\+\_\+\+CONTROL}}, \mbox{\hyperlink{uvfr__utils_8h_source_l00174}{UV\+\_\+\+OK}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00090}{UV\+\_\+\+READY}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00093}{UV\+\_\+\+SUSPENDED}}, and \mbox{\hyperlink{uvfr__state__engine_8c_source_l00285}{uv\+Create\+Task()}}.



Referenced by \mbox{\hyperlink{uvfr__state__engine_8c_source_l00168}{uv\+Init\+State\+Engine()}}.

\Hypertarget{driving__loop_8c_a14bdb2b38c226aa850a0c25207afd1fa}\index{driving\_loop.c@{driving\_loop.c}!mapThrottleToTorque@{mapThrottleToTorque}}
\index{mapThrottleToTorque@{mapThrottleToTorque}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{mapThrottleToTorque()}{mapThrottleToTorque()}}
{\footnotesize\ttfamily \label{driving__loop_8c_a14bdb2b38c226aa850a0c25207afd1fa} 
static float map\+Throttle\+To\+Torque (\begin{DoxyParamCaption}\item[{float}]{throttle\+\_\+percent}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00142}{142}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{driving__loop_8h_source_l00110}{driving\+\_\+loop\+\_\+args\+::absolute\+\_\+max\+\_\+motor\+\_\+torque}}, and \mbox{\hyperlink{driving__loop_8c_source_l00031}{driving\+\_\+args}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_ac9c776513f26edd5cf75280eea26275b}\index{driving\_loop.c@{driving\_loop.c}!performSafetyChecks@{performSafetyChecks}}
\index{performSafetyChecks@{performSafetyChecks}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{performSafetyChecks()}{performSafetyChecks()}}
{\footnotesize\ttfamily \label{driving__loop_8c_ac9c776513f26edd5cf75280eea26275b} 
\mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} perform\+Safety\+Checks (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structdriving__loop__args}{driving\+\_\+loop\+\_\+args}} \texorpdfstring{$\ast$}{*}}]{dl\+\_\+params}{, }\item[{uint16\+\_\+t}]{apps1\+\_\+value}{, }\item[{uint16\+\_\+t}]{apps2\+\_\+value}{, }\item[{uint16\+\_\+t}]{bps1\+\_\+value}{, }\item[{uint16\+\_\+t}]{bps2\+\_\+value}{, }\item[{enum \mbox{\hyperlink{driving__loop_8h_adef4571b048b5b1f2b712713741296c7}{DL\+\_\+internal\+\_\+state}} \texorpdfstring{$\ast$}{*}}]{dl\+\_\+status}{}\end{DoxyParamCaption})}



Performs safety checks on APPS (Throttle) and BPS (Brake) sensors. 

This function ensures that\+:
\begin{DoxyItemize}
\item Throttle position sensors (APPS1 \& APPS2) are within 10\% of each other.
\item Brake pressure sensors (BPS1 \& BPS2) are within 5\% of each other.
\item Sensors are within their expected min/max ranges.
\item Brake and throttle are not pressed at the same time.
\end{DoxyItemize}

If a {\bfseries{fatal error}} is detected (e.\+g., sensor out of range), the function\+:
\begin{DoxyItemize}
\item {\bfseries{Stops the motor}}.
\item {\bfseries{Kills the task execution}} ({\ttfamily \doxylink{group__state__engine__backend_ga5f35b34432afed7f18f91fb8607f096f}{kill\+Self()}}).
\end{DoxyItemize}

If a {\bfseries{non-\/fatal error}} occurs (e.\+g., sensor mismatch exceeding the limit)\+:
\begin{DoxyItemize}
\item {\bfseries{Stops the motor}}.
\item {\bfseries{Suspends the task temporarily}} ({\ttfamily \doxylink{group__state__engine__backend_gad6117850b55ad52be51d93915bcc313c}{suspend\+Self()}}).
\end{DoxyItemize}

If safety conditions return to normal, the function\+:
\begin{DoxyItemize}
\item {\bfseries{Restarts the motor}}.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em dl\+\_\+params} & Pointer to the driving loop parameters. \\
\hline
{\em apps1\+\_\+value} & Raw sensor reading from APPS1. \\
\hline
{\em apps2\+\_\+value} & Raw sensor reading from APPS2. \\
\hline
{\em bps1\+\_\+value} & Raw sensor reading from BPS1. \\
\hline
{\em bps2\+\_\+value} & Raw sensor reading from BPS2. \\
\hline
{\em params} & Pointer to the current task information. \\
\hline
{\em dl\+\_\+status} & Pointer to the driving loop internal state.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em true} & All safety checks passed. \\
\hline
{\em false} & One or more safety checks failed. \\
\hline
\end{DoxyRetVals}


Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00432}{432}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{driving__loop_8h_source_l00123}{driving\+\_\+loop\+\_\+args\+::apps1\+\_\+abs\+\_\+max\+\_\+val}}, \mbox{\hyperlink{driving__loop_8h_source_l00131}{driving\+\_\+loop\+\_\+args\+::apps1\+\_\+bottom}}, \mbox{\hyperlink{driving__loop_8h_source_l00130}{driving\+\_\+loop\+\_\+args\+::apps1\+\_\+top}}, \mbox{\hyperlink{driving__loop_8h_source_l00126}{driving\+\_\+loop\+\_\+args\+::apps2\+\_\+abs\+\_\+max\+\_\+val}}, \mbox{\hyperlink{driving__loop_8h_source_l00134}{driving\+\_\+loop\+\_\+args\+::apps2\+\_\+bottom}}, \mbox{\hyperlink{driving__loop_8h_source_l00133}{driving\+\_\+loop\+\_\+args\+::apps2\+\_\+top}}, \mbox{\hyperlink{driving__loop_8h_source_l00136}{driving\+\_\+loop\+\_\+args\+::apps\+\_\+plausibility\+\_\+check\+\_\+threshold}}, \mbox{\hyperlink{driving__loop_8c_source_l00203}{calculate\+Brake\+Percentage()}}, \mbox{\hyperlink{driving__loop_8c_source_l00174}{calculate\+Throttle\+Percentage()}}, \mbox{\hyperlink{driving__loop_8h_source_l00128}{driving\+\_\+loop\+\_\+args\+::max\+\_\+\+BPS\+\_\+value}}, \mbox{\hyperlink{motor__controller_8c_source_l00548}{MC\+\_\+\+Shutdown()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00037}{torque\+\_\+inhibit\+\_\+active}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a80cc48f06202edc29bcad26a956bcc98}\index{driving\_loop.c@{driving\_loop.c}!StartDrivingLoop@{StartDrivingLoop}}
\index{StartDrivingLoop@{StartDrivingLoop}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{StartDrivingLoop()}{StartDrivingLoop()}}
{\footnotesize\ttfamily \label{driving__loop_8c_a80cc48f06202edc29bcad26a956bcc98} 
void Start\+Driving\+Loop (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{argument}{}\end{DoxyParamCaption})}



Sends the filtered torque value to the motor controller. 

Rachan 


\begin{DoxyParams}{Parameters}
{\em T\+\_\+filtered} & Final torque value after filtering. \\
\hline
\end{DoxyParams}
This line extracts the specific driving loop parameters as specified in the vehicle settings 
\begin{DoxyCode}{0}
\DoxyCodeLine{\ */}
\DoxyCodeLine{\mbox{\hyperlink{structdriving__loop__args}{driving\_loop\_args}}*\ dl\_params\ =\ \mbox{\hyperlink{uvfr__settings_8h_a03566822d1b8893362970a459bd67daf}{current\_vehicle\_settings}}-\/>\mbox{\hyperlink{structuv__vehicle__settings_a7a5207ef389290242764f49c6c48a5ad}{driving\_loop\_settings}};}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{//Timeout\ values}}
\DoxyCodeLine{\textcolor{comment}{//static\ TickType\_t\ last\_input\_change\_time\ =\ 0;}}
\DoxyCodeLine{\textcolor{comment}{//static\ float\ last\_throttle\_percent\ =\ 0.0f;}}
\DoxyCodeLine{\textcolor{comment}{//static\ float\ last\_brake\_percent\ =\ 0.0f;}}
\DoxyCodeLine{}
\DoxyCodeLine{\mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}}\ tick\_period\ =\ \mbox{\hyperlink{projdefs_8h_a353d0f62b82a402cb3db63706c81ec3f}{pdMS\_TO\_TICKS}}(params-\/>task\_period);\ \textcolor{comment}{//Convert\ ms\ of\ period\ to\ the\ RTOS\ ticks}}
\DoxyCodeLine{\mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t}}\ last\_time\ =\ \mbox{\hyperlink{task_8h_a753ecfe23e7386066ecccad5d16422f7}{xTaskGetTickCount}}();}
\DoxyCodeLine{\mbox{\hyperlink{driving__loop_8c_a80a40a6a77773c08f900289e4605f4a8}{last\_input\_change\_time}}\ =\ last\_time;}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{comment}{/**}}

\end{DoxyCode}


Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00254}{254}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



References \mbox{\hyperlink{main_8c_source_l00067}{adc1\+\_\+\+APPS1}}, \mbox{\hyperlink{main_8c_source_l00068}{adc1\+\_\+\+APPS2}}, \mbox{\hyperlink{main_8c_source_l00069}{adc1\+\_\+\+BPS1}}, \mbox{\hyperlink{main_8c_source_l00070}{adc1\+\_\+\+BPS2}}, \mbox{\hyperlink{driving__loop_8c_source_l00222}{apply\+Torque\+Filter()}}, \mbox{\hyperlink{driving__loop_8c_source_l00045}{BRAKE\+\_\+\+CHANGE\+\_\+\+THRESHOLD}}, \mbox{\hyperlink{driving__loop_8c_source_l00203}{calculate\+Brake\+Percentage()}}, \mbox{\hyperlink{driving__loop_8c_source_l00174}{calculate\+Throttle\+Percentage()}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00248}{uv\+\_\+task\+\_\+info\+::cmd\+\_\+data}}, \mbox{\hyperlink{uvfr__settings_8c_source_l00025}{current\+\_\+vehicle\+\_\+settings}}, \mbox{\hyperlink{uvfr__settings_8h_source_l00158}{uv\+\_\+vehicle\+\_\+settings\+::driving\+\_\+loop\+\_\+settings}}, \mbox{\hyperlink{driving__loop_8c_source_l00043}{INPUT\+\_\+\+TIMEOUT\+\_\+\+MS}}, \mbox{\hyperlink{driving__loop_8c_source_l00033}{is\+\_\+accelerating}}, \mbox{\hyperlink{uvfr__state__engine_8c_source_l00724}{kill\+Self()}}, \mbox{\hyperlink{driving__loop_8c_source_l00050}{last\+\_\+brake\+\_\+percent}}, \mbox{\hyperlink{motor__controller_8c_source_l00024}{last\+\_\+driver\+\_\+input\+\_\+time}}, \mbox{\hyperlink{driving__loop_8c_source_l00048}{last\+\_\+input\+\_\+change\+\_\+time}}, \mbox{\hyperlink{driving__loop_8c_source_l00049}{last\+\_\+throttle\+\_\+percent}}, \mbox{\hyperlink{driving__loop_8c_source_l00142}{map\+Throttle\+To\+Torque()}}, \mbox{\hyperlink{projdefs_8h_source_l00041}{pd\+MS\+\_\+\+TO\+\_\+\+TICKS}}, \mbox{\hyperlink{driving__loop_8c_source_l00432}{perform\+Safety\+Checks()}}, \mbox{\hyperlink{driving__loop_8h_source_l00043}{Plausible}}, \mbox{\hyperlink{motor__controller_8c_source_l00069}{send\+Torque\+To\+Motor\+Controller()}}, \mbox{\hyperlink{driving__loop_8c_source_l00054}{sent\+\_\+zero\+\_\+torque}}, \mbox{\hyperlink{uvfr__state__engine_8c_source_l00765}{suspend\+Self()}}, \mbox{\hyperlink{driving__loop_8c_source_l00034}{T\+\_\+\+PREV}}, \mbox{\hyperlink{driving__loop_8c_source_l00035}{T\+\_\+\+REQ}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00231}{uv\+\_\+task\+\_\+info\+::task\+\_\+period}}, \mbox{\hyperlink{driving__loop_8c_source_l00044}{THROTTLE\+\_\+\+CHANGE\+\_\+\+THRESHOLD}}, \mbox{\hyperlink{driving__loop_8c_source_l00037}{torque\+\_\+inhibit\+\_\+active}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00092}{UV\+\_\+\+DRIVING}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00105}{UV\+\_\+\+KILL\+\_\+\+CMD}}, \mbox{\hyperlink{uvfr__state__engine_8h_source_l00106}{UV\+\_\+\+SUSPEND\+\_\+\+CMD}}, \mbox{\hyperlink{uvfr__state__engine_8c_source_l00038}{vehicle\+\_\+state}}, \mbox{\hyperlink{task_8h_a067da3e949e248096ec6c01f9cb75a47}{v\+Task\+Delay\+Until()}}, and \mbox{\hyperlink{tasks_8c_source_l02303}{x\+Task\+Get\+Tick\+Count()}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00108}{init\+Driving\+Loop()}}.



\doxysubsection{Variable Documentation}
\Hypertarget{driving__loop_8c_a549b3590f54dfc129d2eebf2604c16e8}\index{driving\_loop.c@{driving\_loop.c}!adc1\_APPS1@{adc1\_APPS1}}
\index{adc1\_APPS1@{adc1\_APPS1}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{adc1\_APPS1}{adc1\_APPS1}}
{\footnotesize\ttfamily \label{driving__loop_8c_a549b3590f54dfc129d2eebf2604c16e8} 
uint16\+\_\+t adc1\+\_\+\+APPS1\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{main_8c_source_l00067}{67}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.



Referenced by \mbox{\hyperlink{main_8c_source_l00317}{HAL\+\_\+\+ADC\+\_\+\+Level\+Out\+Of\+Window\+Callback()}}, \mbox{\hyperlink{driving__loop_8c_source_l00108}{init\+Driving\+Loop()}}, \mbox{\hyperlink{main_8c_source_l00111}{main()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a8567d6e2f5ad8bd53f71ecc2b2b0ae30}\index{driving\_loop.c@{driving\_loop.c}!adc1\_APPS2@{adc1\_APPS2}}
\index{adc1\_APPS2@{adc1\_APPS2}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{adc1\_APPS2}{adc1\_APPS2}}
{\footnotesize\ttfamily \label{driving__loop_8c_a8567d6e2f5ad8bd53f71ecc2b2b0ae30} 
uint16\+\_\+t adc1\+\_\+\+APPS2\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{main_8c_source_l00068}{68}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.



Referenced by \mbox{\hyperlink{main_8c_source_l00317}{HAL\+\_\+\+ADC\+\_\+\+Level\+Out\+Of\+Window\+Callback()}}, \mbox{\hyperlink{driving__loop_8c_source_l00108}{init\+Driving\+Loop()}}, \mbox{\hyperlink{main_8c_source_l00111}{main()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_ad36d3aa4037203058df6816d56f4c186}\index{driving\_loop.c@{driving\_loop.c}!adc1\_BPS1@{adc1\_BPS1}}
\index{adc1\_BPS1@{adc1\_BPS1}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{adc1\_BPS1}{adc1\_BPS1}}
{\footnotesize\ttfamily \label{driving__loop_8c_ad36d3aa4037203058df6816d56f4c186} 
uint16\+\_\+t adc1\+\_\+\+BPS1\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{main_8c_source_l00069}{69}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00108}{init\+Driving\+Loop()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a277f7921a7a1e0fb8a6f953943dc06dc}\index{driving\_loop.c@{driving\_loop.c}!adc1\_BPS2@{adc1\_BPS2}}
\index{adc1\_BPS2@{adc1\_BPS2}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{adc1\_BPS2}{adc1\_BPS2}}
{\footnotesize\ttfamily \label{driving__loop_8c_a277f7921a7a1e0fb8a6f953943dc06dc} 
uint16\+\_\+t adc1\+\_\+\+BPS2\hspace{0.3cm}{\ttfamily [extern]}}



Definition at line \mbox{\hyperlink{main_8c_source_l00070}{70}} of file \mbox{\hyperlink{main_8c_source}{main.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00108}{init\+Driving\+Loop()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_ab8788a0f246816c11002008cb43d1886}\index{driving\_loop.c@{driving\_loop.c}!default\_dl\_settings@{default\_dl\_settings}}
\index{default\_dl\_settings@{default\_dl\_settings}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{default\_dl\_settings}{default\_dl\_settings}}
{\footnotesize\ttfamily \label{driving__loop_8c_ab8788a0f246816c11002008cb43d1886} 
\mbox{\hyperlink{structdriving__loop__args}{driving\+\_\+loop\+\_\+args}} default\+\_\+dl\+\_\+settings}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00029}{29}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{uvfr__settings_8c_source_l00250}{setup\+Default\+Settings()}}, and \mbox{\hyperlink{uvfr__settings_8c_source_l01155}{uv\+Reset\+Flash\+To\+Default()}}.

\Hypertarget{driving__loop_8c_a401dd8422f51d8d344e5ac9559ef8908}\index{driving\_loop.c@{driving\_loop.c}!driving\_args@{driving\_args}}
\index{driving\_args@{driving\_args}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{driving\_args}{driving\_args}}
{\footnotesize\ttfamily \label{driving__loop_8c_a401dd8422f51d8d344e5ac9559ef8908} 
\mbox{\hyperlink{structdriving__loop__args}{driving\+\_\+loop\+\_\+args}}\texorpdfstring{$\ast$}{*} driving\+\_\+args = NULL}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00031}{31}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00203}{calculate\+Brake\+Percentage()}}, \mbox{\hyperlink{driving__loop_8c_source_l00174}{calculate\+Throttle\+Percentage()}}, \mbox{\hyperlink{driving__loop_8c_source_l00108}{init\+Driving\+Loop()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00142}{map\+Throttle\+To\+Torque()}}.

\Hypertarget{driving__loop_8c_a15e200c9bf4f5d49b02215e273d2d841}\index{driving\_loop.c@{driving\_loop.c}!is\_accelerating@{is\_accelerating}}
\index{is\_accelerating@{is\_accelerating}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{is\_accelerating}{is\_accelerating}}
{\footnotesize\ttfamily \label{driving__loop_8c_a15e200c9bf4f5d49b02215e273d2d841} 
\mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} is\+\_\+accelerating = \mbox{\hyperlink{group__utility__macros_ga65e9886d74aaee76545e83dd09011727}{false}}}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00033}{33}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00222}{apply\+Torque\+Filter()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_acebecb0a23929da61d8512ddded82450}\index{driving\_loop.c@{driving\_loop.c}!last\_brake\_percent@{last\_brake\_percent}}
\index{last\_brake\_percent@{last\_brake\_percent}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{last\_brake\_percent}{last\_brake\_percent}}
{\footnotesize\ttfamily \label{driving__loop_8c_acebecb0a23929da61d8512ddded82450} 
float last\+\_\+brake\+\_\+percent = 0.\+0f\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00050}{50}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a80a40a6a77773c08f900289e4605f4a8}\index{driving\_loop.c@{driving\_loop.c}!last\_input\_change\_time@{last\_input\_change\_time}}
\index{last\_input\_change\_time@{last\_input\_change\_time}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{last\_input\_change\_time}{last\_input\_change\_time}}
{\footnotesize\ttfamily \label{driving__loop_8c_a80a40a6a77773c08f900289e4605f4a8} 
\mbox{\hyperlink{portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t}} last\+\_\+input\+\_\+change\+\_\+time = 0\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00048}{48}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_aaa0cf1ce25f6295e6f5bc62ff3e5fd34}\index{driving\_loop.c@{driving\_loop.c}!last\_throttle\_percent@{last\_throttle\_percent}}
\index{last\_throttle\_percent@{last\_throttle\_percent}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{last\_throttle\_percent}{last\_throttle\_percent}}
{\footnotesize\ttfamily \label{driving__loop_8c_aaa0cf1ce25f6295e6f5bc62ff3e5fd34} 
float last\+\_\+throttle\+\_\+percent = 0.\+0f\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00049}{49}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_aa5e709aa0b6ce54eee6f0396eedc37df}\index{driving\_loop.c@{driving\_loop.c}!sent\_zero\_torque@{sent\_zero\_torque}}
\index{sent\_zero\_torque@{sent\_zero\_torque}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{sent\_zero\_torque}{sent\_zero\_torque}}
{\footnotesize\ttfamily \label{driving__loop_8c_aa5e709aa0b6ce54eee6f0396eedc37df} 
\mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} sent\+\_\+zero\+\_\+torque = \mbox{\hyperlink{group__utility__macros_ga65e9886d74aaee76545e83dd09011727}{false}}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00054}{54}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_afb126e9ab9acbc2c02585ce5728a538a}\index{driving\_loop.c@{driving\_loop.c}!T\_PREV@{T\_PREV}}
\index{T\_PREV@{T\_PREV}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{T\_PREV}{T\_PREV}}
{\footnotesize\ttfamily \label{driving__loop_8c_afb126e9ab9acbc2c02585ce5728a538a} 
float T\+\_\+\+PREV = 0}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00034}{34}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a8096732d061a4d6d6a9b78780025f056}\index{driving\_loop.c@{driving\_loop.c}!T\_REQ@{T\_REQ}}
\index{T\_REQ@{T\_REQ}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{T\_REQ}{T\_REQ}}
{\footnotesize\ttfamily \label{driving__loop_8c_a8096732d061a4d6d6a9b78780025f056} 
float T\+\_\+\+REQ = 0}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00035}{35}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

\Hypertarget{driving__loop_8c_a0131bf37bd5fbfaefac74ca3e6fdd661}\index{driving\_loop.c@{driving\_loop.c}!torque\_inhibit\_active@{torque\_inhibit\_active}}
\index{torque\_inhibit\_active@{torque\_inhibit\_active}!driving\_loop.c@{driving\_loop.c}}
\doxysubsubsection{\texorpdfstring{torque\_inhibit\_active}{torque\_inhibit\_active}}
{\footnotesize\ttfamily \label{driving__loop_8c_a0131bf37bd5fbfaefac74ca3e6fdd661} 
\mbox{\hyperlink{uvfr__utils_8h_a0ecf26b576b9a54eca656b9be7ba6a06}{bool}} torque\+\_\+inhibit\+\_\+active = \mbox{\hyperlink{group__utility__macros_ga65e9886d74aaee76545e83dd09011727}{false}}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{driving__loop_8c_source_l00037}{37}} of file \mbox{\hyperlink{driving__loop_8c_source}{driving\+\_\+loop.\+c}}.



Referenced by \mbox{\hyperlink{driving__loop_8c_source_l00432}{perform\+Safety\+Checks()}}, and \mbox{\hyperlink{driving__loop_8c_source_l00254}{Start\+Driving\+Loop()}}.

