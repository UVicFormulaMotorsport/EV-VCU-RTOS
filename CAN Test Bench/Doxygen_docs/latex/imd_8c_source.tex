\doxysection{imd.\+c}
\hypertarget{imd_8c_source}{}\label{imd_8c_source}\index{Core/Src/imd.c@{Core/Src/imd.c}}
\mbox{\hyperlink{imd_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00001}00001\ \textcolor{comment}{//\ This\ where\ the\ code\ to\ handle\ IMD\ errors\ and\ such\ will\ go}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00003}00003\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00004}00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{imd_8h}{imd.h}}"{}}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00006}00006\ \textcolor{comment}{//\ We\ need\ to\ include\ can.h\ because\ we\ will\ send\ CAN\ messages\ through\ the\ functions\ in\ that\ file}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00007}00007\ \textcolor{comment}{//\ When\ a\ CAN\ message\ comes\ it\ will\ throw\ an\ interrupt\ can.c\ deals\ with\ the\ incoming\ message}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00008}00008\ \textcolor{comment}{//\ the\ function\ in\ can.c\ gets\ the\ ID\ and\ sends\ the\ data\ to\ \ the\ functions\ here}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00009}00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{can_8h}{can.h}}"{}}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00010}00010\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{main_8h}{main.h}}"{}}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00011}00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{constants_8h}{constants.h}}"{}}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00012}00012\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{uvfr__utils_8h}{uvfr\_utils.h}}"{}}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00014}00014\ \textcolor{comment}{//\ We\ need\ to\ include\ pdu.h\ for\ the\ shutdown\ circuit}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00015}00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pdu_8h}{pdu.h}}"{}}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00019}\mbox{\hyperlink{imd_8c_a23ac1f047a25cf90d97877c21a7586ff}{00019}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a23ac1f047a25cf90d97877c21a7586ff}{IMD\_status\_bits}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00020}\mbox{\hyperlink{imd_8c_adc15fc02a3a9fb34afc14ee1ba7434c0}{00020}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_adc15fc02a3a9fb34afc14ee1ba7434c0}{IMD\_High\_Uncertainty}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00022}00022\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00024}00024\ \textcolor{comment}{//\ Declarations\ for\ the\ IMD\ part\ name\ to\ be\ checked\ on\ startup}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00025}\mbox{\hyperlink{imd_8c_a5d147289d7432f5d61d43264c30305fb}{00025}}\ uint32\_t\ \mbox{\hyperlink{imd_8c_a5d147289d7432f5d61d43264c30305fb}{IMD\_Read\_Part\_Name}}[4];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00026}\mbox{\hyperlink{imd_8c_a4e45f48e8a434f56675ac3d5879de796}{00026}}\ \textcolor{keyword}{const}\ uint32\_t\ \mbox{\hyperlink{imd_8c_a4e45f48e8a434f56675ac3d5879de796}{IMD\_Expected\_Part\_Name}}[4];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00028}\mbox{\hyperlink{imd_8c_a10a782cdb04731b5d092fb021edab5f3}{00028}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a10a782cdb04731b5d092fb021edab5f3}{IMD\_Part\_Name\_0\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00029}\mbox{\hyperlink{imd_8c_a479ffaedc92d63ffd670ce28bd246076}{00029}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a479ffaedc92d63ffd670ce28bd246076}{IMD\_Part\_Name\_1\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00030}\mbox{\hyperlink{imd_8c_ac9c5471411ecb29f7447f657747e55f5}{00030}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_ac9c5471411ecb29f7447f657747e55f5}{IMD\_Part\_Name\_2\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00031}\mbox{\hyperlink{imd_8c_a33de8b2346fb2365fb32570d16551fb9}{00031}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a33de8b2346fb2365fb32570d16551fb9}{IMD\_Part\_Name\_3\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00032}\mbox{\hyperlink{imd_8c_abfc7f2bfdb786d652f47184917c4e06b}{00032}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_abfc7f2bfdb786d652f47184917c4e06b}{IMD\_Part\_Name\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00035}\mbox{\hyperlink{imd_8c_ae29a8406dd97227ddcc5615fe44f5da5}{00035}}\ uint32\_t\ \mbox{\hyperlink{imd_8c_ae29a8406dd97227ddcc5615fe44f5da5}{IMD\_Read\_Version}}[3];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00036}\mbox{\hyperlink{imd_8c_a3996ec9ae905b88cb1ee925f02f14d2b}{00036}}\ \textcolor{keyword}{const}\ uint32\_t\ \mbox{\hyperlink{imd_8c_a3996ec9ae905b88cb1ee925f02f14d2b}{IMD\_Expected\_Version}}[3];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00038}\mbox{\hyperlink{imd_8c_a882acf301b569fbc57a5df71faeedecc}{00038}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a882acf301b569fbc57a5df71faeedecc}{IMD\_Version\_0\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00039}\mbox{\hyperlink{imd_8c_a89c19efcdae7b584557b4ef711837af6}{00039}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a89c19efcdae7b584557b4ef711837af6}{IMD\_Version\_1\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00040}\mbox{\hyperlink{imd_8c_a462db37dc46e1576e9e615d468fc58ff}{00040}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a462db37dc46e1576e9e615d468fc58ff}{IMD\_Version\_2\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00041}\mbox{\hyperlink{imd_8c_adef02ad9e41f0d6f9e1f0f694a5d04f7}{00041}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_adef02ad9e41f0d6f9e1f0f694a5d04f7}{IMD\_Version\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00044}00044\ \textcolor{comment}{//\ Declarations\ for\ the\ IMD\ serial\ number\ to\ be\ checked\ on\ startup}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00045}\mbox{\hyperlink{imd_8c_aae6f18f0f756ae490efe62f09636d4af}{00045}}\ uint32\_t\ \mbox{\hyperlink{imd_8c_aae6f18f0f756ae490efe62f09636d4af}{IMD\_Read\_Serial\_Number}}[4];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00046}\mbox{\hyperlink{imd_8c_ae609b1c80bcf96677b5f57ef1c7b7497}{00046}}\ \textcolor{keyword}{const}\ uint32\_t\ \mbox{\hyperlink{imd_8c_ae609b1c80bcf96677b5f57ef1c7b7497}{IMD\_Expected\_Serial\_Number}}[4]\ =\ \{0xB8DD9AF9,}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00047}00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0x6094F48B,}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0x1F1C3794,}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0xFCF9A95B\};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00050}\mbox{\hyperlink{imd_8c_a45d76c9654bc38b93b5132911d1a7d9e}{00050}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a45d76c9654bc38b93b5132911d1a7d9e}{IMD\_Serial\_Number\_0\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00051}\mbox{\hyperlink{imd_8c_aa06ed9ddd147d5411e8f920171a54fc5}{00051}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_aa06ed9ddd147d5411e8f920171a54fc5}{IMD\_Serial\_Number\_1\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00052}\mbox{\hyperlink{imd_8c_a66157fb5f0181e14ef3730b945a70c97}{00052}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a66157fb5f0181e14ef3730b945a70c97}{IMD\_Serial\_Number\_2\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00053}\mbox{\hyperlink{imd_8c_a44410c46ba61bd668ce70bf14f09f451}{00053}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a44410c46ba61bd668ce70bf14f09f451}{IMD\_Serial\_Number\_3\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00054}\mbox{\hyperlink{imd_8c_ac493eb0ec9882a9ff2c6d340707c19e6}{00054}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_ac493eb0ec9882a9ff2c6d340707c19e6}{IMD\_Serial\_Number\_Set}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00056}00056\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00057}\mbox{\hyperlink{imd_8c_a5b8ada827e9888be105e0bc8c27006f3}{00057}}\ int32\_t\ \mbox{\hyperlink{imd_8c_a5b8ada827e9888be105e0bc8c27006f3}{IMD\_Temperature}};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00060}00060\ \textcolor{comment}{//\ If\ there\ is\ a\ hardware\ error,\ that\ one\ bit\ will\ be\ a\ 1\ in\ the\ status\ bits\ -\/>\ read\ error\ flags}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00061}00061\ \textcolor{comment}{//\ error\ flags\ will\ return\ the\ status\ bits\ which\ will\ have\ a\ 1\ in\ HE\ bit\ -\/>\ infinite\ loop}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00062}\mbox{\hyperlink{imd_8c_a208e957d0a18b23cb59f4eedd1c855cc}{00062}}\ uint8\_t\ \mbox{\hyperlink{imd_8c_a208e957d0a18b23cb59f4eedd1c855cc}{IMD\_error\_flags\_requested}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00065}\mbox{\hyperlink{imd_8c_a58782be23a1af4a9d26692154f2b826a}{00065}}\ \mbox{\hyperlink{structuv__imd__settings}{uv\_imd\_settings}}\ \mbox{\hyperlink{imd_8c_a58782be23a1af4a9d26692154f2b826a}{default\_imd\_settings}}\ =\ \{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00066}00066\ \ \ \ \ .min\_isolation\_resistances\ =\ 10000,}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00067}00067\ \ \ \ \ .expected\_isolation\_capacitances\ =\ 100,}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00068}00068\ \ \ \ \ .max\_imd\_temperature\ =\ 60}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00069}00069\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00070}00070\ \};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00072}00072\ \textcolor{comment}{//\ Need\ a\ function\ to\ parse\ the\ CAN\ message\ data\ received\ from\ the\ IMD}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00073}\mbox{\hyperlink{imd_8h_a1f6181c5ab49d963007eb9a212672bbd}{00073}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a1f6181c5ab49d963007eb9a212672bbd}{IMD\_Parse\_Message}}(\textcolor{keywordtype}{int}\ DLC,\ uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00074}00074\ \ \ \ \ \textcolor{comment}{//\ The\ first\ step\ is\ to\ look\ at\ the\ first\ byte\ to\ figure\ out\ what\ we're\ looking\ at}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00076}00076\ \ \ \ \ \textcolor{keywordflow}{switch}\ (Data[0])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00077}00077\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ important\ checks}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aabbce6aa84dd484b90a148c9893f29c38}{isolation\_state}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(Data[1]);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_af81ff089b3fabafdfa49c3b816ded80e}{IMD\_Check\_Isolation\_State}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00083}00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aac4f56ef8fddf7442d16abdcef0ee35ae}{isolation\_resistances}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(Data[1]);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_adb4d085b7b1f3e5a860c45aa5a404294}{IMD\_Check\_Isolation\_Resistances}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00086}00086\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aa1f57f433823678afb675a0118355b41c}{isolation\_capacitances}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(Data[1]);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a686301a85070c84e89af3e1cc0a159ae}{IMD\_Check\_Isolation\_Capacitances}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00091}00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00092}00092\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00093}00093\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aab731b0ae179fe84519337374868be1d1}{voltages\_Vp\_and\_Vn}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(Data[1]);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a0fc857559d80dd701aec763dd6911383}{IMD\_Check\_Voltages\_Vp\_and\_Vn}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00096}00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00098}00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aa88e842a14bd3662858b52abbefad1680}{battery\_voltage}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(Data[1]);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ac94e0b660190e6ce0d376d407627057e}{IMD\_Check\_Battery\_Voltage}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00101}00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00102}00102\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aa86fdcb1bb1742680706316d50c9b8fcf}{Error\_flags}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(Data[1]);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a0cfe9b1a6472c4a5d0ca154a4e9e7bb0}{IMD\_Check\_Error\_Flags}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00106}00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00108}00108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aae62307414b8266d9beb9dcffc335f504}{safety\_touch\_energy}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(Data[1]);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_abc49be24256f1a93674e290546384348}{IMD\_Check\_Safety\_Touch\_Energy}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00111}00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00112}00112\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00113}00113\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aa64c31deedf3ed7b386711c4c6825456f}{safety\_touch\_current}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(Data[1]);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00115}00115\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a00c843b8f3e8cf4569ea9008cd7db9d2}{IMD\_Check\_Safety\_Touch\_Current}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00116}00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00118}00118\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ high\ resolution\ measurements}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00119}00119\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_af8e85b806bce9c9cad944c261ff0aa0ca781dcc0628d7284c0e9e0be67cd3365b}{Vn\_hi\_res}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00120}00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ do\ something}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00121}00121\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00123}00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_af8e85b806bce9c9cad944c261ff0aa0ca6b90089e224b90d87a6cf113e5e36f22}{Vp\_hi\_res}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ do\ something}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00125}00125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00127}00127\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_af8e85b806bce9c9cad944c261ff0aa0ca65563450695b30beae4032ff330f0e6f}{Vexc\_hi\_res}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ do\ something}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00129}00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00130}00130\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00131}00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_af8e85b806bce9c9cad944c261ff0aa0ca23a10ada814d11a9a1044ede3a821688}{Vb\_hi\_res}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ do\ something}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00133}00133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00134}00134\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00135}00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_af8e85b806bce9c9cad944c261ff0aa0ca6d4bdc992b68f8ee4aea88056639af5d}{Vpwr\_hi\_res}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ do\ something}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00137}00137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00139}00139\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aa636f89bb3814dde8c07ec0446f72d28f}{Temperature}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a1a18f8d11173ee691822b5a712cf1617}{IMD\_Check\_Temperature}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00141}00141\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00142}00142\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00143}00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aa194e665f65c42e02190f2871ecfd3eed}{Max\_battery\_working\_voltage}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a6f6abcfa57cc41a7b1249c0157702a1c}{IMD\_Check\_Max\_Battery\_Working\_Voltage}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00145}00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00147}00147\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ugly\ syntax\ below}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea9f7942276dd9e12e41f0463701086e7d}{Part\_name\_0}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00149}00149\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea6172e87521e48caf627c729daa8b6f59}{Part\_name\_1}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00150}00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea98d7a9f4550631a81ea2c5a4a215a981}{Part\_name\_2}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00151}00151\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea086d70441c24f02a8abceeee41562cde}{Part\_name\_3}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a72a595e6320ceeb17de4f7ce2ec66d30}{IMD\_Check\_Part\_Name}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00153}00153\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00154}00154\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00155}00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea5eb2adcd1cb7d65f6c590b6f6b7ee322}{Version\_0}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00156}00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eafcc458d57f1b3273ae319230922231a4}{Version\_1}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00157}00157\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eafb60bb95154ac28254f2e8dfbc82c638}{Version\_2}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a4a16ede06a18addd7ef3e67be2aaaf3d}{IMD\_Check\_Version}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00159}00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00160}00160\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00161}00161\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea453d45b6245737d4987dd4b78a2e464a}{Serial\_number\_0}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00162}00162\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea29cf9ca0d526194e6ce71ff99120ee9e}{Serial\_number\_1}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00163}00163\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea87fc8ea63ac933e1e441f105dce28cdb}{Serial\_number\_2}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00164}00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eaf9d06047340a1a4185e714ca761f891e}{Serial\_number\_3}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a6f1e850c527bdf0e1a7cfbc557b8501b}{IMD\_Check\_Serial\_Number}}(Data);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00166}00166\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00167}00167\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00168}00168\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eac87b1e30788367a709363dba4ad7f238}{Uptime\_counter}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00169}00169\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ call\ check\ uptime\ counter}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00170}00170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00171}00171\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00172}00172\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00173}00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{comment}{//\ This\ is\ a\ code\ that\ is\ not\ recognized\ (bad)}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00174}00174\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00175}00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00176}00176\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00177}00177\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00178}00178\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00179}00179\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00180}00180\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00181}00181\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00182}00182\ \textcolor{comment}{//\ This\ sends\ the\ message\ to\ request\ data.\ The\ specific\ status\ requested\ is\ passed\ as\ arg}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00183}00183\ \textcolor{comment}{//\ The\ IMD\ will\ then\ send\ a\ message\ with\ the\ same\ code\ and\ the\ data}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00184}00184\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00185}\mbox{\hyperlink{imd_8h_aeb7c937639c5385f5d2b4e3a4e60250f}{00185}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(uint8\_t\ Status)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00186}00186\ \ \ \ \ \mbox{\hyperlink{constants_8h_a3e35a666d459f2ac92fc7c35334ff0ff}{TxHeader}}.IDE\ =\ CAN\_ID\_EXT;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00187}00187\ \ \ \ \ \mbox{\hyperlink{constants_8h_a3e35a666d459f2ac92fc7c35334ff0ff}{TxHeader}}.ExtId\ =\ \mbox{\hyperlink{constants_8h_a1d489aa29fe8cf552f71b550e8088272a242c64f8aaa09a26d5f586483d692f83}{IMD\_CAN\_ID\_Tx}};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00188}00188\ \ \ \ \ \mbox{\hyperlink{constants_8h_a3e35a666d459f2ac92fc7c35334ff0ff}{TxHeader}}.DLC\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00189}00189\ \ \ \ \ \mbox{\hyperlink{constants_8h_af553c31425b32bd9c020380c942ed3bd}{TxData}}[0]\ =\ Status;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00190}00190\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00191}00191\ \ \ \ \ \textcolor{keywordflow}{if}\ (HAL\_CAN\_AddTxMessage(\&\mbox{\hyperlink{can_8h_ab77168d14df04ccca5d48612ee21ced8}{hcan2}},\ \&\mbox{\hyperlink{constants_8h_a3e35a666d459f2ac92fc7c35334ff0ff}{TxHeader}},\ \mbox{\hyperlink{constants_8h_af553c31425b32bd9c020380c942ed3bd}{TxData}},\ \&\mbox{\hyperlink{constants_8h_aedd1e4ac418a9697f9f41a2713d49569}{TxMailbox}})\ !=\ HAL\_OK)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00192}00192\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Transmission\ request\ Error\ */}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00193}00193\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00194}00194\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00195}00195\ \ \ \ \ \mbox{\hyperlink{constants_8h_a3e35a666d459f2ac92fc7c35334ff0ff}{TxHeader}}.IDE\ =\ CAN\_ID\_STD;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00196}00196\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00197}00197\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00198}00198\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00199}00199\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00201}00201\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00203}00203\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00204}00204\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00205}00205\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00206}00206\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00208}00208\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00209}00209\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00210}00210\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00211}00211\ \textcolor{comment}{//\ Functions\ to\ check\ status}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00212}00212\ \textcolor{comment}{//\ AFAIK\ the\ IMD\ will\ not\ send\ a\ CAN\ msg\ when\ the\ status\ changes\ -\/\ we\ need\ to\ constantly\ poll\ it}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00213}00213\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00214}00214\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00215}00215\ \textcolor{comment}{//\ A\ lot\ of\ the\ messages\ will\ include\ status\ bits}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00216}00216\ \textcolor{comment}{//\ Check\ for\ faults}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00217}00217\ \textcolor{comment}{//\ Then\ check\ what\ the\ error\ is\ to\ display\ it\ for\ driver}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00218}\mbox{\hyperlink{imd_8h_ab4e8b5af19cc6d0b08ace9185a542b01}{00218}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_ab4e8b5af19cc6d0b08ace9185a542b01}{IMD\_Check\_Status\_Bits}}(uint8\_t\ Data)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00219}00219\ \ \ \ \ \textcolor{comment}{//\ The\ touch\ energy\ bit\ will\ be\ 1\ when\ connected\ to\ batteries}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00220}00220\ \ \ \ \ \textcolor{comment}{//\ High\ uncertainty\ isn't\ also\ something\ we\ really\ care\ about}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00221}00221\ \ \ \ \ \textcolor{comment}{//\ No\ idea\ about\ excitation\ pulse}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00222}00222\ \ \ \ \ uint8\_t\ mask\ =\ 0b10001111;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00223}00223\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00224}00224\ \ \ \ \ \textcolor{keywordflow}{if}\ ((Data\ \&\ mask)\ !=\ 0)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00225}00225\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Send\ message\ to\ error\ handler\ to\ shutdown\ car}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Trigger\_Shutdown\_Circuit();}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00228}00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((Data\ \&\ \mbox{\hyperlink{imd_8h_acf7b0534a43397021a0e474a499218beafdb68e8ed34ae72c318cbd4a4d6fc250}{Isolation\_status\_bit0}})\ ||\ (Data\ \&\ \mbox{\hyperlink{imd_8h_acf7b0534a43397021a0e474a499218bea2d0990734ac774c2740c9e541e8700b3}{Isolation\_status\_bit1}}))\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Isolation\ fault\ BAD}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00230}00230\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Want\ to\ display\ fault\ to\ dash}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00231}00231\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00232}00232\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00233}00233\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ function\ is\ only\ passed\ the\ first\ byte\ of\ info\ so\ we\ can't\ read\ the\ error\ flags}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00234}00234\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ we\ pass\ the\ entire\ data\ array\ in\ then\ we\ will\ read\ the\ wrong\ data}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00235}00235\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Need\ to\ explicitly\ request\ error\ flags\ and\ then\ read\ it}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00236}00236\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ a\ bool\ to\ check\ if\ we\ have\ already\ requested\ error\ flags\ otherwise\ it\ will\ request\ repeatedly}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00237}00237\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Data\ \&\ \mbox{\hyperlink{imd_8h_acf7b0534a43397021a0e474a499218bea48e3e4678c927a799f113e4688ab7886}{Hardware\_Error}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00238}00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00239}00239\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ display\ to\ dash}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00240}00240\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{imd_8c_a208e957d0a18b23cb59f4eedd1c855cc}{IMD\_error\_flags\_requested}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00241}00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aa86fdcb1bb1742680706316d50c9b8fcf}{Error\_flags}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a208e957d0a18b23cb59f4eedd1c855cc}{IMD\_error\_flags\_requested}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00243}00243\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00244}00244\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00245}00245\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00246}00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Data\ \&\ \mbox{\hyperlink{imd_8h_acf7b0534a43397021a0e474a499218beacb8278060f1d4f8f423c3f7943618d0a}{Low\_Battery\_Voltage}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00247}00247\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ display\ low\ voltage\ on\ dash}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00248}00248\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ HV\ battery\ ever\ throws\ this\ error\ it\ is\ because\ of\ a\ disconnect}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00249}00249\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00250}00250\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Data\ \&\ \mbox{\hyperlink{imd_8h_acf7b0534a43397021a0e474a499218bea446905b0f3e9fe48a178f0a6799324b4}{High\_Battery\_Voltage}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00251}00251\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ display\ high\ voltage\ on\ dash}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00252}00252\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ HV\ battery\ ever\ throws\ this\ error\ it\ is\ bad}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00253}00253\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00254}00254\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00255}00255\ \ \ \ \ \textcolor{comment}{//\ Could\ check\ other\ faults\ we\ don't\ really\ care\ about}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00256}00256\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00257}00257\ \ \ \ \ \mbox{\hyperlink{imd_8c_adc15fc02a3a9fb34afc14ee1ba7434c0}{IMD\_High\_Uncertainty}}\ =\ Data\ \&\ \mbox{\hyperlink{imd_8h_acf7b0534a43397021a0e474a499218bea4c7193d6f28bf43ed6de8e1291917846}{High\_Uncertainty}};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00258}00258\ \ \ \ \ \textcolor{comment}{//\ If\ we\ made\ it\ here\ then\ there\ is\ no\ error\ so\ exit\ to\ check\ rest\ of\ message}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00259}00259\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00260}00260\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00261}00261\ \textcolor{comment}{//\ We\ need\ to\ look\ at\ the\ 2nd\ and\ 3rd\ bytes\ in\ the\ array\ for\ the\ error\ flags}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00262}\mbox{\hyperlink{imd_8h_a0cfe9b1a6472c4a5d0ca154a4e9e7bb0}{00262}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a0cfe9b1a6472c4a5d0ca154a4e9e7bb0}{IMD\_Check\_Error\_Flags}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00263}00263\ \ \ \ \ \textcolor{comment}{//\ Need\ to\ check\ the\ bits\ to\ see\ what\ caused\ the\ hardware\ error}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00264}00264\ \ \ \ \ \textcolor{comment}{//\ Want\ to\ display\ message\ to\ dash\ for\ safety\ reasons}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00265}00265\ \ \ \ \ uint16\_t\ IMD\_Error\_Flags\ =\ (Data[1]\ <<\ 8)\ |\ Data[2];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00266}00266\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00267}00267\ \ \ \ \ \textcolor{comment}{//\ We\ want\ to\ shutdown\ if\ any\ of\ these\ are\ true}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00268}00268\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00269}00269\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61a902d14d447c4552ea1f4f1634f2e4a61}{Err\_Vx1}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00270}00270\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00271}00271\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00272}00272\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61a806c4e5614221c8b239f6620ab7d5d50}{Err\_Vx2}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00273}00273\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00274}00274\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00275}00275\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61ae3dc5d0132a955458e722cb04ccd3900}{Err\_CH}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00276}00276\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00277}00277\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00278}00278\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61aeccbe530442099dab4642a4dc399666f}{Err\_VxR}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00279}00279\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00280}00280\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00281}00281\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61a198b196da46ddeb177a05ed33f363df7}{Err\_Vexi}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00282}00282\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00283}00283\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00284}00284\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61a22c4b1756e0cf536391cc6e5547470f6}{Err\_Vpwr}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00285}00285\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00286}00286\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00287}00287\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61aec0ab5944a70662e09e795646e5987ca}{Err\_Watchdog}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00288}00288\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00289}00289\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00290}00290\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61a0bab46bce7066da8e52221c8283cccbd}{Err\_clock}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00291}00291\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00292}00292\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00293}00293\ \ \ \ \ \textcolor{keywordflow}{if}\ (IMD\_Error\_Flags\ \&\ \mbox{\hyperlink{imd_8h_a4456d255c2ceb447ad52b68087531b61afa71f4893ad7f39c03d991a2eae95368}{Err\_temp}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00294}00294\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ print\ to\ dash\ I\ guess}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00295}00295\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00296}00296\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00297}00297\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00298}00298\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00299}00299\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00300}00300\ \textcolor{comment}{//\ This\ is\ the\ function\ that\ will\ be\ called\ when\ a\ CAN\ message\ is\ received\ that\ has\ the\ isolation\ state\ data}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00301}\mbox{\hyperlink{imd_8h_af81ff089b3fabafdfa49c3b816ded80e}{00301}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_af81ff089b3fabafdfa49c3b816ded80e}{IMD\_Check\_Isolation\_State}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00302}00302\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00303}00303\ \ \ \ \ uint16\_t\ isolation\ =\ (Data[2]\ <<\ 8)\ |\ Data[3];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00304}00304\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00305}00305\ \ \ \ \ \textcolor{comment}{//\ If\ the\ isolation\ is\ less\ than\ 500\ Ohms\ /\ volt\ and\ the\ uncertainty\ is\ less\ than\ 5\%}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00306}00306\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (isolation\ <\ 500)\ \&\&\ (Data[4]\ <=\ 5)\ )\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00307}00307\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00308}00308\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ disable\ shutdown\ circuit\ and\ display\ error}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00309}00309\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_adc15fc02a3a9fb34afc14ee1ba7434c0}{IMD\_High\_Uncertainty}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00310}00310\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00311}00311\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00312}00312\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00313}00313\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00314}00314\ \textcolor{comment}{//\ Not\ sure\ if\ we\ necessarily\ need\ to\ check\ isolation\ resistances}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00315}00315\ \textcolor{comment}{//\ check\ isolation\ state\ will\ be\ much\ more\ important}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00316}00316\ \textcolor{comment}{//\ We\ should,\ however,\ check\ this\ on\ startup}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00317}\mbox{\hyperlink{imd_8h_adb4d085b7b1f3e5a860c45aa5a404294}{00317}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_adb4d085b7b1f3e5a860c45aa5a404294}{IMD\_Check\_Isolation\_Resistances}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00318}00318\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00319}00319\ \ \ \ \ uint16\_t\ Rp\_resistance\ =\ (Data[2]\ <<\ 8)\ |\ Data[3];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00320}00320\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00321}00321\ \ \ \ \ \textcolor{comment}{//\ If\ the\ isolation\ resistance\ between\ the\ positive\ terminal\ and\ the\ chassis}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00322}00322\ \ \ \ \ \textcolor{comment}{//\ is\ less\ than\ 250\ kOhms\ and\ the\ uncertainty\ is\ less\ than\ 5\%}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00323}00323\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (Rp\_resistance\ <\ 250)\ \&\&\ (Data[4]\ <=\ 5)\ )\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00324}00324\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00325}00325\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ disable\ shutdown\ circuit\ and\ display\ error}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00326}00326\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_adc15fc02a3a9fb34afc14ee1ba7434c0}{IMD\_High\_Uncertainty}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00327}00327\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00328}00328\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00329}00329\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00330}00330\ \ \ \ \ uint16\_t\ Rn\_resistance\ =\ (Data[5]\ <<\ 8)\ |\ Data[6];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00331}00331\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00332}00332\ \ \ \ \ \textcolor{comment}{//\ If\ the\ isolation\ resistance\ between\ the\ negative\ terminal\ and\ the\ chassis}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00333}00333\ \ \ \ \ \textcolor{comment}{//\ is\ less\ than\ 250\ kOhms\ and\ the\ uncertainty\ is\ less\ than\ 5\%}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00334}00334\ \ \ \ \ \textcolor{keywordflow}{if}\ (\ (Rn\_resistance\ <\ 250)\ \&\&\ (Data[7]\ <=\ 5)\ )\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00335}00335\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00336}00336\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ TODO\ disable\ shutdown\ circuit\ and\ display\ error}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00337}00337\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_adc15fc02a3a9fb34afc14ee1ba7434c0}{IMD\_High\_Uncertainty}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00338}00338\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00339}00339\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00340}00340\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00341}00341\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00342}\mbox{\hyperlink{imd_8h_a686301a85070c84e89af3e1cc0a159ae}{00342}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a686301a85070c84e89af3e1cc0a159ae}{IMD\_Check\_Isolation\_Capacitances}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00343}00343\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00344}00344\ \ \ \ \ \textcolor{comment}{//\ I\ don't\ know\ how\ useful\ this\ will\ be}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00345}00345\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00346}00346\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00347}00347\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00348}00348\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00349}\mbox{\hyperlink{imd_8h_a0fc857559d80dd701aec763dd6911383}{00349}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a0fc857559d80dd701aec763dd6911383}{IMD\_Check\_Voltages\_Vp\_and\_Vn}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00350}00350\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00351}00351\ \ \ \ \ \textcolor{comment}{//\ This\ could\ potentially\ be\ useful\ on\ startup}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00352}00352\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00353}00353\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00354}00354\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00355}00355\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00356}\mbox{\hyperlink{imd_8h_ac94e0b660190e6ce0d376d407627057e}{00356}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_ac94e0b660190e6ce0d376d407627057e}{IMD\_Check\_Battery\_Voltage}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00357}00357\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00358}00358\ \ \ \ \ \textcolor{comment}{//\ This\ could\ be\ useful\ to\ compare\ with\ BMS\ and\ make\ sure\ things\ are\ working\ well}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00359}00359\ \ \ \ \ \textcolor{comment}{//\ startup\ function\ really}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00360}00360\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00361}00361\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00362}00362\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00363}\mbox{\hyperlink{imd_8h_a1a18f8d11173ee691822b5a712cf1617}{00363}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a1a18f8d11173ee691822b5a712cf1617}{IMD\_Check\_Temperature}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00364}00364\ \ \ \ \ \textcolor{comment}{//\ TODO}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00365}00365\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00366}00366\ \ \ \ \ \textcolor{comment}{//\ byte\ 1-\/4\ in\ motorola}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00367}00367\ \ \ \ \ \mbox{\hyperlink{imd_8c_a5b8ada827e9888be105e0bc8c27006f3}{IMD\_Temperature}}\ =\ (Data[4]\ <<\ 24)\ |\ (Data[3]\ <<\ 16)\ |\ (Data[2]\ <<\ 8)\ |\ Data[1];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00368}00368\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00369}00369\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00370}00370\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00371}00371\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00372}00372\ \textcolor{comment}{//\ These\ functions\ could\ check\ to\ see\ if\ stuff\ is\ safe\ to\ touch}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00373}00373\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00374}\mbox{\hyperlink{imd_8h_abc49be24256f1a93674e290546384348}{00374}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_abc49be24256f1a93674e290546384348}{IMD\_Check\_Safety\_Touch\_Energy}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00375}00375\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00376}00376\ \ \ \ \ \textcolor{comment}{//\ I\ don't\ really\ know\ how\ to\ make\ use\ of\ these\ functions}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00377}00377\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00378}00378\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00379}00379\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00380}00380\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00381}\mbox{\hyperlink{imd_8h_a00c843b8f3e8cf4569ea9008cd7db9d2}{00381}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a00c843b8f3e8cf4569ea9008cd7db9d2}{IMD\_Check\_Safety\_Touch\_Current}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00382}00382\ \ \ \ \ \textcolor{comment}{//\ TODO}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00383}00383\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00384}00384\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00385}00385\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00386}00386\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00387}00387\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00388}00388\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00389}00389\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00390}00390\ \textcolor{comment}{//\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00391}00391\ \textcolor{comment}{//\ Data\ that\ could\ be\ checked\ on\ startup\ to\ make\ sure\ everything\ is\ good}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00392}00392\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00393}\mbox{\hyperlink{imd_8h_a6f6abcfa57cc41a7b1249c0157702a1c}{00393}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a6f6abcfa57cc41a7b1249c0157702a1c}{IMD\_Check\_Max\_Battery\_Working\_Voltage}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00394}00394\ \ \ \ \ uint16\_t\ Max\_Battery\_Voltage\ =\ (Data[1]\ <<\ 8)\ |\ Data[2];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00395}00395\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00396}00396\ \ \ \ \ \textcolor{keywordflow}{if}\ (Max\_Battery\_Voltage\ !=\ 571)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00397}00397\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Max\_Battery\_Voltage\ not\ configured\ properly}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00398}00398\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00399}00399\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00400}00400\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00401}00401\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00402}00402\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00403}00403\ \textcolor{comment}{//\ This\ function\ checks\ the\ part\ name\ of\ the\ IMD\ matches\ expected}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00404}00404\ \textcolor{comment}{//\ The\ part\ name\ is\ split\ into\ 4\ messages,\ each\ of\ 4\ bytes}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00405}00405\ \textcolor{comment}{//\ Because\ it\ is\ split\ over\ 4\ messages,\ we\ need\ to\ compare\ only\ once\ we\ have\ read\ all\ messages}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00406}\mbox{\hyperlink{imd_8h_a72a595e6320ceeb17de4f7ce2ec66d30}{00406}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a72a595e6320ceeb17de4f7ce2ec66d30}{IMD\_Check\_Part\_Name}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00407}00407\ \ \ \ \ \textcolor{comment}{//\ TODO}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00408}00408\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00409}00409\ \ \ \ \ \textcolor{comment}{//\ This\ function\ will\ be\ called\ from\ the\ CAN\ msg\ parser}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00410}00410\ \ \ \ \ \textcolor{comment}{//\ It\ will\ get\ the\ array\ of\ data\ bits.\ We\ need\ to\ check\ which\ part\ name}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00411}00411\ \ \ \ \ \textcolor{comment}{//\ We\ then\ store\ the\ 4\ bytes\ in\ an\ array\ of\ 32\ bit\ int\ to\ compare\ at\ the\ end}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00412}00412\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00413}00413\ \ \ \ \ \textcolor{keywordflow}{switch}\ (Data[0])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00414}00414\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea9f7942276dd9e12e41f0463701086e7d}{Part\_name\_0}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a5d147289d7432f5d61d43264c30305fb}{IMD\_Read\_Part\_Name}}[0]\ =\ (Data[4]\ <<\ 24)\ |\ (Data[3]\ <<\ 16)\ |\ (Data[2]\ <<\ 8)\ |\ Data[1];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00416}00416\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a10a782cdb04731b5d092fb021edab5f3}{IMD\_Part\_Name\_0\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00417}00417\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00418}00418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea6172e87521e48caf627c729daa8b6f59}{Part\_name\_1}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00419}00419\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a5d147289d7432f5d61d43264c30305fb}{IMD\_Read\_Part\_Name}}[1]\ =\ (Data[4]\ <<\ 24)\ |\ (Data[3]\ <<\ 16)\ |\ (Data[2]\ <<\ 8)\ |\ Data[1];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00420}00420\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a479ffaedc92d63ffd670ce28bd246076}{IMD\_Part\_Name\_1\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00421}00421\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00422}00422\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea98d7a9f4550631a81ea2c5a4a215a981}{Part\_name\_2}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00423}00423\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a5d147289d7432f5d61d43264c30305fb}{IMD\_Read\_Part\_Name}}[2]\ =\ (Data[4]\ <<\ 24)\ |\ (Data[3]\ <<\ 16)\ |\ (Data[2]\ <<\ 8)\ |\ Data[1];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00424}00424\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ac9c5471411ecb29f7447f657747e55f5}{IMD\_Part\_Name\_2\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00425}00425\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00426}00426\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea086d70441c24f02a8abceeee41562cde}{Part\_name\_3}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00427}00427\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a5d147289d7432f5d61d43264c30305fb}{IMD\_Read\_Part\_Name}}[3]\ =\ (Data[4]\ <<\ 24)\ |\ (Data[3]\ <<\ 16)\ |\ (Data[2]\ <<\ 8)\ |\ Data[1];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00428}00428\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a33de8b2346fb2365fb32570d16551fb9}{IMD\_Part\_Name\_3\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00429}00429\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00430}00430\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00431}00431\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00432}00432\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_a10a782cdb04731b5d092fb021edab5f3}{IMD\_Part\_Name\_0\_Set}}\ \&\&\ \mbox{\hyperlink{imd_8c_a479ffaedc92d63ffd670ce28bd246076}{IMD\_Part\_Name\_1\_Set}}\ \&\&\ \mbox{\hyperlink{imd_8c_ac9c5471411ecb29f7447f657747e55f5}{IMD\_Part\_Name\_2\_Set}}\ \&\&\ \mbox{\hyperlink{imd_8c_a33de8b2346fb2365fb32570d16551fb9}{IMD\_Part\_Name\_3\_Set}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00433}00433\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_abfc7f2bfdb786d652f47184917c4e06b}{IMD\_Part\_Name\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00434}00434\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00435}00435\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00436}00436\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_abfc7f2bfdb786d652f47184917c4e06b}{IMD\_Part\_Name\_Set}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00437}00437\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ part\ number\ matches\ expected}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00438}00438\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 4;\ ++i)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00439}00439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_a5d147289d7432f5d61d43264c30305fb}{IMD\_Read\_Part\_Name}}[0]\ !=\ \mbox{\hyperlink{imd_8c_a4e45f48e8a434f56675ac3d5879de796}{IMD\_Expected\_Part\_Name}}[0])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00440}00440\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//error}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00441}00441\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00442}00442\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00443}00443\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00444}00444\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00445}00445\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00446}00446\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00447}00447\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00448}\mbox{\hyperlink{imd_8h_a4a16ede06a18addd7ef3e67be2aaaf3d}{00448}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a4a16ede06a18addd7ef3e67be2aaaf3d}{IMD\_Check\_Version}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00449}00449\ \ \ \ \ \textcolor{comment}{//\ TODO}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00450}00450\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00451}00451\ \ \ \ \ \textcolor{comment}{//\ This\ function\ will\ be\ called\ from\ the\ CAN\ msg\ parser}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00452}00452\ \ \ \ \ \textcolor{comment}{//\ It\ will\ get\ the\ array\ of\ data\ bits.\ We\ need\ to\ check\ which\ firmware\ version}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00453}00453\ \ \ \ \ \textcolor{comment}{//\ We\ then\ store\ the\ 4\ bytes\ in\ an\ array\ of\ 32\ bit\ int\ to\ compare\ at\ the\ end}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00454}00454\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00455}00455\ \ \ \ \ \textcolor{keywordflow}{switch}\ (Data[0])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00456}00456\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea5eb2adcd1cb7d65f6c590b6f6b7ee322}{Version\_0}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00457}00457\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ae29a8406dd97227ddcc5615fe44f5da5}{IMD\_Read\_Version}}[0]\ =\ (Data[3]\ <<\ 16)\ |\ (Data[2]\ <<\ 8)\ |\ Data[1];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00458}00458\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a882acf301b569fbc57a5df71faeedecc}{IMD\_Version\_0\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00459}00459\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00460}00460\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eafcc458d57f1b3273ae319230922231a4}{Version\_1}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00461}00461\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ae29a8406dd97227ddcc5615fe44f5da5}{IMD\_Read\_Version}}[1]\ =\ (Data[3]\ <<\ 16)\ |\ (Data[2]\ <<\ 8)\ |\ Data[1];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00462}00462\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a89c19efcdae7b584557b4ef711837af6}{IMD\_Version\_1\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00463}00463\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00464}00464\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eafb60bb95154ac28254f2e8dfbc82c638}{Version\_2}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00465}00465\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ae29a8406dd97227ddcc5615fe44f5da5}{IMD\_Read\_Version}}[2]\ =\ (Data[3]\ <<\ 16)\ |\ (Data[2]\ <<\ 8)\ |\ Data[1];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00466}00466\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a462db37dc46e1576e9e615d468fc58ff}{IMD\_Version\_2\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00467}00467\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00468}00468\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00469}00469\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00470}00470\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_a882acf301b569fbc57a5df71faeedecc}{IMD\_Version\_0\_Set}}\ \&\&\ \mbox{\hyperlink{imd_8c_a89c19efcdae7b584557b4ef711837af6}{IMD\_Version\_1\_Set}}\ \&\&\ \mbox{\hyperlink{imd_8c_a462db37dc46e1576e9e615d468fc58ff}{IMD\_Version\_2\_Set}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00471}00471\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_adef02ad9e41f0d6f9e1f0f694a5d04f7}{IMD\_Version\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00472}00472\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00473}00473\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00474}00474\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_adef02ad9e41f0d6f9e1f0f694a5d04f7}{IMD\_Version\_Set}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00475}00475\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ part\ number\ matches\ expected}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00476}00476\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 3;\ ++i)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00477}00477\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_ae29a8406dd97227ddcc5615fe44f5da5}{IMD\_Read\_Version}}[0]\ !=\ \mbox{\hyperlink{imd_8c_a3996ec9ae905b88cb1ee925f02f14d2b}{IMD\_Expected\_Version}}[0])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00478}00478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//error}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00479}00479\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00480}00480\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00481}00481\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00482}00482\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00483}00483\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00484}00484\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00485}00485\ \textcolor{comment}{//\ This\ function\ checks\ the\ serial\ number\ of\ the\ IMD\ matches\ expected}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00486}00486\ \textcolor{comment}{//\ The\ part\ name\ is\ split\ into\ 4\ messages,\ each\ of\ 4\ bytes}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00487}00487\ \textcolor{comment}{//\ Because\ it\ is\ split\ over\ 4\ messages,\ we\ need\ to\ compare\ only\ once\ we\ have\ read\ all\ messages}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00488}\mbox{\hyperlink{imd_8h_a6f1e850c527bdf0e1a7cfbc557b8501b}{00488}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a6f1e850c527bdf0e1a7cfbc557b8501b}{IMD\_Check\_Serial\_Number}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00489}00489\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00490}00490\ \ \ \ \ \textcolor{comment}{//\ This\ function\ will\ be\ called\ from\ the\ CAN\ msg\ parser}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00491}00491\ \ \ \ \ \textcolor{comment}{//\ It\ will\ get\ the\ array\ of\ data\ bits.\ We\ need\ to\ check\ which\ serial\ number}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00492}00492\ \ \ \ \ \textcolor{comment}{//\ We\ then\ store\ the\ 4\ bytes\ in\ an\ array\ of\ 32\ bit\ int\ to\ compare\ at\ the\ end}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00493}00493\ \ \ \ \ \textcolor{comment}{//\ The\ serial\ number\ is\ found\ by\ concatenating\ 3\ -\/\ 2\ -\/\ 1\ -\/0}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00494}00494\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00495}00495\ \ \ \ \ \textcolor{keywordflow}{switch}\ (Data[0])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00496}00496\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea453d45b6245737d4987dd4b78a2e464a}{Serial\_number\_0}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00497}00497\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_aae6f18f0f756ae490efe62f09636d4af}{IMD\_Read\_Serial\_Number}}[0]\ =\ (Data[1]\ <<\ 24)\ |\ (Data[2]\ <<\ 16)\ |\ (Data[3]\ <<\ 8)\ |\ Data[4];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00498}00498\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a45d76c9654bc38b93b5132911d1a7d9e}{IMD\_Serial\_Number\_0\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00499}00499\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00500}00500\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea29cf9ca0d526194e6ce71ff99120ee9e}{Serial\_number\_1}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00501}00501\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_aae6f18f0f756ae490efe62f09636d4af}{IMD\_Read\_Serial\_Number}}[1]\ =\ (Data[1]\ <<\ 24)\ |\ (Data[2]\ <<\ 16)\ |\ (Data[3]\ <<\ 8)\ |\ Data[4];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00502}00502\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_aa06ed9ddd147d5411e8f920171a54fc5}{IMD\_Serial\_Number\_1\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00503}00503\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00504}00504\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea87fc8ea63ac933e1e441f105dce28cdb}{Serial\_number\_2}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00505}00505\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_aae6f18f0f756ae490efe62f09636d4af}{IMD\_Read\_Serial\_Number}}[2]\ =\ (Data[1]\ <<\ 24)\ |\ (Data[2]\ <<\ 16)\ |\ (Data[3]\ <<\ 8)\ |\ Data[4];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00506}00506\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a66157fb5f0181e14ef3730b945a70c97}{IMD\_Serial\_Number\_2\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00507}00507\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00508}00508\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eaf9d06047340a1a4185e714ca761f891e}{Serial\_number\_3}}:}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00509}00509\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_aae6f18f0f756ae490efe62f09636d4af}{IMD\_Read\_Serial\_Number}}[3]\ =\ (Data[1]\ <<\ 24)\ |\ (Data[2]\ <<\ 16)\ |\ (Data[3]\ <<\ 8)\ |\ Data[4];}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00510}00510\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_a44410c46ba61bd668ce70bf14f09f451}{IMD\_Serial\_Number\_3\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00511}00511\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00512}00512\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00513}00513\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00514}00514\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_a45d76c9654bc38b93b5132911d1a7d9e}{IMD\_Serial\_Number\_0\_Set}}\ \&\&\ \mbox{\hyperlink{imd_8c_aa06ed9ddd147d5411e8f920171a54fc5}{IMD\_Serial\_Number\_1\_Set}}\ \&\&\ \mbox{\hyperlink{imd_8c_a66157fb5f0181e14ef3730b945a70c97}{IMD\_Serial\_Number\_2\_Set}}\ \&\&\ \mbox{\hyperlink{imd_8c_a44410c46ba61bd668ce70bf14f09f451}{IMD\_Serial\_Number\_3\_Set}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00515}00515\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{imd_8c_ac493eb0ec9882a9ff2c6d340707c19e6}{IMD\_Serial\_Number\_Set}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00516}00516\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00517}00517\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00518}00518\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_ac493eb0ec9882a9ff2c6d340707c19e6}{IMD\_Serial\_Number\_Set}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00519}00519\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ serial\ number\ matches\ expected}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00520}00520\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ 4;\ ++i)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00521}00521\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{imd_8c_aae6f18f0f756ae490efe62f09636d4af}{IMD\_Read\_Serial\_Number}}[i]\ !=\ \mbox{\hyperlink{imd_8c_ae609b1c80bcf96677b5f57ef1c7b7497}{IMD\_Expected\_Serial\_Number}}[i])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00522}00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//error}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00523}00523\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00524}00524\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00525}00525\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00526}00526\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00527}00527\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00528}00528\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00529}\mbox{\hyperlink{imd_8h_ae0177fe52ae013a36014be506fd1fa93}{00529}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_ae0177fe52ae013a36014be506fd1fa93}{IMD\_Check\_Uptime}}(uint8\_t\ Data[])\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00530}00530\ \ \ \ \ \textcolor{comment}{//\ TODO}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00531}00531\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00532}00532\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00533}\mbox{\hyperlink{imd_8h_a80b26177d8aa0c0e803fac210eb456ac}{00533}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a80b26177d8aa0c0e803fac210eb456ac}{IMD\_Startup}}()\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00534}00534\ \ \ \ \ \textcolor{comment}{//\ TODO}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00535}00535\ \ \ \ \ \textcolor{comment}{//\ Run\ check\ for\ serial\ number,\ max\ voltage,\ and\ such}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00536}00536\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00537}00537\ \ \ \ \ \textcolor{comment}{//\ The\ first\ check\ is\ the\ serial\ number}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00538}00538\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00539}00539\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea453d45b6245737d4987dd4b78a2e464a}{Serial\_number\_0}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00540}00540\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea29cf9ca0d526194e6ce71ff99120ee9e}{Serial\_number\_1}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00541}00541\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea87fc8ea63ac933e1e441f105dce28cdb}{Serial\_number\_2}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00542}00542\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eaf9d06047340a1a4185e714ca761f891e}{Serial\_number\_3}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00543}00543\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00544}00544\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea5eb2adcd1cb7d65f6c590b6f6b7ee322}{Version\_0}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00545}00545\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eafcc458d57f1b3273ae319230922231a4}{Version\_1}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00546}00546\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674eafb60bb95154ac28254f2e8dfbc82c638}{Version\_2}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00547}00547\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00548}00548\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea9f7942276dd9e12e41f0463701086e7d}{Part\_name\_0}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00549}00549\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea6172e87521e48caf627c729daa8b6f59}{Part\_name\_1}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00550}00550\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea98d7a9f4550631a81ea2c5a4a215a981}{Part\_name\_2}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00551}00551\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a975959819df682c9adec7c667028674ea086d70441c24f02a8abceeee41562cde}{Part\_name\_3}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00552}00552\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00553}00553\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aa194e665f65c42e02190f2871ecfd3eed}{Max\_battery\_working\_voltage}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00554}00554\ \ \ \ \ \mbox{\hyperlink{imd_8c_aeb7c937639c5385f5d2b4e3a4e60250f}{IMD\_Request\_Status}}(\mbox{\hyperlink{imd_8h_a0710286ee4b87e83845bd90c76e5c26aabbce6aa84dd484b90a148c9893f29c38}{isolation\_state}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00555}00555\ \ \ \ \ \textcolor{comment}{//\ Can\ check\ further\ things}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00556}00556\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00557}00557\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00558}00558\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00559}\mbox{\hyperlink{imd_8h_a19b4fd879f065cfe6e1b7bb3400cd0c3}{00559}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{imd_8c_a19b4fd879f065cfe6e1b7bb3400cd0c3}{initIMD}}(\textcolor{keywordtype}{void}*\ args)\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00560}00560\ \ \ \ \ \mbox{\hyperlink{structuv__init__task__args}{uv\_init\_task\_args}}*\ params\ =\ (\mbox{\hyperlink{structuv__init__task__args}{uv\_init\_task\_args}}*)\ args;}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00561}00561\ \ \ \ \ \mbox{\hyperlink{structuv__init__task__response}{uv\_init\_task\_response}}\ response\ =\ \{\mbox{\hyperlink{uvfr__utils_8h_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9}{UV\_OK}},\mbox{\hyperlink{uvfr__utils_8h_ad70cbc8929c4ad7a5901cd9eef5ca9b0a8c41c05a63a15c5d188d02f6f4db4303}{IMD}},0,NULL\};}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00562}00562\ \ \ \ \ \mbox{\hyperlink{task_8h_aa154068cecd7f31446a7a84af44ab1a3}{vTaskDelay}}(100);\ \textcolor{comment}{//Pretend\ to\ be\ doing\ something\ for\ now}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00563}00563\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00564}00564\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{queue_8h_a81d24a2c1199d58efb76fbee15853112}{xQueueSendToBack}}(params-\/>\mbox{\hyperlink{structuv__init__task__args_adec47e7a54822cacfb8fcfc35a22157f}{init\_info\_queue}},\&response,100)\ !=\ \mbox{\hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS}})\{}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00565}00565\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//OOPS}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00566}00566\ \ \ \ \ \ \ \ \ uvPanic(\textcolor{stringliteral}{"{}Failed\ to\ enqueue\ IMD\ OK\ Response"{}},0);}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00567}00567\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00568}00568\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00569}00569\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00570}00570\ \ \ \ \ \mbox{\hyperlink{task_8h_a84d4e660b04630be2939d91b3c2412f8}{vTaskSuspend}}(params-\/>\mbox{\hyperlink{structuv__init__task__args_a3b81430245e7f832dc1112e53b0ef7ad}{meta\_task\_handle}});}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00571}00571\ \}}
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00572}00572\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00573}00573\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00574}00574\ }
\DoxyCodeLine{\Hypertarget{imd_8c_source_l00575}00575\ }

\end{DoxyCode}
