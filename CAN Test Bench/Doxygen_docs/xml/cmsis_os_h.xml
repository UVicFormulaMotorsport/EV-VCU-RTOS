<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.12.0" xml:lang="en-US">
  <compounddef id="cmsis_os_h" kind="page">
    <compoundname>cmsis_os_h</compoundname>
    <title>Header File Template: cmsis_os.h</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>The file <bold><ref refid="cmsis__os_8h" kindref="compound">cmsis_os.h</ref></bold> is a template header file for a CMSIS-RTOS compliant Real-Time Operating System (RTOS). Each RTOS that is compliant with CMSIS-RTOS shall provide a specific <bold><ref refid="cmsis__os_8h" kindref="compound">cmsis_os.h</ref></bold> header file that represents its implementation.</para>
<para>The file <ref refid="cmsis__os_8h" kindref="compound">cmsis_os.h</ref> contains:<itemizedlist>
<listitem><para>CMSIS-RTOS API function definitions</para>
</listitem><listitem><para>struct definitions for parameters and return types</para>
</listitem><listitem><para>status and priority values used by CMSIS-RTOS API functions</para>
</listitem><listitem><para>macros for defining threads and other kernel objects</para>
</listitem></itemizedlist>
</para>
<para><bold>Name conventions and header file modifications</bold></para>
<para>All definitions are prefixed with <bold>os</bold> to give an unique name space for CMSIS-RTOS functions. Definitions that are prefixed <bold>os_</bold> are not used in the application code but local to this header file. All definitions and functions that belong to a module are grouped and have a common prefix, i.e. <bold>osThread</bold>.</para>
<para>Definitions that are marked with <bold>CAN BE CHANGED</bold> can be adapted towards the needs of the actual CMSIS-RTOS implementation. These definitions can be specific to the underlying RTOS kernel.</para>
<para>Definitions that are marked with <bold>MUST REMAIN UNCHANGED</bold> cannot be altered. Otherwise the CMSIS-RTOS implementation is no longer compliant to the standard. Note that some functions are optional and need not to be provided by every CMSIS-RTOS implementation.</para>
<para><bold>Function calls from interrupt service routines</bold></para>
<para>The following CMSIS-RTOS functions can be called from threads and interrupt service routines (ISR):<itemizedlist>
<listitem><para><ref refid="cmsis__os_8c_1a029340f7007656c06fdb8eeeae7b056e" kindref="member">osSignalSet</ref></para>
</listitem><listitem><para><ref refid="cmsis__os_8c_1ab108914997c49e14d8ff1ae0d1988ca0" kindref="member">osSemaphoreRelease</ref></para>
</listitem><listitem><para><ref refid="cmsis__os_8c_1aa0b2994f1a866c19e0d11e6e0d44f543" kindref="member">osPoolAlloc</ref>, <ref refid="cmsis__os_8c_1a9f129fcad4730fbd1048ad4fa262f36a" kindref="member">osPoolCAlloc</ref>, <ref refid="cmsis__os_8c_1a4a861e9c469c9d0daf5721bf174f8e54" kindref="member">osPoolFree</ref></para>
</listitem><listitem><para><ref refid="cmsis__os_8c_1ac0dcf462fc92de8ffaba6cc004514a6d" kindref="member">osMessagePut</ref>, <ref refid="cmsis__os_8c_1a6c6892b8f2296cca6becd57ca2d7e1ae" kindref="member">osMessageGet</ref></para>
</listitem><listitem><para><ref refid="cmsis__os_8c_1adf5ce811bd6a56e617e902a1db6c2194" kindref="member">osMailAlloc</ref>, <ref refid="cmsis__os_8c_1a8fde74f6fe5b9e88f75cc5eb8f2124fd" kindref="member">osMailCAlloc</ref>, <ref refid="cmsis__os_8c_1ac6ad7e6e7d6c4a80e60da22c57a42ccd" kindref="member">osMailGet</ref>, <ref refid="cmsis__os_8c_1a485ef6f81854ebda8ffbce4832181e02" kindref="member">osMailPut</ref>, <ref refid="cmsis__os_8c_1a27c1060cf21393f96b4fd1ed1c0167cc" kindref="member">osMailFree</ref></para>
</listitem></itemizedlist>
</para>
<para>Functions that cannot be called from an ISR are verifying the interrupt status and return in case that they are called from an ISR context the status code <bold>osErrorISR</bold>. In some implementations this condition might be caught using the HARD FAULT vector.</para>
<para>Some CMSIS-RTOS implementations support CMSIS-RTOS function calls from multiple ISR at the same time. If this is impossible, the CMSIS-RTOS rejects calls by nested ISR functions with the status code <bold>osErrorISRRecursive</bold>.</para>
<para><bold>Define and reference object definitions</bold></para>
<para>With <bold>#define osObjectsExternal</bold> objects are defined as external symbols. This allows to create a consistent header file that is used throughout a project as shown below:</para>
<para><emphasis>Header File</emphasis> <programlisting><codeline><highlight class="preprocessor">#include<sp/>&lt;<ref refid="cmsis__os_8h" kindref="compound">cmsis_os.h</ref>&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>CMSIS<sp/>RTOS<sp/>header<sp/>file</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>Thread<sp/>definition</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>thread_sample<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*argument);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>function<sp/>prototype</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="cmsis__os_8h_1a1537e80813785bebbc3cbab3226eb04f" kindref="member">osThreadDef</ref><sp/>(thread_sample,<sp/><ref refid="cmsis__os_8h_1a7f2b42f1983b9107775ec2a1c69a849aa193b650117c209b4a203954542bcc3e6" kindref="member">osPriorityBelowNormal</ref>,<sp/>1,<sp/>100);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>Pool<sp/>definition</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="cmsis__os_8h_1a87b471d4fe2d5dbd0040708edd52771b" kindref="member">osPoolDef</ref>(MyPool,<sp/>10,<sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal">);</highlight></codeline>
</programlisting></para>
<para>This header file defines all objects when included in a C/C++ source file. When <bold>#define osObjectsExternal</bold> is present before the header file, the objects are defined as external symbols. A single consistent header file can therefore be used throughout the whole project.</para>
<para><emphasis>Example</emphasis> <programlisting><codeline><highlight class="preprocessor">#include<sp/>&quot;osObjects.h&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Definition<sp/>of<sp/>the<sp/>CMSIS-RTOS<sp/>objects</highlight></codeline>
</programlisting></para>
<para><programlisting><codeline><highlight class="preprocessor">#define<sp/>osObjectExternal<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Objects<sp/>will<sp/>be<sp/>defined<sp/>as<sp/>external<sp/>symbols</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;osObjects.h&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reference<sp/>to<sp/>the<sp/>CMSIS-RTOS<sp/>objects</highlight></codeline>
</programlisting> </para>
    </detaileddescription>
    <location file="Core/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"/>
  </compounddef>
</doxygen>
