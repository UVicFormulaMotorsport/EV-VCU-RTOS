<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.12.0" xml:lang="en-US">
  <compounddef id="uvfr__state__engine_8c" kind="file" language="C++">
    <compoundname>uvfr_state_engine.c</compoundname>
    <includes refid="uvfr__utils_8h" local="yes">uvfr_utils.h</includes>
    <incdepgraph>
      <node id="34">
        <label>cmsis_os.h</label>
        <link refid="cmsis__os_8h"/>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="35" relation="include">
        </childnode>
        <childnode refid="32" relation="include">
        </childnode>
        <childnode refid="33" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
        <childnode refid="36" relation="include">
        </childnode>
      </node>
      <node id="15">
        <label>freeRTOS.h</label>
        <link refid="_free_r_t_o_s_8h"/>
        <childnode refid="16" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
        <childnode refid="20" relation="include">
        </childnode>
      </node>
      <node id="18">
        <label>FreeRTOSConfig.h</label>
        <link refid="_free_r_t_o_s_config_8h"/>
      </node>
      <node id="21">
        <label>deprecated_definitions.h</label>
        <link refid="deprecated__definitions_8h"/>
      </node>
      <node id="35">
        <label>event_groups.h</label>
        <link refid="event__groups_8h"/>
        <childnode refid="36" relation="include">
        </childnode>
      </node>
      <node id="31">
        <label>list.h</label>
        <link refid="list_8h"/>
      </node>
      <node id="37">
        <label>message_buffer.h</label>
        <link refid="message__buffer_8h"/>
        <childnode refid="38" relation="include">
        </childnode>
      </node>
      <node id="24">
        <label>mpu_wrappers.h</label>
        <link refid="mpu__wrappers_8h"/>
      </node>
      <node id="20">
        <label>portable.h</label>
        <link refid="portable_8h"/>
        <childnode refid="21" relation="include">
        </childnode>
        <childnode refid="22" relation="include">
        </childnode>
        <childnode refid="24" relation="include">
        </childnode>
      </node>
      <node id="19">
        <label>projdefs.h</label>
        <link refid="projdefs_8h"/>
      </node>
      <node id="32">
        <label>queue.h</label>
        <link refid="queue_8h"/>
        <childnode refid="30" relation="include">
        </childnode>
      </node>
      <node id="33">
        <label>semphr.h</label>
        <link refid="semphr_8h"/>
        <childnode refid="32" relation="include">
        </childnode>
      </node>
      <node id="38">
        <label>stream_buffer.h</label>
        <link refid="stream__buffer_8h"/>
      </node>
      <node id="30">
        <label>task.h</label>
        <link refid="task_8h"/>
        <childnode refid="31" relation="include">
        </childnode>
      </node>
      <node id="36">
        <label>timers.h</label>
        <link refid="timers_8h"/>
        <childnode refid="30" relation="include">
        </childnode>
      </node>
      <node id="22">
        <label>portmacro.h</label>
        <link refid="portmacro_8h"/>
        <childnode refid="23" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>adc.h</label>
        <link refid="adc_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="28">
        <label>bms.h</label>
        <link refid="bms_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>can.h</label>
        <link refid="can_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>constants.h</label>
        <link refid="constants_8h"/>
      </node>
      <node id="26">
        <label>daq.h</label>
        <link refid="daq_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="27" relation="include">
        </childnode>
      </node>
      <node id="42">
        <label>dash.h</label>
        <link refid="dash_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>dma.h</label>
        <link refid="dma_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="25">
        <label>driving_loop.h</label>
        <link refid="driving__loop_8h"/>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="12">
        <label>gpio.h</label>
        <link refid="gpio_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="43">
        <label>imd.h</label>
        <link refid="imd_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>main.h</label>
        <link refid="main_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="14">
        <label>motor_controller.h</label>
        <link refid="motor__controller_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="48">
        <label>odometer.h</label>
        <link refid="odometer_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="44">
        <label>pdu.h</label>
        <link refid="pdu_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="27">
        <label>rb_tree.h</label>
        <link refid="rb__tree_8h"/>
      </node>
      <node id="47">
        <label>temp_monitoring.h</label>
        <link refid="temp__monitoring_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>tim.h</label>
        <link refid="tim_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="45">
        <label>uvfr_conifer.h</label>
        <link refid="uvfr__conifer_8h"/>
        <childnode refid="23" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
      </node>
      <node id="39">
        <label>uvfr_diagnostics.h</label>
        <link refid="uvfr__diagnostics_8h"/>
        <childnode refid="40" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>uvfr_global_config.h</label>
        <link refid="uvfr__global__config_8h"/>
      </node>
      <node id="13">
        <label>uvfr_settings.h</label>
        <link refid="uvfr__settings_8h"/>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="26" relation="include">
        </childnode>
        <childnode refid="28" relation="include">
        </childnode>
      </node>
      <node id="29">
        <label>uvfr_state_engine.h</label>
        <link refid="uvfr__state__engine_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
        <childnode refid="32" relation="include">
        </childnode>
        <childnode refid="33" relation="include">
        </childnode>
        <childnode refid="34" relation="include">
        </childnode>
        <childnode refid="37" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>uvfr_utils.h</label>
        <link refid="uvfr__utils_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="29" relation="include">
        </childnode>
        <childnode refid="39" relation="include">
        </childnode>
        <childnode refid="27" relation="include">
        </childnode>
        <childnode refid="41" relation="include">
        </childnode>
        <childnode refid="28" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="42" relation="include">
        </childnode>
        <childnode refid="43" relation="include">
        </childnode>
        <childnode refid="44" relation="include">
        </childnode>
        <childnode refid="26" relation="include">
        </childnode>
        <childnode refid="45" relation="include">
        </childnode>
        <childnode refid="46" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
        <childnode refid="47" relation="include">
        </childnode>
        <childnode refid="48" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="23" relation="include">
        </childnode>
        <childnode refid="34" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="37" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
      </node>
      <node id="41">
        <label>uvfr_vehicle_commands.h</label>
        <link refid="uvfr__vehicle__commands_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="46">
        <label>uvfr_vehicle_logger.h</label>
        <link refid="uvfr__vehicle__logger_8h"/>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="29" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>Core/Src/uvfr_state_engine.c</label>
        <link refid="uvfr__state__engine_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>stdarg.h</label>
      </node>
      <node id="16">
        <label>stddef.h</label>
      </node>
      <node id="17">
        <label>stdint.h</label>
      </node>
      <node id="23">
        <label>stdlib.h</label>
      </node>
      <node id="5">
        <label>stm32f4xx_hal.h</label>
      </node>
      <node id="40">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="structstate__change__daemon__args" prot="public">state_change_daemon_args</innerclass>
    <sectiondef kind="define">
      <memberdef kind="define" id="uvfr__state__engine_8c_1a6cd439d1fb18334cd13cf3539aebca5c" prot="public" static="no">
        <name>UVFR_STATE_MACHINE_IMPLIMENTATION</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/uvfr_state_engine.c" line="1" column="9" bodyfile="Core/Src/uvfr_state_engine.c" bodystart="1" bodyend="-1"/>
      </memberdef>
      <member refid="group__state__engine_1ga8a80fe70c2d06583bbcd00c5162860c5" kind="define"><name>MAX_NUM_MANAGED_TASKS</name></member>
    </sectiondef>
    <sectiondef kind="typedef">
      <member refid="group__state__engine_1gac9bd88d7c454ec151183930fce544c9c" kind="typedef"><name>state_change_daemon_args</name></member>
    </sectiondef>
    <sectiondef kind="var">
      <member refid="group__state__engine_1gace30759073ddac097d29f042acc4142d" kind="variable"><name>xHeapStats</name></member>
      <member refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kind="variable"><name>_next_task_id</name></member>
      <member refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kind="variable"><name>_task_register</name></member>
      <member refid="group__state__engine_1gac5868023f8ec284bd14c50db7a815e78" kind="variable"><name>last_task_start_times</name></member>
      <member refid="group__state__engine_1ga0ae08e3e5e1cb6e0228da97c7e4326e0" kind="variable"><name>last_task_end_times</name></member>
      <member refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kind="variable"><name>task_tardiness</name></member>
      <member refid="group__state__engine_1gae48b13e362d2b9d10ec61f516ea5c09f" kind="variable"><name>_next_svc_task_id</name></member>
      <member refid="group__state__engine_1gac204f3b14ce9bf370b2e5477dc87afea" kind="variable"><name>scd_handle_ptr</name></member>
      <member refid="group__state__engine_1gaa11ee7595fe2da14c5949195824179af" kind="variable"><name>SCD_active</name></member>
      <member refid="group__state__engine_1ga23b0c19ff219812065d876d2daaa26fd" kind="variable"><name>throttle_daq</name></member>
      <member refid="group__state__engine_1ga6f4abbac22d8261c588c551b1d153ef6" kind="variable"><name>nc_throttling</name></member>
      <member refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kind="variable"><name>state_change_queue</name></member>
      <member refid="group__state__engine_1ga168524a5d658247db44217e643b6396f" kind="variable"><name>task_name_lut</name></member>
      <member refid="group__state__engine_1gad05ab0da0046c01c52191148bbd0c36d" kind="variable"><name>error_bitfield</name></member>
      <member refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kind="variable"><name>vehicle_state</name></member>
      <member refid="group__state__engine_1ga2ce6eef16a78c095592954d2fe68af2e" kind="variable"><name>previous_state</name></member>
      <member refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kind="variable"><name>task_manager</name></member>
      <member refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kind="variable"><name>svc_task_manager</name></member>
      <member refid="group__state__engine_1gaaed35d33599a21d98d0500c5f0a1385a" kind="variable"><name>task_name_tree</name></member>
      <member refid="group__state__engine_1ga026f8ea8b80f88c90cb35e3ec3588237" kind="variable"><name>os_settings</name></member>
      <member refid="group__state__engine_1gad9e02be6d2d0bc1ab5cd9fd8cae34230" kind="variable"><name>default_os_settings</name></member>
      <member refid="group__state__engine__backend_1ga321624ab262c6eeb560495e0e4833966" kind="variable"><name>is_can_ok</name></member>
      <memberdef kind="variable" id="uvfr__state__engine_8c_1a2dd1013c5ef8f355ac2f1479e36ec659" prot="public" static="yes" mutable="no">
        <type><ref refid="_free_r_t_o_s_8h_1af0002e4ad72220b34b95fcdf43bcd82d" kindref="member">StaticTask_t</ref></type>
        <definition>StaticTask_t xIdleTaskTCBBuffer</definition>
        <argsstring></argsstring>
        <name>xIdleTaskTCBBuffer</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/uvfr_state_engine.c" line="1517" column="21" bodyfile="Core/Src/uvfr_state_engine.c" bodystart="1517" bodyend="-1"/>
        <referencedby refid="uvfr__state__engine_8c_1a1988aa923b19fa6f31c93afa7773f793" compoundref="uvfr__state__engine_8c" startline="1520" endline="1526">vApplicationGetIdleTaskMemory</referencedby>
      </memberdef>
      <memberdef kind="variable" id="uvfr__state__engine_8c_1af311b04396149ce536fe1a3b5f127445" prot="public" static="yes" mutable="no">
        <type><ref refid="portmacro_8h_1a84e9a8ba132feed0b2401c1f4e2ac63c" kindref="member">StackType_t</ref></type>
        <definition>StackType_t xIdleStack[configMINIMAL_STACK_SIZE]</definition>
        <argsstring>[configMINIMAL_STACK_SIZE]</argsstring>
        <name>xIdleStack</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/uvfr_state_engine.c" line="1518" column="20" bodyfile="Core/Src/uvfr_state_engine.c" bodystart="1518" bodyend="-1"/>
        <referencedby refid="uvfr__state__engine_8c_1a1988aa923b19fa6f31c93afa7773f793" compoundref="uvfr__state__engine_8c" startline="1520" endline="1526">vApplicationGetIdleTaskMemory</referencedby>
      </memberdef>
      <memberdef kind="variable" id="uvfr__state__engine_8c_1a38d479dc434b1716ec493c97d862680e" prot="public" static="yes" mutable="no">
        <type><ref refid="_free_r_t_o_s_8h_1af0002e4ad72220b34b95fcdf43bcd82d" kindref="member">StaticTask_t</ref></type>
        <definition>StaticTask_t xTimerTaskTCBBuffer</definition>
        <argsstring></argsstring>
        <name>xTimerTaskTCBBuffer</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/uvfr_state_engine.c" line="1528" column="21" bodyfile="Core/Src/uvfr_state_engine.c" bodystart="1528" bodyend="-1"/>
        <referencedby refid="uvfr__state__engine_8c_1a1e80ecbd3fc2d04f18d6409ffa893a86" compoundref="uvfr__state__engine_8c" startline="1531" endline="1537">vApplicationGetTimerTaskMemory</referencedby>
      </memberdef>
      <memberdef kind="variable" id="uvfr__state__engine_8c_1ac4bbf08a713d317769fd40e9474a279b" prot="public" static="yes" mutable="no">
        <type><ref refid="portmacro_8h_1a84e9a8ba132feed0b2401c1f4e2ac63c" kindref="member">StackType_t</ref></type>
        <definition>StackType_t xTimerStack[configTIMER_TASK_STACK_DEPTH]</definition>
        <argsstring>[configTIMER_TASK_STACK_DEPTH]</argsstring>
        <name>xTimerStack</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/uvfr_state_engine.c" line="1529" column="20" bodyfile="Core/Src/uvfr_state_engine.c" bodystart="1529" bodyend="-1"/>
        <referencedby refid="uvfr__state__engine_8c_1a1e80ecbd3fc2d04f18d6409ffa893a86" compoundref="uvfr__state__engine_8c" startline="1531" endline="1537">vApplicationGetTimerTaskMemory</referencedby>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <member refid="group__state__engine_1gab8a03e5812e395199b3b0003cd8266cb" kind="function"><name>killEmAll</name></member>
      <member refid="group__state__engine_1gaff684308203d45e9e16ad3d115c54279" kind="function"><name>uvSVCTaskManager</name></member>
      <member refid="group__state__engine_1gaf2dbdd0d9d9aa8bcbef120661117fc5e" kind="function"><name>uvTaskManager</name></member>
      <member refid="group__state__engine_1ga9f31832194c2c9dddce43bf53eb86d5b" kind="function"><name>compareTaskByName</name></member>
      <member refid="group__state__engine__api_1gaa3ad3e8df75177c00265881c16563212" kind="function"><name>changeVehicleState</name></member>
      <member refid="group__state__engine__api_1ga2cef5ea1ce8c53aae9a3508d4c23ceeb" kind="function"><name>initRTDtask</name></member>
      <member refid="group__state__engine__api_1ga5c608f3832c45eac6e2da198d4ef1ba0" kind="function"><name>uvInitStateEngine</name></member>
      <member refid="group__state__engine__api_1ga6ef6aecf05463ae84b5968fd17583cc9" kind="function"><name>uvCrashIntoWall</name></member>
      <member refid="group__state__engine__api_1ga2ad1d74b5783a51355c047be6642fab8" kind="function"><name>uvStartStateMachine</name></member>
      <member refid="group__state__engine__api_1ga5cb739823b10b90a139315356aa6b22f" kind="function"><name>uvDeInitStateEngine</name></member>
      <member refid="group__state__engine__api_1gac977eb33c99a9ac0a5f51a7db20e24d6" kind="function"><name>uvCreateTask</name></member>
      <member refid="group__state__engine__backend_1ga8e41e95f69723171fab38aba3b00a091" kind="function"><name>addTaskToTaskRegister</name></member>
      <member refid="group__state__engine__backend_1gaf342326f88e8accc1efa35e02cdd6c37" kind="function"><name>_uvValidateSpecificTask</name></member>
      <member refid="group__state__engine__backend_1ga8c1618caac0d7f29836107f1a44833e8" kind="function"><name>uvValidateManagedTasks</name></member>
      <member refid="group__state__engine__backend_1ga15cdf09b5625c2ba29a6c6d5c96214dc" kind="function"><name>uvStartTask</name></member>
      <member refid="group__state__engine__backend_1gae0caac28206291f3dc5c416f11892edd" kind="function"><name>uvKillTaskViolently</name></member>
      <member refid="group__state__engine__backend_1ga6291142ec714ce1450099943b1b8d00a" kind="function"><name>uvDeleteTask</name></member>
      <member refid="group__state__engine__backend_1ga40d4bc9be9f3b81c51aef7ed7c37172f" kind="function"><name>uvAbortTaskDeletion</name></member>
      <member refid="group__state__engine__backend_1ga3ef71d11e9525846568eadac11c7e8e4" kind="function"><name>uvScheduleTaskDeletion</name></member>
      <member refid="group__state__engine__backend_1gafd67eecbab2e6e6915bc6bc71806b715" kind="function"><name>uvSuspendTask</name></member>
      <member refid="group__state__engine__backend_1gac1a1157d12026b20c6bbb5542c9f7efb" kind="function"><name>uvTaskCrashHandler</name></member>
      <member refid="group__state__engine__backend_1ga6d712c440ee3ae92eae5d820f4745eb9" kind="function"><name>__uvPanic</name></member>
      <member refid="group__state__engine__backend_1ga5f35b34432afed7f18f91fb8607f096f" kind="function"><name>killSelf</name></member>
      <member refid="group__state__engine__backend_1gad6117850b55ad52be51d93915bcc313c" kind="function"><name>suspendSelf</name></member>
      <member refid="group__state__engine__backend_1ga2e8a31626909ac17be499f2941d359d0" kind="function"><name>proccessSCDMsg</name></member>
      <member refid="group__state__engine__backend_1ga2c151c9ece181329cf95d74d80c53411" kind="function"><name>uvSendTaskStatusReport</name></member>
      <member refid="group__state__engine__backend_1ga8519c96858b096f2fccb96d3334df93a" kind="function"><name>_stateChangeDaemon</name></member>
      <member refid="group__state__engine__backend_1gace2b4c6c8f012fb6650049e5272b88e4" kind="function"><name>uvThrottleNonCritTasks</name></member>
      <member refid="group__state__engine__backend_1ga7dff9a1c0653941c1559398025cdec4c" kind="function"><name>uvLateTaskHandler</name></member>
      <member refid="group__state__engine__backend_1ga43cdd5f23929fee4ba86d4fd0b60d6ad" kind="function"><name>uvCreateServiceTask</name></member>
      <member refid="group__state__engine__backend_1ga91b9f84bc63d5808a3f70623ed8a0700" kind="function"><name>uvStartSVCTask</name></member>
      <member refid="group__state__engine__backend_1ga87455110c1a898b9294c66c14043f02a" kind="function"><name>uvSuspendSVCTask</name></member>
      <member refid="group__state__engine__backend_1ga02ceb2f70d4474d4734de6494aca8978" kind="function"><name>uvDeleteSVCTask</name></member>
      <member refid="group__state__engine__backend_1gad930776c44487128dbb60294a66a68e3" kind="function"><name>uvRestartSVCTask</name></member>
      <member refid="group__state__engine__backend_1ga6edf594e7dcaaa6397384eadfbe0e984" kind="function"><name>uvGetTaskFromName</name></member>
      <member refid="group__state__engine__backend_1ga35ebd76bbdf6f6d800a0ee2f5c5b1253" kind="function"><name>uvGetTaskFromRTOSHandle</name></member>
      <member refid="group__state__engine_1ga0e6167ef18c2ec8b65fbe070d0ffb6c9" kind="function"><name>uvTaskPeriodEnd</name></member>
      <memberdef kind="function" id="uvfr__state__engine_8c_1aed09350c45d767229fd9e382244de3f1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>__weak void</type>
        <definition>__weak void vApplicationIdleHook</definition>
        <argsstring>(void)</argsstring>
        <name>vApplicationIdleHook</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>Function that will be called if the enable idle task hook is called. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/uvfr_state_engine.c" line="1512" column="13" bodyfile="Core/Src/uvfr_state_engine.c" bodystart="1512" bodyend="1515"/>
        <referencedby refid="tasks_8c_1a36c7cc58985d41c2cb1b263563dbbaa1" compoundref="tasks_8c" startline="3391" endline="3505">portTASK_FUNCTION</referencedby>
      </memberdef>
      <memberdef kind="function" id="uvfr__state__engine_8c_1a1988aa923b19fa6f31c93afa7773f793" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void vApplicationGetIdleTaskMemory</definition>
        <argsstring>(StaticTask_t **ppxIdleTaskTCBBuffer, StackType_t **ppxIdleTaskStackBuffer, uint32_t *pulIdleTaskStackSize)</argsstring>
        <name>vApplicationGetIdleTaskMemory</name>
        <param>
          <type><ref refid="_free_r_t_o_s_8h_1af0002e4ad72220b34b95fcdf43bcd82d" kindref="member">StaticTask_t</ref> **</type>
          <declname>ppxIdleTaskTCBBuffer</declname>
        </param>
        <param>
          <type><ref refid="portmacro_8h_1a84e9a8ba132feed0b2401c1f4e2ac63c" kindref="member">StackType_t</ref> **</type>
          <declname>ppxIdleTaskStackBuffer</declname>
        </param>
        <param>
          <type>uint32_t *</type>
          <declname>pulIdleTaskStackSize</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/uvfr_state_engine.c" line="1520" column="6" bodyfile="Core/Src/uvfr_state_engine.c" bodystart="1520" bodyend="1526"/>
        <references refid="_free_r_t_o_s_config_8h_1a6c534a6cf8a00528fe0be42083484f9a" compoundref="_free_r_t_o_s_config_8h" startline="27">configMINIMAL_STACK_SIZE</references>
        <references refid="uvfr__state__engine_8c_1af311b04396149ce536fe1a3b5f127445" compoundref="uvfr__state__engine_8c" startline="1518">xIdleStack</references>
        <references refid="uvfr__state__engine_8c_1a2dd1013c5ef8f355ac2f1479e36ec659" compoundref="uvfr__state__engine_8c" startline="1517">xIdleTaskTCBBuffer</references>
        <referencedby refid="task_8h_1aaf9dca1065c60abdeb309d56ab7293cb" compoundref="tasks_8c" startline="1974" endline="2095">vTaskStartScheduler</referencedby>
      </memberdef>
      <memberdef kind="function" id="uvfr__state__engine_8c_1a1e80ecbd3fc2d04f18d6409ffa893a86" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void vApplicationGetTimerTaskMemory</definition>
        <argsstring>(StaticTask_t **ppxTimerTaskTCBBuffer, StackType_t **ppxTimerTaskStackBuffer, uint32_t *pulTimerTaskStackSize)</argsstring>
        <name>vApplicationGetTimerTaskMemory</name>
        <param>
          <type><ref refid="_free_r_t_o_s_8h_1af0002e4ad72220b34b95fcdf43bcd82d" kindref="member">StaticTask_t</ref> **</type>
          <declname>ppxTimerTaskTCBBuffer</declname>
        </param>
        <param>
          <type><ref refid="portmacro_8h_1a84e9a8ba132feed0b2401c1f4e2ac63c" kindref="member">StackType_t</ref> **</type>
          <declname>ppxTimerTaskStackBuffer</declname>
        </param>
        <param>
          <type>uint32_t *</type>
          <declname>pulTimerTaskStackSize</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/uvfr_state_engine.c" line="1531" column="6" bodyfile="Core/Src/uvfr_state_engine.c" bodystart="1531" bodyend="1537"/>
        <references refid="_free_r_t_o_s_config_8h_1aed7c7ebcdee603583a55e8ce04e55841" compoundref="_free_r_t_o_s_config_8h" startline="58">configTIMER_TASK_STACK_DEPTH</references>
        <references refid="uvfr__state__engine_8c_1ac4bbf08a713d317769fd40e9474a279b" compoundref="uvfr__state__engine_8c" startline="1529">xTimerStack</references>
        <references refid="uvfr__state__engine_8c_1a38d479dc434b1716ec493c97d862680e" compoundref="uvfr__state__engine_8c" startline="1528">xTimerTaskTCBBuffer</references>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="uvfr__state__engine_8c_1a6cd439d1fb18334cd13cf3539aebca5c" refkind="member"><highlight class="preprocessor">#define<sp/>UVFR_STATE_MACHINE_IMPLIMENTATION</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="uvfr__utils_8h" kindref="compound">uvfr_utils.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">//#include<sp/>&quot;assert.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="11" refid="group__state__engine_1ga8a80fe70c2d06583bbcd00c5162860c5" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MAX_NUM_MANAGED_TASKS<sp/>16</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13" refid="group__state__engine_1gace30759073ddac097d29f042acc4142d" refkind="member"><highlight class="normal"><ref refid="structx_heap_stats" kindref="compound">HeapStats_t</ref><sp/><ref refid="group__state__engine_1gace30759073ddac097d29f042acc4142d" kindref="member">xHeapStats</ref>;</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="comment">//Stores<sp/>the<sp/>actual<sp/>task<sp/>info</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16" refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="uvfr__state__engine_8h_1aa6ffd72eb4909ddb38c37a1369e13f09" kindref="member">uv_task_id</ref><sp/><ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="17" refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/><ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19" refid="group__state__engine_1gac5868023f8ec284bd14c50db7a815e78" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref>*<sp/><ref refid="group__state__engine_1gac5868023f8ec284bd14c50db7a815e78" kindref="member">last_task_start_times</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="20" refid="group__state__engine_1ga0ae08e3e5e1cb6e0228da97c7e4326e0" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref>*<sp/><ref refid="group__state__engine_1ga0ae08e3e5e1cb6e0228da97c7e4326e0" kindref="member">last_task_end_times</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="21" refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" refkind="member"><highlight class="normal">uint8_t*<sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23" refid="group__state__engine_1gae48b13e362d2b9d10ec61f516ea5c09f" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="uvfr__state__engine_8h_1aa6ffd72eb4909ddb38c37a1369e13f09" kindref="member">uv_task_id</ref><sp/><ref refid="group__state__engine_1gae48b13e362d2b9d10ec61f516ea5c09f" kindref="member">_next_svc_task_id</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="comment">//static<sp/>uv_task_info*<sp/>_svc_task_register<sp/>=<sp/>NULL;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26" refid="group__state__engine_1gac204f3b14ce9bf370b2e5477dc87afea" refkind="member"><highlight class="normal"><ref refid="structtsk_task_control_block" kindref="compound">TaskHandle_t</ref>*<sp/><ref refid="group__state__engine_1gac204f3b14ce9bf370b2e5477dc87afea" kindref="member">scd_handle_ptr</ref>;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29" refid="group__state__engine_1gaa11ee7595fe2da14c5949195824179af" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1gaa11ee7595fe2da14c5949195824179af" kindref="member">SCD_active</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="30" refid="group__state__engine_1ga23b0c19ff219812065d876d2daaa26fd" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1ga23b0c19ff219812065d876d2daaa26fd" kindref="member">throttle_daq</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="31" refid="group__state__engine_1ga6f4abbac22d8261c588c551b1d153ef6" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">volatile</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1ga6f4abbac22d8261c588c551b1d153ef6" kindref="member">nc_throttling</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="32" refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="struct_queue_definition" kindref="compound">QueueHandle_t</ref><sp/><ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="group__state__engine_1ga168524a5d658247db44217e643b6396f" refkind="member"><highlight class="normal"><ref refid="structrbtree" kindref="compound">rbtree</ref>*<sp/><ref refid="group__state__engine_1ga168524a5d658247db44217e643b6396f" kindref="member">task_name_lut</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="36" refid="group__state__engine_1gad05ab0da0046c01c52191148bbd0c36d" refkind="member"><highlight class="normal">uint32_t<sp/><ref refid="group__state__engine_1gad05ab0da0046c01c52191148bbd0c36d" kindref="member">error_bitfield</ref>[4];</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38" refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__api_1ga259abff5a03eaf908dc8f03d99f478e4" kindref="member">uv_vehicle_state_t</ref><sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1gga259abff5a03eaf908dc8f03d99f478e4afdfc4cdb8c5210e05bdfdc3df51f80ff" kindref="member">UV_BOOT</ref>;</highlight></codeline>
<codeline lineno="39" refid="group__state__engine_1ga2ce6eef16a78c095592954d2fe68af2e" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__api_1ga259abff5a03eaf908dc8f03d99f478e4" kindref="member">uv_vehicle_state_t</ref><sp/><ref refid="group__state__engine_1ga2ce6eef16a78c095592954d2fe68af2e" kindref="member">previous_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1gga259abff5a03eaf908dc8f03d99f478e4afdfc4cdb8c5210e05bdfdc3df51f80ff" kindref="member">UV_BOOT</ref>;</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" refkind="member"><highlight class="normal"><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/><ref refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kindref="member">task_manager</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="42" refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" refkind="member"><highlight class="normal"><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/><ref refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kindref="member">svc_task_manager</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44" refid="group__state__engine_1gaaed35d33599a21d98d0500c5f0a1385a" refkind="member"><highlight class="normal"><ref refid="structrbtree" kindref="compound">rbtree</ref>*<sp/><ref refid="group__state__engine_1gaaed35d33599a21d98d0500c5f0a1385a" kindref="member">task_name_tree</ref>;</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46" refid="group__state__engine_1ga026f8ea8b80f88c90cb35e3ec3588237" refkind="member"><highlight class="normal"><ref refid="structuv__os__settings" kindref="compound">uv_os_settings</ref>*<sp/><ref refid="group__state__engine_1ga026f8ea8b80f88c90cb35e3ec3588237" kindref="member">os_settings</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48" refid="group__state__engine_1gad9e02be6d2d0bc1ab5cd9fd8cae34230" refkind="member"><highlight class="normal"><ref refid="structuv__os__settings" kindref="compound">uv_os_settings</ref><sp/><ref refid="group__state__engine_1gad9e02be6d2d0bc1ab5cd9fd8cae34230" kindref="member">default_os_settings</ref><sp/>={</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.svc_task_manager_period<sp/>=<sp/>50,</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.task_manager_period<sp/>=<sp/>50,</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.max_svc_task_period<sp/>=<sp/>250,</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.max_task_period<sp/>=<sp/>500,</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.min_task_period<sp/>=<sp/>3,</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.task_overshoot_margin_noncrit<sp/>=<sp/>1.5F,</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.task_overshoot_margin_crit<sp/>=<sp/>1.1F</highlight></codeline>
<codeline lineno="56"><highlight class="normal">};</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="comment">//Function<sp/>prototypes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine_1gab8a03e5812e395199b3b0003cd8266cb" kindref="member">killEmAll</ref>();</highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1gaff684308203d45e9e16ad3d115c54279" kindref="member">uvSVCTaskManager</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>args);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1gaf2dbdd0d9d9aa8bcbef120661117fc5e" kindref="member">uvTaskManager</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>args);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1ga9f31832194c2c9dddce43bf53eb86d5b" kindref="member">compareTaskByName</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t1,<sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t2);</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="64" refid="structstate__change__daemon__args" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structstate__change__daemon__args" kindref="compound">state_change_daemon_args</ref>{</highlight></codeline>
<codeline lineno="65" refid="structstate__change__daemon__args_1aa19a15c725f1fdc8dcc05227584153bc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structtsk_task_control_block" kindref="compound">TaskHandle_t</ref><sp/><ref refid="structstate__change__daemon__args_1aa19a15c725f1fdc8dcc05227584153bc" kindref="member">meta_task_handle</ref>;</highlight></codeline>
<codeline lineno="66" refid="group__state__engine_1gac9bd88d7c454ec151183930fce544c9c" refkind="member"><highlight class="normal">}<ref refid="group__state__engine_1gac9bd88d7c454ec151183930fce544c9c" kindref="member">state_change_daemon_args</ref>;</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="92" refid="group__state__engine__api_1gaa3ad3e8df75177c00265881c16563212" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__api_1gaa3ad3e8df75177c00265881c16563212" kindref="member">changeVehicleState</ref>(uint16_t<sp/>state){</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TODO:<sp/>MAKE<sp/>THREAD<sp/>SAFE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TODO:<sp/>MAKE<sp/>INTERRUPT<sp/>SAFE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!(<ref refid="group__utility__macros_1gade3043fb92536f8e1a616ba8aaef4ab9" kindref="member">isPowerOfTwo</ref>(state))){</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;<sp/></highlight><highlight class="comment">//literally<sp/>not<sp/>a<sp/>possible<sp/>state,<sp/>since<sp/>all<sp/>vehicle<sp/>states<sp/>are<sp/>powers<sp/>of<sp/>two</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>if(state<sp/>==<sp/>vehicle_state<sp/>||<sp/>vehicle_state<sp/>==<sp/>UV_ERROR_STATE){</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>UV_ABORTED;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(state<sp/>==<sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref>){</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea6aa86f67f1dcd70789b27731c3ac4e7a" kindref="member">UV_ABORTED</ref>;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga2ce6eef16a78c095592954d2fe68af2e" kindref="member">previous_state</ref><sp/>=<sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref>;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref><sp/>=<sp/>state;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>state_diff<sp/>=<sp/><ref refid="group__state__engine_1ga2ce6eef16a78c095592954d2fe68af2e" kindref="member">previous_state</ref>-<ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref>;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(state_diff){</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(<ref refid="group__state__engine__api_1gga259abff5a03eaf908dc8f03d99f478e4a5e3e7ecab0a58b320912cb4129641579" kindref="member">UV_INIT</ref>-<ref refid="group__state__engine__api_1gga259abff5a03eaf908dc8f03d99f478e4a9ec1eef180c6208b25b08f0526dc5eb8" kindref="member">UV_READY</ref>):</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>(<ref refid="group__state__engine__api_1gga259abff5a03eaf908dc8f03d99f478e4a5e3e7ecab0a58b320912cb4129641579" kindref="member">UV_INIT</ref>-<ref refid="group__state__engine__api_1gga259abff5a03eaf908dc8f03d99f478e4ac1fcacc095b8c0f1c9f452d51815bcb5" kindref="member">UV_ERROR_STATE</ref>):</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//invalid<sp/>transitions<sp/>that<sp/>should<sp/>not<sp/>exist</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//uvPanic(&quot;Invalid<sp/>State<sp/>Transition&quot;,0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structstate__change__daemon__args" kindref="compound">state_change_daemon_args</ref>*<sp/>scd_args<sp/>=<sp/>uvMalloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structstate__change__daemon__args" kindref="compound">state_change_daemon_args</ref>));</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>scd_args-&gt;<ref refid="structstate__change__daemon__args_1aa19a15c725f1fdc8dcc05227584153bc" kindref="member">meta_task_handle</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1a46fb21e00ae0729d7515c0fbf2269796" kindref="member">BaseType_t</ref><sp/>retval;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/>retval<sp/>=<sp/>xTaskCreate(<ref refid="group__state__engine__backend_1ga8519c96858b096f2fccb96d3334df93a" kindref="member">_stateChangeDaemon</ref>,</highlight><highlight class="stringliteral">&quot;scd&quot;</highlight><highlight class="normal">,256,scd_args,<ref refid="cmsis__os_8h_1a7f2b42f1983b9107775ec2a1c69a849aa17b36cd9cd38652c2bc6d4803990674b" kindref="member">osPriorityAboveNormal</ref>,&amp;(scd_args-&gt;<ref refid="structstate__change__daemon__args_1aa19a15c725f1fdc8dcc05227584153bc" kindref="member">meta_task_handle</ref>));</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(retval<sp/>!=<sp/><ref refid="projdefs_8h_1a07848d3078849bd32353c69d30a479b3" kindref="member">pdPASS</ref><sp/>||<sp/>scd_args-&gt;<ref refid="structstate__change__daemon__args_1aa19a15c725f1fdc8dcc05227584153bc" kindref="member">meta_task_handle</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvFree(scd_args);</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;State<sp/>Transition<sp/>Failed&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//scd_args-&gt;meta_task_handle<sp/>=<sp/>osThreadCreate(&amp;SCD_thread,scd_args);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>if(*scd_handle_ptr<sp/>!=<sp/>NULL){</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>xTaskNotifyGive(*scd_handle_ptr);<sp/>//basically<sp/>we<sp/>just<sp/>wanna<sp/>wake<sp/>up<sp/>the<sp/>SCD<sp/>so<sp/>it<sp/>rectifies<sp/>the<sp/>state</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>}else{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>UV_ERROR;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="158"><highlight class="normal">}</highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__api_1ga2cef5ea1ce8c53aae9a3508d4c23ceeb" kindref="member">initRTDtask</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>args);</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="168" refid="group__state__engine__api_1ga5c608f3832c45eac6e2da198d4ef1ba0" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__api_1ga5c608f3832c45eac6e2da198d4ef1ba0" kindref="member">uvInitStateEngine</ref>(){</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//create<sp/>all<sp/>the<sp/>managed<sp/>tasks<sp/>:)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref><sp/>=<sp/>uvMalloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>)*<ref refid="group__state__engine_1ga8a80fe70c2d06583bbcd00c5162860c5" kindref="member">MAX_NUM_MANAGED_TASKS</ref>);</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="uvfr__utils_8h_1a92b5ac44171d49acd084c274385a043a" kindref="member">__uvInitPanic</ref>();</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kindref="member">svc_task_manager</ref><sp/>=<sp/><ref refid="group__state__engine__backend_1ga43cdd5f23929fee4ba86d4fd0b60d6ad" kindref="member">uvCreateServiceTask</ref>();</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kindref="member">task_manager</ref><sp/>=<sp/><ref refid="group__state__engine__backend_1ga43cdd5f23929fee4ba86d4fd0b60d6ad" kindref="member">uvCreateServiceTask</ref>();</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((<ref refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kindref="member">svc_task_manager</ref><sp/>==<sp/>NULL)||(<ref refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kindref="member">task_manager</ref><sp/>==<sp/>NULL)){</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="uvfr__utils_8h_1a92b5ac44171d49acd084c274385a043a" kindref="member">__uvInitPanic</ref>();</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="driving__loop_8h_1af580185fb5bb1cfba30ee1709d90628c" kindref="member">initDrivingLoop</ref>(NULL);<sp/></highlight><highlight class="comment">//create<sp/>the<sp/>main<sp/>driving<sp/>loop<sp/>task</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="temp__monitoring_8h_1a4d862a74e85fea73d9089ed437f9859b" kindref="member">initTempMonitor</ref>(NULL);<sp/></highlight><highlight class="comment">//create<sp/>the<sp/>temperature<sp/>monitoring<sp/>task</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1af2c619df9f3d115dcbc511b0bb738e87" kindref="member">initDaqTask</ref>(NULL);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="odometer_8h_1ace344890a9a3f03e059a4eb44af85e00" kindref="member">initOdometer</ref>(NULL);</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="uvfr__settings_8h_1a086bfc48f5a63b15586c6a2a8a1d29a8" kindref="member">uvConfigSettingTask</ref>(NULL);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine__api_1ga2cef5ea1ce8c53aae9a3508d4c23ceeb" kindref="member">initRTDtask</ref>(NULL);</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1a56ca1193de01115c27ceb3768994017f" kindref="member">associateDaqParamWithVar</ref>(<ref refid="daq_8h_1a5249d5d3ad44df9d4479b814028469a9a7370a4980da3b06231cacd01246e6382" kindref="member">VCU_VEHICLE_STATE</ref>,&amp;<ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref>);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1a56ca1193de01115c27ceb3768994017f" kindref="member">associateDaqParamWithVar</ref>(<ref refid="daq_8h_1a5249d5d3ad44df9d4479b814028469a9a2d4284eacab0912745267bd4d6f128e8" kindref="member">OS_AVAILABLE_HEAP</ref>,&amp;(<ref refid="structx_heap_stats" kindref="compound">xHeapStats</ref>.<ref refid="structx_heap_stats_1a7641b3a1494c093b3fe92a511419e36f" kindref="member">xAvailableHeapSpaceInBytes</ref>));</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1a56ca1193de01115c27ceb3768994017f" kindref="member">associateDaqParamWithVar</ref>(<ref refid="daq_8h_1a5249d5d3ad44df9d4479b814028469a9a130f6c0aa732800d133c91a00af5ddee" kindref="member">OS_LARGEST_FREE_BLOCK</ref>,&amp;(<ref refid="structx_heap_stats" kindref="compound">xHeapStats</ref>.<ref refid="structx_heap_stats_1aaaf136c838775162f7f9d8218ee0ba06" kindref="member">xSizeOfLargestFreeBlockInBytes</ref>));</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1a56ca1193de01115c27ceb3768994017f" kindref="member">associateDaqParamWithVar</ref>(<ref refid="daq_8h_1a5249d5d3ad44df9d4479b814028469a9ada14298a2526c89e86820dc39b9e8757" kindref="member">OS_SMALLEST_FREE_BLOCK</ref>,&amp;(<ref refid="structx_heap_stats" kindref="compound">xHeapStats</ref>.<ref refid="structx_heap_stats_1af881dc708d82b808ad78fce2cc318af7" kindref="member">xSizeOfSmallestFreeBlockInBytes</ref>));</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1a56ca1193de01115c27ceb3768994017f" kindref="member">associateDaqParamWithVar</ref>(<ref refid="daq_8h_1a5249d5d3ad44df9d4479b814028469a9a0a6e6cc1ea14ade7ba7e243bb67b6a43" kindref="member">OS_NUM_FREE_BLOCKS</ref>,&amp;(<ref refid="structx_heap_stats" kindref="compound">xHeapStats</ref>.<ref refid="structx_heap_stats_1af66da4ca5a39e1ae32edca5896e056ce" kindref="member">xNumberOfFreeBlocks</ref>));</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1a56ca1193de01115c27ceb3768994017f" kindref="member">associateDaqParamWithVar</ref>(<ref refid="daq_8h_1a5249d5d3ad44df9d4479b814028469a9ada6f14782fe0bcb2fdce7f4ab8621fc4" kindref="member">OS_MIN_EVER_FREE_BYTES</ref>,&amp;(<ref refid="structx_heap_stats" kindref="compound">xHeapStats</ref>.<ref refid="structx_heap_stats_1a2ef01d960466f5cba4d61c61723118e7" kindref="member">xMinimumEverFreeBytesRemaining</ref>));</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1a56ca1193de01115c27ceb3768994017f" kindref="member">associateDaqParamWithVar</ref>(<ref refid="daq_8h_1a5249d5d3ad44df9d4479b814028469a9aa2144536c6b66d5a0613c89b68c64339" kindref="member">OS_NUM_SUCCESSFUL_ALLOCS</ref>,&amp;(<ref refid="structx_heap_stats" kindref="compound">xHeapStats</ref>.<ref refid="structx_heap_stats_1a7641b3a1494c093b3fe92a511419e36f" kindref="member">xAvailableHeapSpaceInBytes</ref>));</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="daq_8h_1a56ca1193de01115c27ceb3768994017f" kindref="member">associateDaqParamWithVar</ref>(<ref refid="daq_8h_1a5249d5d3ad44df9d4479b814028469a9aa434b5060d4a0c9d18f897c4f67e9ea1" kindref="member">OS_NUM_SUCCESSFUL_FREES</ref>,&amp;(<ref refid="structx_heap_stats" kindref="compound">xHeapStats</ref>.<ref refid="structx_heap_stats_1a7641b3a1494c093b3fe92a511419e36f" kindref="member">xAvailableHeapSpaceInBytes</ref>));</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="202"><highlight class="normal">}</highlight></codeline>
<codeline lineno="203"><highlight class="normal"></highlight></codeline>
<codeline lineno="204" refid="group__state__engine__api_1ga6ef6aecf05463ae84b5968fd17583cc9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__api_1ga6ef6aecf05463ae84b5968fd17583cc9" kindref="member">uvCrashIntoWall</ref>(){</highlight></codeline>
<codeline lineno="205"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal">}</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="213" refid="group__state__engine__api_1ga2ad1d74b5783a51355c047be6642fab8" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__api_1ga2ad1d74b5783a51355c047be6642fab8" kindref="member">uvStartStateMachine</ref>(){</highlight></codeline>
<codeline lineno="214"><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga026f8ea8b80f88c90cb35e3ec3588237" kindref="member">os_settings</ref><sp/>=<sp/><ref refid="uvfr__settings_8h_1a03566822d1b8893362970a459bd67daf" kindref="member">current_vehicle_settings</ref>-&gt;<ref refid="structuv__vehicle__settings_1adbfed76ceedc0479ff023fea9ba7a84c" kindref="member">os_settings</ref>;</highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga2ce6eef16a78c095592954d2fe68af2e" kindref="member">previous_state</ref><sp/>=<sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref>;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1gga259abff5a03eaf908dc8f03d99f478e4a5e3e7ecab0a58b320912cb4129641579" kindref="member">UV_INIT</ref>;</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kindref="member">svc_task_manager</ref>-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;svcTaskManager&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//Task<sp/>info<sp/>for<sp/>the<sp/>svc<sp/>task<sp/>manager<sp/>struct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kindref="member">svc_task_manager</ref>-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>|=<sp/><ref refid="group__state__engine__api_1gab37af27fe89f1987ee38bdb0bc945c43" kindref="member">UV_TASK_MISSION_CRITICAL</ref><sp/>|<sp/><ref refid="group__state__engine__api_1ga4d87bda0a72990876364bd8764777cb2" kindref="member">UV_TASK_SCD_IGNORE</ref>;</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kindref="member">svc_task_manager</ref>-&gt;<ref refid="structuv__task__info_1afcd240d2b6b01b4acea600ef4dfe8fbc" kindref="member">task_function</ref><sp/>=<sp/><ref refid="group__state__engine_1gaff684308203d45e9e16ad3d115c54279" kindref="member">uvSVCTaskManager</ref>;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kindref="member">svc_task_manager</ref>-&gt;<ref refid="structuv__task__info_1a353ec6bf2c42ab0920f3d1e671e568a3" kindref="member">stack_size</ref><sp/>=<sp/>256;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga42329069c59ef55a97a6b0bca0cafd32" kindref="member">svc_task_manager</ref>-&gt;<ref refid="structuv__task__info_1ad157811debce6672bb6d00da7e90b6ca" kindref="member">task_period</ref><sp/>=<sp/>100;</highlight><highlight class="comment">//os_settings-&gt;svc_task_manager_period;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kindref="member">task_manager</ref>-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;taskManager&quot;</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//Task<sp/>info<sp/>for<sp/>regular<sp/>uvTaskManager<sp/>struct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kindref="member">task_manager</ref>-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>|=<sp/><ref refid="group__state__engine__api_1gab37af27fe89f1987ee38bdb0bc945c43" kindref="member">UV_TASK_MISSION_CRITICAL</ref><sp/>|<sp/><ref refid="group__state__engine__api_1ga4d87bda0a72990876364bd8764777cb2" kindref="member">UV_TASK_SCD_IGNORE</ref>;</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kindref="member">task_manager</ref>-&gt;<ref refid="structuv__task__info_1afcd240d2b6b01b4acea600ef4dfe8fbc" kindref="member">task_function</ref><sp/>=<sp/><ref refid="group__state__engine_1gaf2dbdd0d9d9aa8bcbef120661117fc5e" kindref="member">uvTaskManager</ref>;</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kindref="member">task_manager</ref>-&gt;<ref refid="structuv__task__info_1a353ec6bf2c42ab0920f3d1e671e568a3" kindref="member">stack_size</ref><sp/>=<sp/>256;</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga3de41676729241e58688c61c450e4a1e" kindref="member">task_manager</ref>-&gt;<ref refid="structuv__task__info_1ad157811debce6672bb6d00da7e90b6ca" kindref="member">task_period</ref><sp/>=<sp/>25;</highlight></codeline>
<codeline lineno="234"><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine__backend_1ga8c1618caac0d7f29836107f1a44833e8" kindref="member">uvValidateManagedTasks</ref>()<sp/>!=<sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>){</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1a46fb21e00ae0729d7515c0fbf2269796" kindref="member">BaseType_t</ref><sp/>retval;</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//starting<sp/>up<sp/>the<sp/>terrifying<sp/>tasks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>retval<sp/>=<sp/>xTaskCreate(svc_task_manager-&gt;task_function,svc_task_manager-&gt;task_name,svc_task_manager-&gt;stack_size,svc_task_manager,4,&amp;(svc_task_manager-&gt;task_handle));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>if(retval<sp/>!=<sp/>pdPASS){</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>UV_ERROR;<sp/>//if<sp/>for<sp/>whatever<sp/>god<sp/>forsaken<sp/>reason<sp/>neither<sp/>of<sp/>these<sp/>tasks<sp/>actually<sp/>activate</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>retval<sp/>=<sp/>xTaskCreate(task_manager-&gt;task_function,task_manager-&gt;task_name,task_manager-&gt;stack_size,task_manager,4,&amp;(task_manager-&gt;task_handle));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>if(retval<sp/>!=<sp/>pdPASS){</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>UV_ERROR;//very<sp/>much<sp/>++<sp/>ungoods</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>state_change_daemon_args*<sp/>scd_args<sp/>=<sp/>uvMalloc(sizeof(state_change_daemon_args));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>scd_args-&gt;meta_task_handle<sp/>=<sp/>NULL;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>scd_handle_ptr<sp/>=<sp/>&amp;(scd_args-&gt;meta_task_handle);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>retval<sp/>=<sp/>xTaskCreate(_stateChangeDaemon,&quot;scd&quot;,256,scd_args,5,&amp;(scd_args-&gt;meta_task_handle));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>if(retval<sp/>!=<sp/>pdPASS<sp/>||<sp/>scd_args-&gt;meta_task_handle<sp/>==<sp/>NULL){</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>uvFree(scd_args);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(&quot;SCD<sp/>Not<sp/>starting<sp/>:(&quot;,0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="267"><highlight class="normal">}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="275" refid="group__state__engine__api_1ga5cb739823b10b90a139315356aa6b22f" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__api_1ga5cb739823b10b90a139315356aa6b22f" kindref="member">uvDeInitStateEngine</ref>(){</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1gab8a03e5812e395199b3b0003cd8266cb" kindref="member">killEmAll</ref>();</highlight></codeline>
<codeline lineno="277"><highlight class="normal">}</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="285" refid="group__state__engine__api_1gac977eb33c99a9ac0a5f51a7db20e24d6" refkind="member"><highlight class="normal"><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref><sp/>*<ref refid="group__state__engine__api_1gac977eb33c99a9ac0a5f51a7db20e24d6" kindref="member">uvCreateTask</ref>(){</highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref><sp/>&gt;=<sp/><ref refid="group__state__engine_1ga8a80fe70c2d06583bbcd00c5162860c5" kindref="member">MAX_NUM_MANAGED_TASKS</ref>){</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>_newtask<sp/>=<sp/>&amp;(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>]);</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref><sp/>=<sp/><ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>;</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/>++<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1afcd240d2b6b01b4acea600ef4dfe8fbc" kindref="member">task_function</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1aff45751f7189980589d55379d1d5a355" kindref="member">task_priority</ref><sp/>=<sp/><ref refid="cmsis__os_8h_1a7f2b42f1983b9107775ec2a1c69a849aa45a2895ad30c79fb97de18cac7cc19f1" kindref="member">osPriorityNormal</ref>;</highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a353ec6bf2c42ab0920f3d1e671e568a3" kindref="member">stack_size</ref><sp/>=<sp/><ref refid="uvfr__state__engine_8h_1a32571accb85a2d8f479c6066d7a46238" kindref="member">_UV_DEFAULT_TASK_STACK_SIZE</ref>;</highlight></codeline>
<codeline lineno="310"><highlight class="normal"></highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a529c3f9ad3ef9a8e387d875c7a118c7e" kindref="member">UV_TASK_NOT_STARTED</ref>;</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1ab24dea3bde4de2d839bf15e65c2df0d6" kindref="member">active_states</ref><sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a6986d7216c7f889164931b37ab752c29" kindref="member">deletion_states</ref><sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1aafd4e2d916f50b54b99fd02d63831e43" kindref="member">suspension_states</ref><sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a5d32fc8f47b905499257336c561d189b" kindref="member">parent</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="319"><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>|=<sp/><ref refid="group__state__engine__api_1ga253c75b331d0976b9a414657cef780cd" kindref="member">UV_TASK_VEHICLE_APPLICATION</ref>;</highlight></codeline>
<codeline lineno="321"><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_newtask;</highlight></codeline>
<codeline lineno="323"><highlight class="normal">}</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/></highlight><highlight class="comment">//end<sp/>of<sp/>public<sp/>API</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight></codeline>
<codeline lineno="331" refid="group__state__engine__backend_1ga8e41e95f69723171fab38aba3b00a091" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga8e41e95f69723171fab38aba3b00a091" kindref="member">addTaskToTaskRegister</ref>(<ref refid="uvfr__state__engine_8h_1aa6ffd72eb4909ddb38c37a1369e13f09" kindref="member">uv_task_id</ref><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<sp/>uint8_t<sp/>assign_to_whom){</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/>retval<sp/>=<sp/><ref refid="group__state__engine__backend_1gaf342326f88e8accc1efa35e02cdd6c37" kindref="member">_uvValidateSpecificTask</ref>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(retval<sp/>!=<sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>){</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>retval;</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="337"><highlight class="normal"></highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="339"><highlight class="normal">}</highlight></codeline>
<codeline lineno="340"><highlight class="normal"></highlight></codeline>
<codeline lineno="344" refid="group__state__engine__backend_1gaf342326f88e8accc1efa35e02cdd6c37" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1gaf342326f88e8accc1efa35e02cdd6c37" kindref="member">_uvValidateSpecificTask</ref>(<ref refid="uvfr__state__engine_8h_1aa6ffd72eb4909ddb38c37a1369e13f09" kindref="member">uv_task_id</ref><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>current_task<sp/>=<sp/>&amp;(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[id]);</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((current_task-&gt;<ref refid="structuv__task__info_1ab24dea3bde4de2d839bf15e65c2df0d6" kindref="member">active_states</ref>&amp;current_task-&gt;<ref refid="structuv__task__info_1a6986d7216c7f889164931b37ab752c29" kindref="member">deletion_states</ref>)|</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(current_task-&gt;<ref refid="structuv__task__info_1ab24dea3bde4de2d839bf15e65c2df0d6" kindref="member">active_states</ref>&amp;current_task-&gt;<ref refid="structuv__task__info_1aafd4e2d916f50b54b99fd02d63831e43" kindref="member">suspension_states</ref>)|</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(current_task-&gt;<ref refid="structuv__task__info_1a6986d7216c7f889164931b37ab752c29" kindref="member">deletion_states</ref>&amp;current_task-&gt;<ref refid="structuv__task__info_1aafd4e2d916f50b54b99fd02d63831e43" kindref="member">suspension_states</ref>)){</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Undefined<sp/>behavior<sp/>time,<sp/>this<sp/>should<sp/>be<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="352"><highlight class="normal"></highlight></codeline>
<codeline lineno="353"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>if((current_task-&gt;active_states<sp/>|<sp/>current_task-&gt;deletion_states<sp/>|<sp/>current_task-&gt;suspension_states)<sp/>!=<sp/>0x01FF){</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="354"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>if((current_task-&gt;task_flags<sp/>&amp;<sp/>UV_TASK_MANAGER_MASK)<sp/>==<sp/>UV_TASK_VEHICLE_APPLICATION)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>UV_ERROR;<sp/>//This<sp/>avoids<sp/>undefined<sp/>states<sp/>where<sp/>the<sp/>task<sp/>state<sp/>is<sp/>not<sp/>specified<sp/>for<sp/>a<sp/>given<sp/>vehicle<sp/>state</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(current_task-&gt;<ref refid="structuv__task__info_1afcd240d2b6b01b4acea600ef4dfe8fbc" kindref="member">task_function</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Invalid,<sp/>since<sp/>no<sp/>task<sp/>assigned</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(current_task-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Invalid,<sp/>task<sp/>needs<sp/>a<sp/>name</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="367"><highlight class="normal"></highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Now<sp/>we<sp/>check<sp/>for<sp/>invalid<sp/>combinations<sp/>of<sp/>flags</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"></highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="374"><highlight class="normal">}</highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight></codeline>
<codeline lineno="379" refid="group__state__engine__backend_1ga8c1618caac0d7f29836107f1a44833e8" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga8c1618caac0d7f29836107f1a44833e8" kindref="member">uvValidateManagedTasks</ref>(){</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/>is_chill;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>;<sp/>i++){</highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is_chill<sp/>=<sp/><ref refid="group__state__engine__backend_1gaf342326f88e8accc1efa35e02cdd6c37" kindref="member">_uvValidateSpecificTask</ref>(i);<sp/></highlight><highlight class="comment">//probably<sp/>a<sp/>slightly<sp/>more<sp/>elegant<sp/>way<sp/>to<sp/>do<sp/>this<sp/>than<sp/>have<sp/>it<sp/>immediately<sp/>hang<sp/>itself</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(is_chill<sp/>!=<sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>){</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>is_chill;</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>is_chill;</highlight></codeline>
<codeline lineno="392"><highlight class="normal">}</highlight></codeline>
<codeline lineno="393"><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"></highlight></codeline>
<codeline lineno="401" refid="group__state__engine__backend_1ga15cdf09b5625c2ba29a6c6d5c96214dc" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga15cdf09b5625c2ba29a6c6d5c96214dc" kindref="member">uvStartTask</ref>(uint32_t*<sp/>tracker,<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88ad4da927019afea812b31d46d28b7354c" kindref="member">UV_TASK_RUNNING</ref>){</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;<sp/></highlight><highlight class="comment">//LITERALLY<sp/>HOW<sp/>HAS<sp/>THIS<sp/>HAPPENED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~_BV_32(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>);</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea6aa86f67f1dcd70789b27731c3ac4e7a" kindref="member">UV_ABORTED</ref>;</highlight></codeline>
<codeline lineno="419"><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"></highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a147f6febce613c666fe922907472ca0f" kindref="member">UV_TASK_SUSPENDED</ref>){</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>==<sp/>NULL){<sp/></highlight><highlight class="comment">//this<sp/>should<sp/>not<sp/>be<sp/>physically<sp/>possible</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="436"><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1a84a1584f29fb7736a1aa72ad5b3e9b44" kindref="member">vTaskResume</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a569da5121095d94816ad0985a5d9ddf0" kindref="member">last_execution_time</ref><sp/>=<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>();<sp/></highlight><highlight class="comment">//<sp/>so<sp/>we<sp/>can<sp/>continue<sp/>tracking<sp/>task<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88ad4da927019afea812b31d46d28b7354c" kindref="member">UV_TASK_RUNNING</ref>;</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~_BV_32(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>);<sp/></highlight><highlight class="comment">//Set<sp/>the<sp/>bit<sp/>in<sp/>the<sp/>tracker<sp/>so<sp/>that<sp/>we<sp/>won&apos;t<sp/>have<sp/>issues<sp/>down<sp/>the<sp/>road</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1afcd240d2b6b01b4acea600ef4dfe8fbc" kindref="member">task_function</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1a46fb21e00ae0729d7515c0fbf2269796" kindref="member">BaseType_t</ref><sp/>x_return<sp/>=<sp/>xTaskCreate(t-&gt;<ref refid="structuv__task__info_1afcd240d2b6b01b4acea600ef4dfe8fbc" kindref="member">task_function</ref>,t-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref>,t-&gt;<ref refid="structuv__task__info_1a353ec6bf2c42ab0920f3d1e671e568a3" kindref="member">stack_size</ref>,t,t-&gt;<ref refid="structuv__task__info_1aff45751f7189980589d55379d1d5a355" kindref="member">task_priority</ref>,&amp;(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>));</highlight></codeline>
<codeline lineno="455"><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(x_return<sp/>!=<sp/><ref refid="projdefs_8h_1a07848d3078849bd32353c69d30a479b3" kindref="member">pdPASS</ref>){<sp/></highlight><highlight class="comment">//thats<sp/>not<sp/>very<sp/>good,<sp/>or<sp/>very<sp/>cash<sp/>money<sp/>of<sp/>you</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>==<sp/>NULL){<sp/></highlight><highlight class="comment">//WTF,<sp/>how<sp/>has<sp/>this<sp/>occurred</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//we<sp/>may<sp/>need<sp/>to<sp/>explicitely<sp/>start<sp/>a<sp/>task.<sp/>Ha,<sp/>JK</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88ad4da927019afea812b31d46d28b7354c" kindref="member">UV_TASK_RUNNING</ref>;</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a569da5121095d94816ad0985a5d9ddf0" kindref="member">last_execution_time</ref><sp/>=<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>();</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="468"><highlight class="normal">}</highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight></codeline>
<codeline lineno="473" refid="group__state__engine_1gab8a03e5812e395199b3b0003cd8266cb" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine_1gab8a03e5812e395199b3b0003cd8266cb" kindref="member">killEmAll</ref>(){</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>tracker<sp/>=<sp/>0x00000000;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//QueueHandle_t<sp/>incoming_scd_msg<sp/>=<sp/>xQueueCreate(8,sizeof(uv_init_task_response));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i&lt;<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>;i++){</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tracker<sp/>|=<sp/><ref refid="group__utility__macros_1ga581e5838a8a85f12137dd310b210024d" kindref="member">_BV_32</ref>(i);</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1ga6291142ec714ce1450099943b1b8d00a" kindref="member">uvDeleteTask</ref>(&amp;tracker,&amp;<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[i]);</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tracker){</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;<sp/></highlight><highlight class="comment">//When<sp/>the<sp/>function<sp/>of<sp/>last<sp/>resort<sp/>fails</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="483"><highlight class="normal"></highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="485"><highlight class="normal">}</highlight></codeline>
<codeline lineno="486"><highlight class="normal"></highlight></codeline>
<codeline lineno="487"><highlight class="normal"></highlight></codeline>
<codeline lineno="494" refid="group__state__engine__backend_1gae0caac28206291f3dc5c416f11892edd" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1gae0caac28206291f3dc5c416f11892edd" kindref="member">uvKillTaskViolently</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t==NULL){</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;null<sp/>task<sp/>info<sp/>block&quot;</highlight><highlight class="normal">,0);<sp/></highlight><highlight class="comment">//sub-optimal<sp/>situation<sp/>here</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="507"><highlight class="normal">}</highlight></codeline>
<codeline lineno="508"><highlight class="normal"></highlight></codeline>
<codeline lineno="509"><highlight class="normal"></highlight></codeline>
<codeline lineno="519" refid="group__state__engine__backend_1ga6291142ec714ce1450099943b1b8d00a" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga6291142ec714ce1450099943b1b8d00a" kindref="member">uvDeleteTask</ref>(uint32_t*<sp/>tracker,<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Null<sp/>Task<sp/>Info<sp/>Struct&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="523"><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref><sp/>||<sp/>t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a529c3f9ad3ef9a8e387d875c7a118c7e" kindref="member">UV_TASK_NOT_STARTED</ref>){</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>));</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea6aa86f67f1dcd70789b27731c3ac4e7a" kindref="member">UV_ABORTED</ref>;</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="531"><highlight class="normal"></highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="533"><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TaskStatus_t<sp/>task_state<sp/>=<sp/>eTaskGetState(<sp/>TaskHandle_t<sp/>xTask<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vTaskGetInfo(t-&gt;task_handle,&amp;task_status,pdFalse,eInvalid);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a147f6febce613c666fe922907472ca0f" kindref="member">UV_TASK_SUSPENDED</ref>){</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1a27ff4ebce26565bef136bda84201ff80" kindref="member">vTaskDelete</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>;</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>));</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="543"><highlight class="normal"></highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="545"><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892c" kindref="member">eTaskState</ref><sp/>task_state<sp/>=<sp/><ref refid="task_8h_1a954df77397d616484edb7c58c7760b10" kindref="member">eTaskGetState</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="551"><highlight class="normal"></highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((task_state<sp/>==<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892caf35a900d49fdfc2502eefc68fdb70f72" kindref="member">eSuspended</ref>)&amp;&amp;(task_state<sp/>!=<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892cad23d72c68f43b6fff4962ad4154766af" kindref="member">eBlocked</ref>)){</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1a27ff4ebce26565bef136bda84201ff80" kindref="member">vTaskDelete</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>;</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>));</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="558"><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(task_state<sp/>==<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892cacef5c6e771d3a07f656e07a13a20ba35" kindref="member">eDeleted</ref>){<sp/></highlight><highlight class="comment">//Should<sp/>this<sp/>be<sp/>ok?<sp/>I<sp/>dont<sp/>really<sp/>know</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>;</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>));</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="565"><highlight class="normal"></highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca0e75e398c2bbcb663eaeb98684ca69d6" kindref="member">UV_KILL_CMD</ref>;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine__api_1ga0e5d6feafad4764ab2ffd4604ab633b5" kindref="member">uvTaskIsDelaying</ref>(t)){</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1afefe333df0492c8411c0094badd25185" kindref="member">xTaskAbortDelay</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="570"><highlight class="normal"></highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="572"><highlight class="normal">}</highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight></codeline>
<codeline lineno="579" refid="group__state__engine__backend_1ga40d4bc9be9f3b81c51aef7ed7c37172f" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga40d4bc9be9f3b81c51aef7ed7c37172f" kindref="member">uvAbortTaskDeletion</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="583"><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="585"><highlight class="normal">}</highlight></codeline>
<codeline lineno="586"><highlight class="normal"></highlight></codeline>
<codeline lineno="591" refid="group__state__engine__backend_1ga3ef71d11e9525846568eadac11c7e8e4" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga3ef71d11e9525846568eadac11c7e8e4" kindref="member">uvScheduleTaskDeletion</ref>(uint32_t*<sp/>tracker,<sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="595"><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>){<sp/></highlight><highlight class="comment">//no<sp/>need<sp/>to<sp/>delete<sp/>an<sp/>already<sp/>deleted<sp/>task.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~(0x0001U&lt;&lt;(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>));</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea6aa86f67f1dcd70789b27731c3ac4e7a" kindref="member">UV_ABORTED</ref>;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="600"><highlight class="normal"></highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>&amp;<sp/><ref refid="group__state__engine__api_1ga0ce66ea8b0c49749cc05a3ba06b2df75" kindref="member">UV_TASK_AWAITING_DELETION</ref>){</highlight><highlight class="comment">//previos<sp/>calls<sp/>of<sp/>this<sp/>function<sp/>get<sp/>precedence<sp/>over<sp/>subsequent<sp/>ones</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~(0x0001U&lt;&lt;(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>));</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="604"><highlight class="normal"></highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Now<sp/>we<sp/>get<sp/>to<sp/>create<sp/>some<sp/>timers<sp/>to<sp/>actually<sp/>delete<sp/>tasks<sp/>because<sp/>that<sp/>is<sp/>simply<sp/>what<sp/>we<sp/>need<sp/>to<sp/>do.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="606"><highlight class="normal"></highlight></codeline>
<codeline lineno="607"><highlight class="normal"></highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="609"><highlight class="normal">}</highlight></codeline>
<codeline lineno="610"><highlight class="normal"></highlight></codeline>
<codeline lineno="618" refid="group__state__engine__backend_1gafd67eecbab2e6e6915bc6bc71806b715" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1gafd67eecbab2e6e6915bc6bc71806b715" kindref="member">uvSuspendTask</ref>(uint32_t*<sp/>tracker,<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="619"><highlight class="normal"></highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Null<sp/>Task<sp/>Info<sp/>Struct&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="623"><highlight class="normal"></highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892c" kindref="member">eTaskState</ref><sp/>rtos_task_state<sp/>=<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892cab32c771bb60dc8b502f65b81eef3bd86" kindref="member">eInvalid</ref>;</highlight></codeline>
<codeline lineno="625"><highlight class="normal"></highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>!=<sp/>NULL){</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rtos_task_state<sp/>=<sp/><ref refid="task_8h_1a954df77397d616484edb7c58c7760b10" kindref="member">eTaskGetState</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>)||(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a529c3f9ad3ef9a8e387d875c7a118c7e" kindref="member">UV_TASK_NOT_STARTED</ref>)){</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>=<sp/>*tracker<sp/>&amp;<sp/>~(0x01&lt;&lt;(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>));</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;<sp/></highlight><highlight class="comment">//WHY<sp/>IS<sp/>IT<sp/>NULL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="636"><highlight class="normal"></highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a147f6febce613c666fe922907472ca0f" kindref="member">UV_TASK_SUSPENDED</ref>){</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(rtos_task_state<sp/>!=<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892caf35a900d49fdfc2502eefc68fdb70f72" kindref="member">eSuspended</ref>){<sp/></highlight><highlight class="comment">//SCD<sp/>thinks<sp/>this<sp/>is<sp/>suspended</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;TState<sp/>Not<sp/>Match<sp/>RTOS<sp/>in<sp/>UVsuspend&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;(t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>));</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="646"><highlight class="normal"></highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>){</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(rtos_task_state<sp/>!=<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892cacef5c6e771d3a07f656e07a13a20ba35" kindref="member">eDeleted</ref>){</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;State<sp/>Engine<sp/>Claim<sp/>deleted<sp/>but<sp/>RTOS<sp/>exist&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>);</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="654"><highlight class="normal"></highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca5f389a67f2a45fe1f51492b3b8f04077" kindref="member">UV_SUSPEND_CMD</ref>;</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine__api_1ga0e5d6feafad4764ab2ffd4604ab633b5" kindref="member">uvTaskIsDelaying</ref>(t)){</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1afefe333df0492c8411c0094badd25185" kindref="member">xTaskAbortDelay</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);<sp/></highlight><highlight class="comment">//Speed<sp/>up<sp/>the<sp/>process</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="659"><highlight class="normal"></highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="661"><highlight class="normal">}</highlight></codeline>
<codeline lineno="662"><highlight class="normal"></highlight></codeline>
<codeline lineno="675" refid="group__state__engine__backend_1gac1a1157d12026b20c6bbb5542c9f7efb" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1gac1a1157d12026b20c6bbb5542c9f7efb" kindref="member">uvTaskCrashHandler</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//this<sp/>is<sp/>not<sp/>a<sp/>good<sp/>place<sp/>to<sp/>be<sp/>ngl</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>&amp;<sp/><ref refid="group__state__engine__api_1gab37af27fe89f1987ee38bdb0bc945c43" kindref="member">UV_TASK_MISSION_CRITICAL</ref>){</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;fuck&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="681"><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="684"><highlight class="normal">}</highlight></codeline>
<codeline lineno="685"><highlight class="normal"></highlight></codeline>
<codeline lineno="686"><highlight class="normal"></highlight></codeline>
<codeline lineno="687"><highlight class="normal"></highlight></codeline>
<codeline lineno="688"><highlight class="normal"></highlight></codeline>
<codeline lineno="689"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/>uint8_t<sp/><ref refid="group__state__engine__backend_1ga321624ab262c6eeb560495e0e4833966" kindref="member">is_can_ok</ref>;</highlight></codeline>
<codeline lineno="690"><highlight class="normal"></highlight></codeline>
<codeline lineno="708" refid="group__state__engine__backend_1ga6d712c440ee3ae92eae5d820f4745eb9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__backend_1ga6d712c440ee3ae92eae5d820f4745eb9" kindref="member">__uvPanic</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>msg,<sp/><ref refid="uvfr__vehicle__logger_8h_1a6678121815d6405973fdc68812442fc7" kindref="member">fault_event_type_e</ref><sp/>type,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>file,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>line,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>func){</highlight></codeline>
<codeline lineno="709"><highlight class="normal"></highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine__backend_1ga321624ab262c6eeb560495e0e4833966" kindref="member">is_can_ok</ref>){</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//uvSecureVehicle();<sp/>//<sp/>ensure<sp/>safe<sp/>state<sp/>of<sp/>vehicle.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine__api_1gaa3ad3e8df75177c00265881c16563212" kindref="member">changeVehicleState</ref>(<ref refid="group__state__engine__api_1gga259abff5a03eaf908dc8f03d99f478e4ac1fcacc095b8c0f1c9f452d51815bcb5" kindref="member">UV_ERROR_STATE</ref>);<sp/></highlight><highlight class="comment">//<sp/>log<sp/>a<sp/>fault<sp/>from<sp/>here<sp/>then<sp/>create</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TODO:<sp/>We<sp/>should<sp/>probably<sp/>keep<sp/>a<sp/>log<sp/>of<sp/>this<sp/>or<sp/>something</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="715"><highlight class="normal"></highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="uvfr__vehicle__logger_8h_1aa83c417d242e0852d3da6e3df47252f0" kindref="member">logVehicleFault</ref>(type,NULL,msg,file,line,func,</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="717"><highlight class="normal">}</highlight></codeline>
<codeline lineno="718"><highlight class="normal"></highlight></codeline>
<codeline lineno="719"><highlight class="normal"></highlight></codeline>
<codeline lineno="724" refid="group__state__engine__backend_1ga5f35b34432afed7f18f91fb8607f096f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__backend_1ga5f35b34432afed7f18f91fb8607f096f" kindref="member">killSelf</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Null<sp/>Task<sp/>Info<sp/>Struct&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//QueueHandle_t<sp/>status_queue<sp/>=<sp/>t-&gt;manager;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__scd__response" kindref="compound">uv_scd_response</ref>*<sp/>response<sp/>=<sp/>uvMalloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structuv__scd__response" kindref="compound">uv_scd_response</ref>));</highlight></codeline>
<codeline lineno="735"><highlight class="normal"></highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(response<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;uvMalloc<sp/>Failed&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="739"><highlight class="normal"></highlight></codeline>
<codeline lineno="740"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>;</highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/>response-&gt;<ref refid="structuv__scd__response_1a0812669214881a452cc54e8783a74c4f" kindref="member">meta_id</ref><sp/>=<sp/>t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>;</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/>response-&gt;<ref refid="structuv__scd__response_1a92a8d03f9ffbbd860cb0bbe48f90bd7e" kindref="member">response_val</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggadfdfabf66fb37e4e702a1019bf1a9a76a886d929188a37a7fdae4b18b65a261ca" kindref="member">UV_SUCCESSFUL_DELETION</ref>;</highlight></codeline>
<codeline lineno="743"><highlight class="normal"></highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref><sp/>!=<sp/>NULL){</highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="queue_8h_1af7eb49d3249351176992950d9185abe9" kindref="member">xQueueSend</ref>(<ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref>,<sp/>&amp;response,<sp/>0)<sp/>!=<sp/><ref refid="projdefs_8h_1a07848d3078849bd32353c69d30a479b3" kindref="member">pdPASS</ref>){</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvFree(response);<sp/></highlight><highlight class="comment">//no<sp/>memory<sp/>leaks<sp/>here<sp/>sir<sp/>:)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>send<sp/>scd<sp/>queue<sp/>msg&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{<sp/></highlight><highlight class="comment">//bro<sp/>why<sp/>tf<sp/>is<sp/>the<sp/>queue<sp/>null</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Task<sp/>Has<sp/>invalid<sp/>queue<sp/>while<sp/>SCD<sp/>active&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="752"><highlight class="normal"></highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca3641b5b35403903b66faf4d615c3199d" kindref="member">UV_NO_CMD</ref>;</highlight></codeline>
<codeline lineno="754"><highlight class="normal"></highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="task_8h_1a27ff4ebce26565bef136bda84201ff80" kindref="member">vTaskDelete</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="756"><highlight class="normal"></highlight></codeline>
<codeline lineno="757"><highlight class="normal">}</highlight></codeline>
<codeline lineno="758"><highlight class="normal"></highlight></codeline>
<codeline lineno="759"><highlight class="normal"></highlight></codeline>
<codeline lineno="765" refid="group__state__engine__backend_1gad6117850b55ad52be51d93915bcc313c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__backend_1gad6117850b55ad52be51d93915bcc313c" kindref="member">suspendSelf</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="766"><highlight class="normal"></highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Null<sp/>Task<sp/>Info<sp/>Struct&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//QueueHandle_t<sp/>status_queue<sp/>=<sp/>t-&gt;manager;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__scd__response" kindref="compound">uv_scd_response</ref>*<sp/>response<sp/>=<sp/>uvMalloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structuv__scd__response" kindref="compound">uv_scd_response</ref>));</highlight></codeline>
<codeline lineno="772"><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"></highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(response<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;uvMalloc<sp/>Failed&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="777"><highlight class="normal"></highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a147f6febce613c666fe922907472ca0f" kindref="member">UV_TASK_SUSPENDED</ref>;</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/>response-&gt;<ref refid="structuv__scd__response_1a0812669214881a452cc54e8783a74c4f" kindref="member">meta_id</ref><sp/>=<sp/>t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>;</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/>response-&gt;<ref refid="structuv__scd__response_1a92a8d03f9ffbbd860cb0bbe48f90bd7e" kindref="member">response_val</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggadfdfabf66fb37e4e702a1019bf1a9a76a75d7f4415a6450a9c3d35aaf7b9577cd" kindref="member">UV_SUCCESSFUL_SUSPENSION</ref>;</highlight></codeline>
<codeline lineno="781"><highlight class="normal"></highlight></codeline>
<codeline lineno="782"><highlight class="normal"></highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref><sp/>!=<sp/>NULL){</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="queue_8h_1af7eb49d3249351176992950d9185abe9" kindref="member">xQueueSend</ref>(<ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref>,<sp/>&amp;response,<sp/>0)<sp/>!=<sp/><ref refid="projdefs_8h_1a07848d3078849bd32353c69d30a479b3" kindref="member">pdPASS</ref>){</highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvFree(response);</highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Task<sp/>couldn&apos;t<sp/>send<sp/>msg<sp/>to<sp/>scd<sp/>queue&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="788"><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Task<sp/>Has<sp/>invalid<sp/>queue<sp/>while<sp/>SCD<sp/>active&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="792"><highlight class="normal"></highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca3641b5b35403903b66faf4d615c3199d" kindref="member">UV_NO_CMD</ref>;</highlight></codeline>
<codeline lineno="794"><highlight class="normal"></highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="task_8h_1a84d4e660b04630be2939d91b3c2412f8" kindref="member">vTaskSuspend</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="796"><highlight class="normal">}</highlight></codeline>
<codeline lineno="797"><highlight class="normal"></highlight></codeline>
<codeline lineno="798"><highlight class="normal"></highlight></codeline>
<codeline lineno="808" refid="group__state__engine__backend_1ga2e8a31626909ac17be499f2941d359d0" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga2e8a31626909ac17be499f2941d359d0" kindref="member">proccessSCDMsg</ref>(<ref refid="structuv__scd__response" kindref="compound">uv_scd_response</ref>*<sp/>msg){</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(msg<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="812"><highlight class="normal"></highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="uvfr__state__engine_8h_1aa6ffd72eb4909ddb38c37a1369e13f09" kindref="member">uv_task_id</ref><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>=<sp/>msg-&gt;<ref refid="structuv__scd__response_1a0812669214881a452cc54e8783a74c4f" kindref="member">meta_id</ref>;</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__api_1gadfdfabf66fb37e4e702a1019bf1a9a76" kindref="member">uv_scd_response_e</ref><sp/>replystatus<sp/>=<sp/>msg-&gt;<ref refid="structuv__scd__response_1a92a8d03f9ffbbd860cb0bbe48f90bd7e" kindref="member">response_val</ref>;</highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t<sp/>=<sp/>&amp;(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[id]);</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892c" kindref="member">eTaskState</ref><sp/>rtos_task_state<sp/>=<ref refid="task_8h_1a1749369458e2282a22e862a619a3892cab32c771bb60dc8b502f65b81eef3bd86" kindref="member">eInvalid</ref>;</highlight></codeline>
<codeline lineno="820"><highlight class="normal"></highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>!=<sp/>NULL){</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rtos_task_state<sp/>=<sp/><ref refid="task_8h_1a954df77397d616484edb7c58c7760b10" kindref="member">eTaskGetState</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="824"><highlight class="normal"></highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(replystatus<sp/>==<sp/><ref refid="group__state__engine__api_1ggadfdfabf66fb37e4e702a1019bf1a9a76a886d929188a37a7fdae4b18b65a261ca" kindref="member">UV_SUCCESSFUL_DELETION</ref>){</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>!=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>){</highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="829"><highlight class="normal"></highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//rtos_task_state<sp/>=<sp/>eTaskGetState(t-&gt;task_handle);<sp/>//HOL<sp/>UP:<sp/>MAYBE<sp/>CHECK<sp/>TO<sp/>MAKE<sp/>SURE<sp/>THE<sp/>TASK<sp/>EXISTS<sp/>LOL,<sp/>otherwise<sp/>null<sp/>pointer<sp/>dereference<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="831"><highlight class="normal"></highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(rtos_task_state<sp/>!=<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892cacef5c6e771d3a07f656e07a13a20ba35" kindref="member">eDeleted</ref>){</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TODO<sp/>Handle<sp/>this<sp/>error,<sp/>because<sp/>this<sp/>is<sp/>BAD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="835"><highlight class="normal"></highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(replystatus<sp/>==<sp/><ref refid="group__state__engine__api_1ggadfdfabf66fb37e4e702a1019bf1a9a76a75d7f4415a6450a9c3d35aaf7b9577cd" kindref="member">UV_SUCCESSFUL_SUSPENSION</ref>){</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;<sp/></highlight><highlight class="comment">//that<sp/>sure<sp/>aint<sp/>good,<sp/>imma<sp/>go<sp/>complain<sp/>now.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="840"><highlight class="normal"></highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//rtos_task_state<sp/>=<sp/>eTaskGetState(t-&gt;task_handle);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((rtos_task_state<sp/>!=<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892caf35a900d49fdfc2502eefc68fdb70f72" kindref="member">eSuspended</ref>)&amp;&amp;(rtos_task_state<sp/>!=<sp/><ref refid="task_8h_1a1749369458e2282a22e862a619a3892cad23d72c68f43b6fff4962ad4154766af" kindref="member">eBlocked</ref>)){</highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//The<sp/>task<sp/>is<sp/>not<sp/>actually<sp/>suspended!!!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="845"><highlight class="normal"></highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(replystatus<sp/>==<sp/><ref refid="group__state__engine__api_1ggadfdfabf66fb37e4e702a1019bf1a9a76aa66da42f9355512e286812074433015b" kindref="member">UV_COULDNT_DELETE</ref>){</highlight></codeline>
<codeline lineno="847"><highlight class="normal"></highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(replystatus<sp/>==<sp/><ref refid="group__state__engine__api_1ggadfdfabf66fb37e4e702a1019bf1a9a76a3c33585e5ac7f76a9bc4dc1fccb764ec" kindref="member">UV_COULDNT_SUSPEND</ref>){</highlight></codeline>
<codeline lineno="850"><highlight class="normal"></highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(replystatus<sp/>==<sp/><ref refid="group__state__engine__api_1ggadfdfabf66fb37e4e702a1019bf1a9a76a0dd4e6d2bbbde83536ed21ac4ce2bd00" kindref="member">UV_UNSAFE_STATE</ref>){</highlight></codeline>
<codeline lineno="853"><highlight class="normal"></highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//unknown<sp/>reply,<sp/>wtf<sp/>man??</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="857"><highlight class="normal"></highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="860"><highlight class="normal"></highlight></codeline>
<codeline lineno="861"><highlight class="normal"></highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="863"><highlight class="normal">}</highlight></codeline>
<codeline lineno="864"><highlight class="normal"></highlight></codeline>
<codeline lineno="865" refid="group__state__engine__backend_1ga2c151c9ece181329cf95d74d80c53411" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__backend_1ga2c151c9ece181329cf95d74d80c53411" kindref="member">uvSendTaskStatusReport</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="866"><highlight class="normal"></highlight></codeline>
<codeline lineno="867"><highlight class="normal">}</highlight></codeline>
<codeline lineno="868"><highlight class="normal"></highlight></codeline>
<codeline lineno="869"><highlight class="normal"></highlight><highlight class="comment">//TODO<sp/>Give<sp/>SCD<sp/>Object<sp/>permanence,<sp/>make<sp/>a<sp/>function<sp/>that<sp/>is<sp/>called<sp/>by<sp/>the<sp/>task<sp/>manager.<sp/>Allocation<sp/>of<sp/>SCD<sp/>resources<sp/>costs<sp/>valuable<sp/>time<sp/>in<sp/>the<sp/>event<sp/>of<sp/>a<sp/>fault</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="870"><highlight class="normal"></highlight></codeline>
<codeline lineno="881" refid="group__state__engine__backend_1ga8519c96858b096f2fccb96d3334df93a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__backend_1ga8519c96858b096f2fccb96d3334df93a" kindref="member">_stateChangeDaemon</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>args)<sp/><ref refid="mpu__wrappers_8h_1a4785c4f4a8c04b835139dcc2a6682078" kindref="member">PRIVILEGED_FUNCTION</ref>{</highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaa11ee7595fe2da14c5949195824179af" kindref="member">SCD_active</ref>){<sp/></highlight><highlight class="comment">//Leads<sp/>to<sp/>terrible<sp/>terrible<sp/>queue<sp/>behavior<sp/>but<sp/>idk<sp/>what<sp/>else<sp/>to<sp/>do<sp/>here</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1aa154068cecd7f31446a7a84af44ab1a3" kindref="member">vTaskDelay</ref>(2);</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="885"><highlight class="normal"></highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaa11ee7595fe2da14c5949195824179af" kindref="member">SCD_active</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="887"><highlight class="normal"></highlight></codeline>
<codeline lineno="888"><highlight class="normal"></highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>task_tracker<sp/>=<sp/>0x00000000;</highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>tmp_task;</highlight></codeline>
<codeline lineno="891"><highlight class="normal"></highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//BaseType_t<sp/>rtos_status;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="893"><highlight class="normal"></highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref><sp/>=<sp/>xQueueCreate(8,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structuv__scd__response" kindref="compound">uv_scd_response</ref>*));</highlight></codeline>
<codeline lineno="895"><highlight class="normal"></highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;didntcreatequeue&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="899"><highlight class="normal"></highlight></codeline>
<codeline lineno="900"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>uint32_t<sp/>notification_value;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="901"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>BaseType_t<sp/>notification_received;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="902"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="903"><highlight class="normal"></highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for(;;){</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="905"><highlight class="normal"></highlight></codeline>
<codeline lineno="906"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>notification_value<sp/>=<sp/>ulTaskNotifyTake(pdTRUE,500);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="907"><highlight class="normal"></highlight></codeline>
<codeline lineno="908"><highlight class="normal"></highlight></codeline>
<codeline lineno="919"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>if(notification_value<sp/>==<sp/>0){</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="920"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>continue;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="921"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i&lt;<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>;<sp/>i++){</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp_task<sp/>=<sp/>&amp;(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[i]);</highlight></codeline>
<codeline lineno="930"><highlight class="normal"></highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//task_tracker<sp/>|=<sp/>0x01&lt;&lt;i;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="932"><highlight class="normal"></highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//tmp_task-&gt;manager<sp/>=<sp/>incoming_scd_msg;<sp/>//No<sp/>longer<sp/>using<sp/>this<sp/>var,<sp/>instead<sp/>using<sp/>the<sp/>state_change_queue<sp/>static<sp/>global<sp/>var</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="934"><highlight class="normal"></highlight></codeline>
<codeline lineno="935"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//redundant_tracker<sp/>|=<sp/>0x01&lt;&lt;i;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="936"><highlight class="normal"></highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp_task-&gt;<ref refid="structuv__task__info_1ab24dea3bde4de2d839bf15e65c2df0d6" kindref="member">active_states</ref><sp/>&amp;<sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref>){</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//should<sp/>be<sp/>active</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp_task-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>!=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88ad4da927019afea812b31d46d28b7354c" kindref="member">UV_TASK_RUNNING</ref>){</highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//start<sp/>dah<sp/>task</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine__backend_1ga15cdf09b5625c2ba29a6c6d5c96214dc" kindref="member">uvStartTask</ref>(&amp;task_tracker,tmp_task)<sp/>==<sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>){</highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>task_tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;i);</highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>start<sp/>task&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp_task-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>&amp;<sp/><ref refid="group__state__engine__api_1ga0ce66ea8b0c49749cc05a3ba06b2df75" kindref="member">UV_TASK_AWAITING_DELETION</ref>){</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//FUCK,<sp/>GO<sp/>BACK!!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>task_tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;i);<sp/></highlight><highlight class="comment">//didnt<sp/>need<sp/>to<sp/>do<sp/>anything</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp_task-&gt;<ref refid="structuv__task__info_1a6986d7216c7f889164931b37ab752c29" kindref="member">deletion_states</ref><sp/>&amp;<sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref>){</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//this<sp/>task<sp/>should<sp/>not<sp/>exist<sp/>right<sp/>now</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((tmp_task-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>!=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a529c3f9ad3ef9a8e387d875c7a118c7e" kindref="member">UV_TASK_NOT_STARTED</ref>)&amp;&amp;(tmp_task-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>!=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>)){</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//gotta<sp/>delete<sp/>that<sp/>task<sp/>buddy</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp_task-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>&amp;<sp/><ref refid="group__state__engine__api_1gaf1374f633bd37be99d7d58e33270ce8c" kindref="member">UV_TASK_DEFER_DELETION</ref>){</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1ga3ef71d11e9525846568eadac11c7e8e4" kindref="member">uvScheduleTaskDeletion</ref>(&amp;task_tracker,<sp/>tmp_task);</highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1ga6291142ec714ce1450099943b1b8d00a" kindref="member">uvDeleteTask</ref>(&amp;task_tracker,tmp_task);</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="960"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//task_tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;i);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>task_tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;i);</highlight></codeline>
<codeline lineno="963"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp_task-&gt;<ref refid="structuv__task__info_1aafd4e2d916f50b54b99fd02d63831e43" kindref="member">suspension_states</ref><sp/>&amp;<sp/><ref refid="group__state__engine_1ga2f58cf65b3566bc390600f877f8bed35" kindref="member">vehicle_state</ref>){</highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp_task-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>!=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a147f6febce613c666fe922907472ca0f" kindref="member">UV_TASK_SUSPENDED</ref>){</highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Suspend<sp/>that<sp/>thang</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="970"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1gafd67eecbab2e6e6915bc6bc71806b715" kindref="member">uvSuspendTask</ref>(&amp;task_tracker,tmp_task);</highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//task_tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;i);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="972"><highlight class="normal"></highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>task_tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;i);</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="976"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//uvPanic(&quot;this<sp/>task<sp/>is<sp/>physically<sp/>impossible&quot;,0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="979"><highlight class="normal"></highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="comment">//end<sp/>of<sp/>first<sp/>iteration<sp/>loop<sp/>where<sp/>thas<sp/>reconciliation<sp/>occurs</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="981"><highlight class="normal"></highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structuv__scd__response" kindref="compound">uv_scd_response</ref>*<sp/>response<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="985"><highlight class="normal"></highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/><ref refid="uvfr__state__engine_8h_1a2b86418bd482f9d4a2a36f35e786798e" kindref="member">_LONGEST_SC_TIME</ref>/<ref refid="uvfr__state__engine_8h_1a092c530d4a0cd880a59598dc0fca95d4" kindref="member">_SC_DAEMON_PERIOD</ref>;<sp/>i++){<sp/></highlight><highlight class="comment">//This<sp/>loop<sp/>verifies<sp/>to<sp/>make<sp/>sure<sp/>things<sp/>are<sp/>actually<sp/>chillin</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1aa154068cecd7f31446a7a84af44ab1a3" kindref="member">vTaskDelay</ref>(<ref refid="uvfr__state__engine_8h_1a092c530d4a0cd880a59598dc0fca95d4" kindref="member">_SC_DAEMON_PERIOD</ref>);</highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;j&lt;10;j++){<sp/></highlight><highlight class="comment">//What<sp/>kinda<sp/>magic<sp/>number<sp/>is<sp/>this?<sp/>Why<sp/>10?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="989"><highlight class="normal"></highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="queue_8h_1ae8364d988c6f9b63c771cc2b3dfe5df9" kindref="member">xQueueReceive</ref>(<ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref>,&amp;response,1)<sp/>==<sp/><ref refid="projdefs_8h_1a07848d3078849bd32353c69d30a479b3" kindref="member">pdPASS</ref>){</highlight></codeline>
<codeline lineno="998"><highlight class="normal"></highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(response<sp/>==<sp/>NULL){</highlight><highlight class="comment">//definately<sp/>not<sp/>supposed<sp/>to<sp/>happen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;null<sp/>scd<sp/>response&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"></highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine__backend_1ga2e8a31626909ac17be499f2941d359d0" kindref="member">proccessSCDMsg</ref>(response)==<ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>){</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>task_tracker<sp/>&amp;=<sp/>~(0x01&lt;&lt;response-&gt;<ref refid="structuv__scd__response_1a0812669214881a452cc54e8783a74c4f" kindref="member">meta_id</ref>);</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[response-&gt;<ref refid="structuv__scd__response_1a0812669214881a452cc54e8783a74c4f" kindref="member">meta_id</ref>].<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>){</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[response-&gt;<ref refid="structuv__scd__response_1a0812669214881a452cc54e8783a74c4f" kindref="member">meta_id</ref>].<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1013"><highlight class="normal"></highlight></codeline>
<codeline lineno="1014"><highlight class="normal"></highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Not<sp/>ok,<sp/>this<sp/>means<sp/>that<sp/>process<sp/>SCD<sp/>has<sp/>returned<sp/>something<sp/>weird.<sp/>More<sp/>detailed<sp/>error_handling<sp/>can<sp/>be<sp/>added<sp/>later.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1017"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Task<sp/>giving<sp/>Sass<sp/>to<sp/>SCD&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="1018"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1019"><highlight class="normal"></highlight></codeline>
<codeline lineno="1023"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(uvFree(response)!=<ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>){</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;failed<sp/>to<sp/>free<sp/>memory&quot;</highlight><highlight class="normal">,<sp/>0);</highlight></codeline>
<codeline lineno="1025"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1026"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>response<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1027"><highlight class="normal"></highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1029"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1031"><highlight class="normal"></highlight></codeline>
<codeline lineno="1032"><highlight class="normal"></highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"></highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//You<sp/>timed<sp/>out<sp/>didnt<sp/>you...<sp/>Naughty<sp/>naughty...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(task_tracker<sp/>!=<sp/>0){</highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;SCD<sp/>Timeout&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TODO:<sp/>Forcibly<sp/>reconcile<sp/>vehicle<sp/>state,<sp/>and<sp/>nuke<sp/>whatever<sp/>tasks<sp/>require<sp/>nuking,<sp/>suspend<sp/>whatever<sp/>needs<sp/>suspended</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1041"><highlight class="normal"></highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//END_OF_STATE_CHANGE_DAEMON:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1043"><highlight class="normal"></highlight></codeline>
<codeline lineno="1044"><highlight class="normal"></highlight></codeline>
<codeline lineno="1045"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1046"><highlight class="normal"></highlight></codeline>
<codeline lineno="1047"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structtsk_task_control_block" kindref="compound">TaskHandle_t</ref><sp/>scd_handle<sp/>=<sp/>((<ref refid="structstate__change__daemon__args" kindref="compound">state_change_daemon_args</ref>*)args)-&gt;meta_task_handle;</highlight></codeline>
<codeline lineno="1048"><highlight class="normal"><sp/><sp/><sp/><sp/>uvFree(args);</highlight></codeline>
<codeline lineno="1049"><highlight class="normal"></highlight></codeline>
<codeline lineno="1051"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="queue_8h_1a707cbcfe3aed6b877b6aa6d9d75a3f22" kindref="member">vQueueDelete</ref>(<ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref>);</highlight></codeline>
<codeline lineno="1052"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga6837d935e61f84062544da8971a18560" kindref="member">state_change_queue</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaa11ee7595fe2da14c5949195824179af" kindref="member">SCD_active</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="task_8h_1a27ff4ebce26565bef136bda84201ff80" kindref="member">vTaskDelete</ref>(scd_handle);</highlight></codeline>
<codeline lineno="1060"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1061"><highlight class="normal"></highlight><highlight class="comment">//end<sp/>of<sp/>SCD</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1062"><highlight class="normal"></highlight></codeline>
<codeline lineno="1063" refid="group__state__engine__backend_1gace2b4c6c8f012fb6650049e5272b88e4" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1gace2b4c6c8f012fb6650049e5272b88e4" kindref="member">uvThrottleNonCritTasks</ref>(){</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"></highlight></codeline>
<codeline lineno="1065"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1066"><highlight class="normal"></highlight></codeline>
<codeline lineno="1067"><highlight class="normal"></highlight></codeline>
<codeline lineno="1068" refid="group__state__engine__backend_1ga7dff9a1c0653941c1559398025cdec4c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine__backend_1ga7dff9a1c0653941c1559398025cdec4c" kindref="member">uvLateTaskHandler</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t<sp/>,<ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref><sp/>tdiff<sp/>,<sp/>uint8_t<sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>){</highlight></codeline>
<codeline lineno="1069"><highlight class="normal"></highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//bruh</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"></highlight></codeline>
<codeline lineno="1074"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tdiff<sp/>==<sp/><ref refid="portmacro_8h_1a72723ba1e4a85ca14f25c2b9e066613d" kindref="member">portMAX_DELAY</ref>){</highlight></codeline>
<codeline lineno="1075"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//only<sp/>base<sp/>task<sp/>lateness<sp/>on<sp/>the<sp/>tardiness<sp/>level,<sp/>ignore<sp/>tdiff</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1076"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1077"><highlight class="normal"></highlight></codeline>
<codeline lineno="1078"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>&amp;<sp/><ref refid="group__state__engine__api_1gab37af27fe89f1987ee38bdb0bc945c43" kindref="member">UV_TASK_MISSION_CRITICAL</ref>){</highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//SHIT<sp/>FUCK<sp/>SHIT<sp/>WE<sp/>GOTTA<sp/>STOP<sp/>THE<sp/>CAR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref><sp/>&gt;=<sp/>2<sp/>||<sp/>tdiff<sp/>&gt;<sp/>(t-&gt;<ref refid="structuv__task__info_1ad157811debce6672bb6d00da7e90b6ca" kindref="member">task_period</ref><sp/>*<sp/>2)){</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvPanic(</highlight><highlight class="stringliteral">&quot;Critical<sp/>Task<sp/>Excessively<sp/>Delayed&quot;</highlight><highlight class="normal">,0);</highlight><highlight class="comment">//This<sp/>means<sp/>task<sp/>delayed<sp/>AF</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"></highlight></codeline>
<codeline lineno="1084"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1085"><highlight class="normal"></highlight></codeline>
<codeline lineno="1086"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"></highlight></codeline>
<codeline lineno="1088"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1089"><highlight class="normal"></highlight></codeline>
<codeline lineno="1102" refid="group__state__engine_1gaf2dbdd0d9d9aa8bcbef120661117fc5e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1gaf2dbdd0d9d9aa8bcbef120661117fc5e" kindref="member">uvTaskManager</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>args)<sp/><ref refid="mpu__wrappers_8h_1a4785c4f4a8c04b835139dcc2a6682078" kindref="member">PRIVILEGED_FUNCTION</ref>{</highlight></codeline>
<codeline lineno="1103"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>params<sp/>=<sp/>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*)<sp/>args;</highlight></codeline>
<codeline lineno="1104"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structtask__management__info" kindref="compound">task_management_info</ref>*<sp/>tmi<sp/>=<sp/>params-&gt;<ref refid="structuv__task__info_1ab0a6666d8589de0cbc508cc8b12c0945" kindref="member">tmi</ref>;<sp/></highlight><highlight class="comment">//Task<sp/>Manager<sp/>interface;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><sp/><sp/><sp/><sp/>tmi-&gt;<ref refid="structtask__management__info_1a29b374b2d26cc5a52c75160816da83aa" kindref="member">task_handle</ref><sp/>=<sp/>params-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>;</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"><sp/><sp/><sp/><sp/>tmi-&gt;<ref refid="structtask__management__info_1a82d650741c82974c81a22c6bdd8c556d" kindref="member">parent_msg_queue</ref><sp/>=<sp/>xQueueCreate(8,</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="structuv__task__msg__t" kindref="compound">uv_task_msg</ref>));</highlight><highlight class="comment">//our<sp/>good<sp/>ol<sp/>friend<sp/>the<sp/>message<sp/>queue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Init<sp/>the<sp/>variables<sp/>we<sp/>need</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__task__msg__t" kindref="compound">uv_task_msg</ref><sp/>incoming_msg;</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="uvfr__utils_8h_1ae0e8ee9ac0315ecdd228d9358e395c3d" kindref="member">uv_msg_type</ref><sp/>incoming_msg_type<sp/>=<sp/><ref refid="uvfr__utils_8h_1ab1a7ab8d68287c5f3027a59e355d32e0a1656d54e7fad0fc7b4ea4b113a866eae" kindref="member">UV_INVALID_MSG</ref>;</highlight></codeline>
<codeline lineno="1110"><highlight class="normal"></highlight></codeline>
<codeline lineno="1111"><highlight class="normal"></highlight></codeline>
<codeline lineno="1112"><highlight class="normal"></highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gac5868023f8ec284bd14c50db7a815e78" kindref="member">last_task_start_times</ref><sp/>=<sp/>uvMalloc(<ref refid="group__state__engine_1ga8a80fe70c2d06583bbcd00c5162860c5" kindref="member">MAX_NUM_MANAGED_TASKS</ref>*</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref>));</highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga0ae08e3e5e1cb6e0228da97c7e4326e0" kindref="member">last_task_end_times</ref><sp/>=<sp/>uvMalloc(<ref refid="group__state__engine_1ga8a80fe70c2d06583bbcd00c5162860c5" kindref="member">MAX_NUM_MANAGED_TASKS</ref>*</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref>));</highlight></codeline>
<codeline lineno="1115"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref><sp/>=<sp/>uvMalloc(<ref refid="group__state__engine_1ga8a80fe70c2d06583bbcd00c5162860c5" kindref="member">MAX_NUM_MANAGED_TASKS</ref>*</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(uint8_t));</highlight></codeline>
<codeline lineno="1116"><highlight class="normal"></highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/>uint32_t<sp/>late_tasks<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"></highlight></codeline>
<codeline lineno="1119"><highlight class="normal"></highlight></codeline>
<codeline lineno="1120"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1a46fb21e00ae0729d7515c0fbf2269796" kindref="member">BaseType_t</ref><sp/>queue_status;</highlight></codeline>
<codeline lineno="1121"><highlight class="normal"></highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(;;){<sp/></highlight><highlight class="comment">//Loop<sp/>checking<sp/>for<sp/>late<sp/>tasks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1123"><highlight class="normal"></highlight></codeline>
<codeline lineno="1124"><highlight class="normal"></highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vTaskDelayUntil(<sp/>&amp;last_time,<sp/>tick_period);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(params-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca0e75e398c2bbcb663eaeb98684ca69d6" kindref="member">UV_KILL_CMD</ref>){</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"></highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TASK<sp/>DESTRUCTOR:<sp/>CLEAN<sp/>UP<sp/>ANY<sp/>RESOURCES<sp/>USED<sp/>BY<sp/>THE<sp/>TASK<sp/>HERE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1129"><highlight class="normal"></highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvFree(<ref refid="group__state__engine_1gac5868023f8ec284bd14c50db7a815e78" kindref="member">last_task_start_times</ref>);</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvFree(<ref refid="group__state__engine_1ga0ae08e3e5e1cb6e0228da97c7e4326e0" kindref="member">last_task_end_times</ref>);</highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uvFree(<ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>);</highlight></codeline>
<codeline lineno="1133"><highlight class="normal"></highlight></codeline>
<codeline lineno="1134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gac5868023f8ec284bd14c50db7a815e78" kindref="member">last_task_start_times</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga0ae08e3e5e1cb6e0228da97c7e4326e0" kindref="member">last_task_end_times</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1137"><highlight class="normal"></highlight></codeline>
<codeline lineno="1138"><highlight class="normal"></highlight></codeline>
<codeline lineno="1139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1ga5f35b34432afed7f18f91fb8607f096f" kindref="member">killSelf</ref>(params);</highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(params-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca5f389a67f2a45fe1f51492b3b8f04077" kindref="member">UV_SUSPEND_CMD</ref>){</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"></highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TASK<sp/>SUSPENSION<sp/>DESTRUCTOR:<sp/>RELEASE<sp/>THINGS<sp/>LIKE<sp/>MUTICES<sp/>OR<sp/>SEMAPHORES,<sp/>BUT<sp/>NO<sp/>NEED<sp/>TO<sp/>DEALLOCATE<sp/>ANY<sp/>MEMORY</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1143"><highlight class="normal"></highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1gad6117850b55ad52be51d93915bcc313c" kindref="member">suspendSelf</ref>(params);</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1a84d4e660b04630be2939d91b3c2412f8" kindref="member">vTaskSuspend</ref>(NULL);</highlight></codeline>
<codeline lineno="1147"><highlight class="normal"></highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>tmp<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref><sp/>time<sp/>=<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>();</highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref><sp/>threshold<sp/>=<sp/>0xFF;</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref><sp/>tdiff<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i&lt;<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>;<sp/>i++){</highlight><highlight class="comment">//iterate<sp/>through<sp/>the<sp/>tasks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>&amp;(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[i]);</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"></highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((tmp-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>&amp;<sp/><ref refid="group__state__engine__api_1ga96c7c915194ecba48edd70def54a700b" kindref="member">UV_TASK_MANAGER_MASK</ref>)!=<sp/><ref refid="group__state__engine__api_1ga253c75b331d0976b9a414657cef780cd" kindref="member">UV_TASK_VEHICLE_APPLICATION</ref>){</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1158"><highlight class="normal"></highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>!=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88ad4da927019afea812b31d46d28b7354c" kindref="member">UV_TASK_RUNNING</ref>){</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[i]<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1163"><highlight class="normal"></highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[i]<sp/>&gt;<sp/>2){</highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1ga7dff9a1c0653941c1559398025cdec4c" kindref="member">uvLateTaskHandler</ref>(tmp,<sp/><ref refid="portmacro_8h_1a72723ba1e4a85ca14f25c2b9e066613d" kindref="member">portMAX_DELAY</ref>,<sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[i]);</highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"></highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tmp-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>&amp;<sp/><ref refid="group__state__engine__api_1gab37af27fe89f1987ee38bdb0bc945c43" kindref="member">UV_TASK_MISSION_CRITICAL</ref>){</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>threshold<sp/>=<sp/>(tmp-&gt;<ref refid="structuv__task__info_1ad157811debce6672bb6d00da7e90b6ca" kindref="member">task_period</ref>)*<ref refid="group__state__engine_1ga6f4abbac22d8261c588c551b1d153ef6" kindref="member">nc_throttling</ref>*(<ref refid="group__state__engine_1ga026f8ea8b80f88c90cb35e3ec3588237" kindref="member">os_settings</ref>-&gt;<ref refid="structuv__os__settings_1a49ce23050cb8eb64a0ad2c8eb59b9285" kindref="member">task_overshoot_margin_crit</ref>);</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>threshold<sp/>=<sp/>(tmp-&gt;<ref refid="structuv__task__info_1ad157811debce6672bb6d00da7e90b6ca" kindref="member">task_period</ref>)*<ref refid="group__state__engine_1ga6f4abbac22d8261c588c551b1d153ef6" kindref="member">nc_throttling</ref>*(<ref refid="group__state__engine_1ga026f8ea8b80f88c90cb35e3ec3588237" kindref="member">os_settings</ref>-&gt;<ref refid="structuv__os__settings_1abf5ff4b1c146e13bb9c39f95d3e59ce3" kindref="member">task_overshoot_margin_noncrit</ref>);</highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1173"><highlight class="normal"></highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tdiff<sp/>=<sp/>time<sp/>-<sp/>tmp-&gt;<ref refid="structuv__task__info_1a569da5121095d94816ad0985a5d9ddf0" kindref="member">last_execution_time</ref>;</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"></highlight></codeline>
<codeline lineno="1176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(tdiff<sp/>&gt;<sp/>threshold){</highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//YOU&apos;re<sp/>LATE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>late_tasks<sp/>|=<sp/>(0x01U&lt;&lt;i);</highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[i]<sp/>++;</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1ga7dff9a1c0653941c1559398025cdec4c" kindref="member">uvLateTaskHandler</ref>(tmp,<sp/>tdiff,<sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[i]);</highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//perhaps<sp/>I<sp/>judged<sp/>you<sp/>too<sp/>harshly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[i]<sp/>&gt;<sp/>0){</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[i]--;</highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>late_tasks<sp/>&amp;=<sp/>(0x01U&lt;&lt;i);</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1188"><highlight class="normal"></highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"></highlight></codeline>
<codeline lineno="1191"><highlight class="normal"></highlight></codeline>
<codeline lineno="1192"><highlight class="normal"></highlight></codeline>
<codeline lineno="1193"><highlight class="normal"></highlight></codeline>
<codeline lineno="1194"><highlight class="normal"></highlight></codeline>
<codeline lineno="1195"><highlight class="normal"></highlight></codeline>
<codeline lineno="1196"><highlight class="normal"></highlight></codeline>
<codeline lineno="1197"><highlight class="normal"></highlight></codeline>
<codeline lineno="1198"><highlight class="normal"></highlight></codeline>
<codeline lineno="1199"><highlight class="normal"></highlight></codeline>
<codeline lineno="1200"><highlight class="normal"></highlight></codeline>
<codeline lineno="1201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//HAL_GPIO_TogglePin(GPIOD,GPIO_PIN_15);<sp/>//BLUE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1202"><highlight class="normal"></highlight></codeline>
<codeline lineno="1203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(params-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca0e75e398c2bbcb663eaeb98684ca69d6" kindref="member">UV_KILL_CMD</ref><sp/>||<sp/>params-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca5f389a67f2a45fe1f51492b3b8f04077" kindref="member">UV_SUSPEND_CMD</ref>){</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">//<sp/>The<sp/>idea<sp/>here<sp/>is<sp/>to<sp/>skip<sp/>the<sp/>delay</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1206"><highlight class="normal"></highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1ga0e6167ef18c2ec8b65fbe070d0ffb6c9" kindref="member">uvTaskPeriodEnd</ref>(params);</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1209"><highlight class="normal"></highlight></codeline>
<codeline lineno="1210"><highlight class="normal"></highlight></codeline>
<codeline lineno="1211"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1212"><highlight class="normal"></highlight></codeline>
<codeline lineno="1217" refid="group__state__engine__backend_1ga43cdd5f23929fee4ba86d4fd0b60d6ad" refkind="member"><highlight class="normal"><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/><ref refid="group__state__engine__backend_1ga43cdd5f23929fee4ba86d4fd0b60d6ad" kindref="member">uvCreateServiceTask</ref>(){</highlight></codeline>
<codeline lineno="1218"><highlight class="normal"></highlight></codeline>
<codeline lineno="1219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref><sp/>&gt;=<sp/><ref refid="group__state__engine_1ga8a80fe70c2d06583bbcd00c5162860c5" kindref="member">MAX_NUM_MANAGED_TASKS</ref>){</highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1221"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"></highlight></codeline>
<codeline lineno="1228"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>_newtask<sp/>=<sp/>&amp;(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref>[<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>]);</highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref><sp/>=<sp/><ref refid="group__state__engine_1gae48b13e362d2b9d10ec61f516ea5c09f" kindref="member">_next_svc_task_id</ref>;</highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/>++<ref refid="group__state__engine_1gaf070a24ce066297b4a8276ddcb884b0c" kindref="member">_next_task_id</ref>;</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"></highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1233"><highlight class="normal"></highlight></codeline>
<codeline lineno="1234"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1afcd240d2b6b01b4acea600ef4dfe8fbc" kindref="member">task_function</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1aff45751f7189980589d55379d1d5a355" kindref="member">task_priority</ref><sp/>=<sp/><ref refid="cmsis__os_8h_1a7f2b42f1983b9107775ec2a1c69a849aa1485dec3702434a1ec3cb74c7a17a4af" kindref="member">osPriorityRealtime</ref>;<sp/></highlight><highlight class="comment">//DEPRECATED<sp/>PRIORITY<sp/>SYSTEM,<sp/>GET<sp/>THAT<sp/>SHIT<sp/>OUTTA<sp/>HERE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1236"><highlight class="normal"></highlight></codeline>
<codeline lineno="1237"><highlight class="normal"></highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a353ec6bf2c42ab0920f3d1e671e568a3" kindref="member">stack_size</ref><sp/>=<sp/><ref refid="uvfr__state__engine_8h_1a32571accb85a2d8f479c6066d7a46238" kindref="member">_UV_DEFAULT_TASK_STACK_SIZE</ref>;</highlight></codeline>
<codeline lineno="1239"><highlight class="normal"></highlight></codeline>
<codeline lineno="1240"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a529c3f9ad3ef9a8e387d875c7a118c7e" kindref="member">UV_TASK_NOT_STARTED</ref>;</highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1ab24dea3bde4de2d839bf15e65c2df0d6" kindref="member">active_states</ref><sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="1242"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a6986d7216c7f889164931b37ab752c29" kindref="member">deletion_states</ref><sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1aafd4e2d916f50b54b99fd02d63831e43" kindref="member">suspension_states</ref><sp/>=<sp/>0x00;</highlight></codeline>
<codeline lineno="1244"><highlight class="normal"></highlight></codeline>
<codeline lineno="1245"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a5d32fc8f47b905499257336c561d189b" kindref="member">parent</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1246"><highlight class="normal"></highlight></codeline>
<codeline lineno="1247"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1248"><highlight class="normal"></highlight></codeline>
<codeline lineno="1249"><highlight class="normal"><sp/><sp/><sp/><sp/>_newtask-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ga056a2272c9356c78597c5c82bc58db2f" kindref="member">UV_TASK_GENERIC_SVC</ref><sp/>|<sp/><ref refid="group__state__engine__api_1ga4d87bda0a72990876364bd8764777cb2" kindref="member">UV_TASK_SCD_IGNORE</ref>;</highlight></codeline>
<codeline lineno="1250"><highlight class="normal"></highlight></codeline>
<codeline lineno="1251"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_newtask;</highlight></codeline>
<codeline lineno="1252"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1253"><highlight class="normal"></highlight></codeline>
<codeline lineno="1257" refid="group__state__engine__backend_1ga91b9f84bc63d5808a3f70623ed8a0700" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga91b9f84bc63d5808a3f70623ed8a0700" kindref="member">uvStartSVCTask</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="1258"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="1260"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1261"><highlight class="normal"></highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!(t-&gt;<ref refid="structuv__task__info_1a6567a294eec7b11ac0d4bc3b927ef9e9" kindref="member">task_flags</ref><sp/>&amp;<sp/><ref refid="group__state__engine__api_1ga056a2272c9356c78597c5c82bc58db2f" kindref="member">UV_TASK_GENERIC_SVC</ref>)){<sp/></highlight><highlight class="comment">//not<sp/>a<sp/>svc<sp/>task</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1265"><highlight class="normal"></highlight></codeline>
<codeline lineno="1266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88ad4da927019afea812b31d46d28b7354c" kindref="member">UV_TASK_RUNNING</ref>){</highlight></codeline>
<codeline lineno="1267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="1269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea6aa86f67f1dcd70789b27731c3ac4e7a" kindref="member">UV_ABORTED</ref>;<sp/></highlight><highlight class="comment">//only<sp/>one<sp/>instance<sp/>of<sp/>this<sp/>particular<sp/>task<sp/>is<sp/>permitted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"></highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a147f6febce613c666fe922907472ca0f" kindref="member">UV_TASK_SUSPENDED</ref>){</highlight></codeline>
<codeline lineno="1274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="1276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1a84a1584f29fb7736a1aa72ad5b3e9b44" kindref="member">vTaskResume</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="1278"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"></highlight></codeline>
<codeline lineno="1280"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1a46fb21e00ae0729d7515c0fbf2269796" kindref="member">BaseType_t</ref><sp/>retval;</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"><sp/><sp/><sp/><sp/>retval<sp/>=<sp/>xTaskCreate(t-&gt;<ref refid="structuv__task__info_1afcd240d2b6b01b4acea600ef4dfe8fbc" kindref="member">task_function</ref>,t-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref>,t-&gt;<ref refid="structuv__task__info_1a353ec6bf2c42ab0920f3d1e671e568a3" kindref="member">stack_size</ref>,t-&gt;<ref refid="structuv__task__info_1ae255dff9b38fc8c0754085060e8ae699" kindref="member">task_args</ref>,t-&gt;<ref refid="structuv__task__info_1aff45751f7189980589d55379d1d5a355" kindref="member">task_priority</ref>,&amp;(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>));</highlight></codeline>
<codeline lineno="1282"><highlight class="normal"></highlight></codeline>
<codeline lineno="1283"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//This<sp/>creates<sp/>a<sp/>task<sp/>cause<sp/>the<sp/>necessary<sp/>conditions<sp/>have<sp/>been<sp/>met</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1284"><highlight class="normal"></highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(retval<sp/>!=<sp/><ref refid="projdefs_8h_1a07848d3078849bd32353c69d30a479b3" kindref="member">pdPASS</ref>){</highlight></codeline>
<codeline lineno="1286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Something<sp/>has<sp/>gone<sp/>wrong<sp/>with<sp/>the<sp/>task<sp/>creation.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1289"><highlight class="normal"></highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//t-&gt;task_handle-&gt;uvTaskHandle<sp/>=<sp/>t;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"></highlight></codeline>
<codeline lineno="1293"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1294"><highlight class="normal"></highlight></codeline>
<codeline lineno="1298" refid="group__state__engine__backend_1ga87455110c1a898b9294c66c14043f02a" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga87455110c1a898b9294c66c14043f02a" kindref="member">uvSuspendSVCTask</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="1299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1302"><highlight class="normal"></highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a147f6febce613c666fe922907472ca0f" kindref="member">UV_TASK_SUSPENDED</ref>){</highlight></codeline>
<codeline lineno="1304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea6aa86f67f1dcd70789b27731c3ac4e7a" kindref="member">UV_ABORTED</ref>;</highlight></codeline>
<codeline lineno="1305"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1306"><highlight class="normal"></highlight></codeline>
<codeline lineno="1307"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="1308"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1309"><highlight class="normal"></highlight></codeline>
<codeline lineno="1313" refid="group__state__engine__backend_1ga02ceb2f70d4474d4734de6494aca8978" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1ga02ceb2f70d4474d4734de6494aca8978" kindref="member">uvDeleteSVCTask</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="1314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1317"><highlight class="normal"></highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a529c3f9ad3ef9a8e387d875c7a118c7e" kindref="member">UV_TASK_NOT_STARTED</ref>)<sp/>||<sp/>(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691" kindref="member">UV_TASK_DELETED</ref>)){</highlight></codeline>
<codeline lineno="1319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea6aa86f67f1dcd70789b27731c3ac4e7a" kindref="member">UV_ABORTED</ref>;</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1321"><highlight class="normal"></highlight></codeline>
<codeline lineno="1322"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref>)<sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88a147f6febce613c666fe922907472ca0f" kindref="member">UV_TASK_SUSPENDED</ref>){</highlight></codeline>
<codeline lineno="1323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Somebody<sp/>has<sp/>suspended<sp/>the<sp/>task.<sp/>Get<sp/>it&apos;s<sp/>ass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1a27ff4ebce26565bef136bda84201ff80" kindref="member">vTaskDelete</ref>(t-&gt;<ref refid="structuv__task__info_1a5347f41c4b15b2d6b039c339613fde43" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="1325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="1326"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1327"><highlight class="normal"></highlight></codeline>
<codeline lineno="1328"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t-&gt;<ref refid="structuv__task__info_1a43e5b3136b38dde4272aa510c5349ba3" kindref="member">task_state</ref><sp/>==<sp/><ref refid="group__state__engine__api_1ggac94b6bd11853173599ccff034055cc88ad4da927019afea812b31d46d28b7354c" kindref="member">UV_TASK_RUNNING</ref>){</highlight></codeline>
<codeline lineno="1329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//kindly<sp/>tell<sp/>it<sp/>to<sp/>fucking<sp/>stop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1af532b5031cd6a168a3ec45ab9ead4f23" kindref="member">cmd_data</ref><sp/>=<sp/><ref refid="group__state__engine__api_1ggaf11e8677926913f2dd803fabbed3455ca0e75e398c2bbcb663eaeb98684ca69d6" kindref="member">UV_KILL_CMD</ref>;</highlight></codeline>
<codeline lineno="1331"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1332"><highlight class="normal"></highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="1334"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1335"><highlight class="normal"></highlight></codeline>
<codeline lineno="1341" refid="group__state__engine__backend_1gad930776c44487128dbb60294a66a68e3" refkind="member"><highlight class="normal"><ref refid="can_8h_1aef3770e45bbacbf527fd93dd80eea9b9" kindref="member">uv_status</ref><sp/><ref refid="group__state__engine__backend_1gad930776c44487128dbb60294a66a68e3" kindref="member">uvRestartSVCTask</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="1342"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//force<sp/>task<sp/>to<sp/>relinquish<sp/>resources</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1343"><highlight class="normal"></highlight></codeline>
<codeline lineno="1344"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//ask<sp/>nicely<sp/>for<sp/>task<sp/>to<sp/>be<sp/>deleted</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1345"><highlight class="normal"></highlight></codeline>
<codeline lineno="1346"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine__backend_1ga02ceb2f70d4474d4734de6494aca8978" kindref="member">uvDeleteSVCTask</ref>(t)<sp/>==<sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>){</highlight></codeline>
<codeline lineno="1347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//if<sp/>that<sp/>fails,<sp/>forcibly<sp/>delete<sp/>task</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__backend_1gae0caac28206291f3dc5c416f11892edd" kindref="member">uvKillTaskViolently</ref>(t);</highlight></codeline>
<codeline lineno="1349"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1350"><highlight class="normal"></highlight></codeline>
<codeline lineno="1351"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//try<sp/>to<sp/>start<sp/>the<sp/>task<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1352"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine__backend_1ga91b9f84bc63d5808a3f70623ed8a0700" kindref="member">uvStartSVCTask</ref>(t)<sp/>==<sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>){</highlight></codeline>
<codeline lineno="1353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>;</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1355"><highlight class="normal"></highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea480ef4e56d17703f0629bfe1e06bc4f0" kindref="member">UV_ERROR</ref>;</highlight></codeline>
<codeline lineno="1357"><highlight class="normal"></highlight></codeline>
<codeline lineno="1358"><highlight class="normal"></highlight></codeline>
<codeline lineno="1359"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1360"><highlight class="normal"></highlight></codeline>
<codeline lineno="1365" refid="group__state__engine_1gaff684308203d45e9e16ad3d115c54279" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1gaff684308203d45e9e16ad3d115c54279" kindref="member">uvSVCTaskManager</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>args){</highlight></codeline>
<codeline lineno="1366"><highlight class="normal"></highlight></codeline>
<codeline lineno="1367"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structtask__management__info" kindref="compound">task_management_info</ref>*<sp/>params<sp/>=(<ref refid="structtask__management__info" kindref="compound">task_management_info</ref>*)<sp/>args;</highlight></codeline>
<codeline lineno="1368"><highlight class="normal"></highlight></codeline>
<codeline lineno="1377"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//_svc_task_register<sp/>=<sp/>uvMalloc(sizeof(uv_task_info)*MAX_NUM_SVC_TASKS);<sp/>//allocate<sp/>mem<sp/>for<sp/>the<sp/>svc<sp/>task<sp/>register</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1378"><highlight class="normal"></highlight></codeline>
<codeline lineno="1379"><highlight class="normal"></highlight></codeline>
<codeline lineno="1380"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1ga6b49ab568bed9d9189782eebb90545b5" kindref="member">_task_register</ref><sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="uvfr__utils_8h_1a92b5ac44171d49acd084c274385a043a" kindref="member">__uvInitPanic</ref>();<sp/></highlight><highlight class="comment">//Double<sp/>Plus<sp/>Ungood</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1382"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1383"><highlight class="normal"></highlight></codeline>
<codeline lineno="1384"><highlight class="normal"></highlight></codeline>
<codeline lineno="1385"><highlight class="normal"></highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vTaskSuspend(params-&gt;task_handle);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1387"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//iterate<sp/>through<sp/>the<sp/>list</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1388"><highlight class="normal"></highlight></codeline>
<codeline lineno="1389"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(;;){</highlight></codeline>
<codeline lineno="1390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Hold<sp/>for<sp/>a<sp/>command</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1aa154068cecd7f31446a7a84af44ab1a3" kindref="member">vTaskDelay</ref>(100);</highlight></codeline>
<codeline lineno="1392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Do<sp/>different<sp/>things<sp/>depending<sp/>on<sp/>what<sp/>the<sp/>value<sp/>of<sp/>the<sp/>command<sp/>is</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1393"><highlight class="normal"></highlight></codeline>
<codeline lineno="1394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//update<sp/>various<sp/>parameters<sp/>that<sp/>need<sp/>updated</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1395"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1396"><highlight class="normal"></highlight></codeline>
<codeline lineno="1408"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//uvFree(_svc_task_register);<sp/>//Free<sp/>this<sp/>to<sp/>avoid<sp/>mem<sp/>leaks</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1409"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="task_8h_1a27ff4ebce26565bef136bda84201ff80" kindref="member">vTaskDelete</ref>(params-&gt;<ref refid="structtask__management__info_1a29b374b2d26cc5a52c75160816da83aa" kindref="member">task_handle</ref>);</highlight></codeline>
<codeline lineno="1410"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1411"><highlight class="normal"></highlight></codeline>
<codeline lineno="1412" refid="group__state__engine_1ga9f31832194c2c9dddce43bf53eb86d5b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1ga9f31832194c2c9dddce43bf53eb86d5b" kindref="member">compareTaskByName</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t1,<sp/><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t2){</highlight></codeline>
<codeline lineno="1413"><highlight class="normal"></highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t1<sp/>==<sp/>NULL<sp/>||<sp/>t2<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1417"><highlight class="normal"></highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>name1<sp/>=<sp/>t1-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref>;</highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>name2<sp/>=<sp/>t2-&gt;<ref refid="structuv__task__info_1ad24b438130bb3098ee5e855222dff21d" kindref="member">task_name</ref>;</highlight></codeline>
<codeline lineno="1420"><highlight class="normal"></highlight></codeline>
<codeline lineno="1421"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i&lt;16;<sp/>i++){</highlight></codeline>
<codeline lineno="1422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(name1[i]<sp/>==<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(name2[i]<sp/>==<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="1424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;<sp/></highlight><highlight class="comment">//name<sp/>2<sp/>has<sp/>not<sp/>ended<sp/>but<sp/>name<sp/>1<sp/>has</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(name2[i]<sp/>==<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="1429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1431"><highlight class="normal"></highlight></codeline>
<codeline lineno="1432"><highlight class="normal"></highlight></codeline>
<codeline lineno="1433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(name1[i]<sp/>&gt;<sp/>name2[i]){</highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;</highlight></codeline>
<codeline lineno="1435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(name1[i]<sp/>&lt;<sp/>name2[i]){</highlight></codeline>
<codeline lineno="1436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1438"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"></highlight></codeline>
<codeline lineno="1440"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1441"><highlight class="normal"></highlight></codeline>
<codeline lineno="1442"><highlight class="normal"></highlight></codeline>
<codeline lineno="1443"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"></highlight></codeline>
<codeline lineno="1448" refid="group__state__engine__backend_1ga6edf594e7dcaaa6397384eadfbe0e984" refkind="member"><highlight class="normal"><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/><ref refid="group__state__engine__backend_1ga6edf594e7dcaaa6397384eadfbe0e984" kindref="member">uvGetTaskFromName</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>tsk_name){</highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1450"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1451"><highlight class="normal"></highlight></codeline>
<codeline lineno="1460" refid="group__state__engine__backend_1ga35ebd76bbdf6f6d800a0ee2f5c5b1253" refkind="member"><highlight class="normal"><ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/><ref refid="group__state__engine__backend_1ga35ebd76bbdf6f6d800a0ee2f5c5b1253" kindref="member">uvGetTaskFromRTOSHandle</ref>(<ref refid="structtsk_task_control_block" kindref="compound">TaskHandle_t</ref><sp/>t_handle){</highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(t_handle<sp/>==<sp/>NULL){</highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1463"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1465"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1466"><highlight class="normal"></highlight></codeline>
<codeline lineno="1467"><highlight class="normal"><sp/></highlight><highlight class="comment">//end<sp/>of<sp/>backend</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1468"><highlight class="normal"></highlight></codeline>
<codeline lineno="1469" refid="group__state__engine__api_1ga0e6167ef18c2ec8b65fbe070d0ffb6c9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__state__engine_1ga0e6167ef18c2ec8b65fbe070d0ffb6c9" kindref="member">uvTaskPeriodEnd</ref>(<ref refid="structuv__task__info" kindref="compound">uv_task_info</ref>*<sp/>t){</highlight></codeline>
<codeline lineno="1470"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//BaseType_t<sp/>successful_delay;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1471"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>is_late<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1472"><highlight class="normal"></highlight></codeline>
<codeline lineno="1473"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref><sp/>end_of_loop_time<sp/>=<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>;</highlight></codeline>
<codeline lineno="1474"><highlight class="normal"></highlight></codeline>
<codeline lineno="1475"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((end_of_loop_time<sp/>-<sp/>t-&gt;<ref refid="structuv__task__info_1a569da5121095d94816ad0985a5d9ddf0" kindref="member">last_execution_time</ref>)&gt;t-&gt;<ref refid="structuv__task__info_1ad157811debce6672bb6d00da7e90b6ca" kindref="member">task_period</ref>){</highlight></codeline>
<codeline lineno="1476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>is_late<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="1477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref><sp/>!=<sp/>NULL){</highlight></codeline>
<codeline lineno="1478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>]++;<sp/></highlight><highlight class="comment">//missed<sp/>a<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1480"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="1481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref><sp/>!=<sp/>NULL){</highlight></codeline>
<codeline lineno="1482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>]<sp/>&gt;<sp/>0){</highlight></codeline>
<codeline lineno="1483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine_1gaf622d52254e824f6da1204abc93b18db" kindref="member">task_tardiness</ref>[t-&gt;<ref refid="structuv__task__info_1a8ed5c619d9eea62c2beb08fa2db6b092" kindref="member">task_id</ref>]--;<sp/></highlight><highlight class="comment">//missed<sp/>a<sp/>period</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1486"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1487"><highlight class="normal"></highlight></codeline>
<codeline lineno="1488"><highlight class="normal"></highlight></codeline>
<codeline lineno="1489"><highlight class="normal"></highlight></codeline>
<codeline lineno="1490"><highlight class="normal"></highlight></codeline>
<codeline lineno="1491"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!is_late){</highlight><highlight class="comment">//<sp/>if<sp/>the<sp/>task<sp/>identifies<sp/>that<sp/>it<sp/>is<sp/>late,<sp/>it<sp/>will<sp/>try<sp/>to<sp/>catch<sp/>up<sp/>by<sp/>not<sp/>bothering<sp/>with<sp/>the<sp/>delay</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__api_1ga3cab3b3fd6589348dceaf91b14e2a6ef" kindref="member">uvTaskSetDelayBit</ref>(t);</highlight></codeline>
<codeline lineno="1493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="task_8h_1a067da3e949e248096ec6c01f9cb75a47" kindref="member">vTaskDelayUntil</ref>(&amp;t-&gt;<ref refid="structuv__task__info_1a569da5121095d94816ad0985a5d9ddf0" kindref="member">last_execution_time</ref>,<ref refid="projdefs_8h_1a353d0f62b82a402cb3db63706c81ec3f" kindref="member">pdMS_TO_TICKS</ref>(t-&gt;<ref refid="structuv__task__info_1ad157811debce6672bb6d00da7e90b6ca" kindref="member">task_period</ref><sp/>*<sp/><ref refid="group__state__engine_1ga6f4abbac22d8261c588c551b1d153ef6" kindref="member">nc_throttling</ref>));</highlight></codeline>
<codeline lineno="1494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__state__engine__api_1ga2d3d223399d12a0af224266487f35483" kindref="member">uvTaskResetDelayBit</ref>(t);</highlight></codeline>
<codeline lineno="1495"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1496"><highlight class="normal"></highlight></codeline>
<codeline lineno="1497"><highlight class="normal"><sp/><sp/><sp/><sp/>t-&gt;<ref refid="structuv__task__info_1a569da5121095d94816ad0985a5d9ddf0" kindref="member">last_execution_time</ref><sp/>=<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>();</highlight></codeline>
<codeline lineno="1498"><highlight class="normal"></highlight></codeline>
<codeline lineno="1499"><highlight class="normal"></highlight></codeline>
<codeline lineno="1500"><highlight class="normal"></highlight></codeline>
<codeline lineno="1501"><highlight class="normal"></highlight></codeline>
<codeline lineno="1502"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1503"><highlight class="normal"></highlight></codeline>
<codeline lineno="1512" refid="uvfr__state__engine_8c_1aed09350c45d767229fd9e382244de3f1" refkind="member"><highlight class="normal">__weak<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="uvfr__state__engine_8c_1aed09350c45d767229fd9e382244de3f1" kindref="member">vApplicationIdleHook</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>){</highlight></codeline>
<codeline lineno="1513"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1514"><highlight class="normal"><sp/><sp/><sp/><sp/>i++;</highlight></codeline>
<codeline lineno="1515"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1516"><highlight class="normal"></highlight></codeline>
<codeline lineno="1517" refid="uvfr__state__engine_8c_1a2dd1013c5ef8f355ac2f1479e36ec659" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structx_s_t_a_t_i_c___t_c_b" kindref="compound">StaticTask_t</ref><sp/><ref refid="uvfr__state__engine_8c_1a2dd1013c5ef8f355ac2f1479e36ec659" kindref="member">xIdleTaskTCBBuffer</ref>;</highlight></codeline>
<codeline lineno="1518" refid="uvfr__state__engine_8c_1af311b04396149ce536fe1a3b5f127445" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portmacro_8h_1a84e9a8ba132feed0b2401c1f4e2ac63c" kindref="member">StackType_t</ref><sp/><ref refid="uvfr__state__engine_8c_1af311b04396149ce536fe1a3b5f127445" kindref="member">xIdleStack</ref>[<ref refid="_free_r_t_o_s_config_8h_1a6c534a6cf8a00528fe0be42083484f9a" kindref="member">configMINIMAL_STACK_SIZE</ref>];</highlight></codeline>
<codeline lineno="1519"><highlight class="normal"></highlight></codeline>
<codeline lineno="1520" refid="uvfr__state__engine_8c_1a1988aa923b19fa6f31c93afa7773f793" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="uvfr__state__engine_8c_1a1988aa923b19fa6f31c93afa7773f793" kindref="member">vApplicationGetIdleTaskMemory</ref>(<sp/><ref refid="structx_s_t_a_t_i_c___t_c_b" kindref="compound">StaticTask_t</ref><sp/>**ppxIdleTaskTCBBuffer,<sp/><ref refid="portmacro_8h_1a84e9a8ba132feed0b2401c1f4e2ac63c" kindref="member">StackType_t</ref><sp/>**ppxIdleTaskStackBuffer,<sp/>uint32_t<sp/>*pulIdleTaskStackSize<sp/>)</highlight></codeline>
<codeline lineno="1521"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1522"><highlight class="normal"><sp/><sp/>*ppxIdleTaskTCBBuffer<sp/>=<sp/>&amp;<ref refid="uvfr__state__engine_8c_1a2dd1013c5ef8f355ac2f1479e36ec659" kindref="member">xIdleTaskTCBBuffer</ref>;</highlight></codeline>
<codeline lineno="1523"><highlight class="normal"><sp/><sp/>*ppxIdleTaskStackBuffer<sp/>=<sp/>&amp;<ref refid="uvfr__state__engine_8c_1af311b04396149ce536fe1a3b5f127445" kindref="member">xIdleStack</ref>[0];</highlight></codeline>
<codeline lineno="1524"><highlight class="normal"><sp/><sp/>*pulIdleTaskStackSize<sp/>=<sp/><ref refid="_free_r_t_o_s_config_8h_1a6c534a6cf8a00528fe0be42083484f9a" kindref="member">configMINIMAL_STACK_SIZE</ref>;</highlight></codeline>
<codeline lineno="1525"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>place<sp/>for<sp/>user<sp/>code<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1526"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1527"><highlight class="normal"></highlight></codeline>
<codeline lineno="1528" refid="uvfr__state__engine_8c_1a38d479dc434b1716ec493c97d862680e" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structx_s_t_a_t_i_c___t_c_b" kindref="compound">StaticTask_t</ref><sp/><ref refid="uvfr__state__engine_8c_1a38d479dc434b1716ec493c97d862680e" kindref="member">xTimerTaskTCBBuffer</ref>;</highlight></codeline>
<codeline lineno="1529" refid="uvfr__state__engine_8c_1ac4bbf08a713d317769fd40e9474a279b" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="portmacro_8h_1a84e9a8ba132feed0b2401c1f4e2ac63c" kindref="member">StackType_t</ref><sp/><ref refid="uvfr__state__engine_8c_1ac4bbf08a713d317769fd40e9474a279b" kindref="member">xTimerStack</ref>[<ref refid="_free_r_t_o_s_config_8h_1aed7c7ebcdee603583a55e8ce04e55841" kindref="member">configTIMER_TASK_STACK_DEPTH</ref>];</highlight></codeline>
<codeline lineno="1530"><highlight class="normal"></highlight></codeline>
<codeline lineno="1531" refid="uvfr__state__engine_8c_1a1e80ecbd3fc2d04f18d6409ffa893a86" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="uvfr__state__engine_8c_1a1e80ecbd3fc2d04f18d6409ffa893a86" kindref="member">vApplicationGetTimerTaskMemory</ref>(<sp/><ref refid="structx_s_t_a_t_i_c___t_c_b" kindref="compound">StaticTask_t</ref><sp/>**ppxTimerTaskTCBBuffer,<sp/><ref refid="portmacro_8h_1a84e9a8ba132feed0b2401c1f4e2ac63c" kindref="member">StackType_t</ref><sp/>**ppxTimerTaskStackBuffer,<sp/>uint32_t<sp/>*pulTimerTaskStackSize<sp/>)</highlight></codeline>
<codeline lineno="1532"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1533"><highlight class="normal"><sp/><sp/>*ppxTimerTaskTCBBuffer<sp/>=<sp/>&amp;<ref refid="uvfr__state__engine_8c_1a38d479dc434b1716ec493c97d862680e" kindref="member">xTimerTaskTCBBuffer</ref>;</highlight></codeline>
<codeline lineno="1534"><highlight class="normal"><sp/><sp/>*ppxTimerTaskStackBuffer<sp/>=<sp/>&amp;<ref refid="uvfr__state__engine_8c_1ac4bbf08a713d317769fd40e9474a279b" kindref="member">xTimerStack</ref>[0];</highlight></codeline>
<codeline lineno="1535"><highlight class="normal"><sp/><sp/>*pulTimerTaskStackSize<sp/>=<sp/><ref refid="_free_r_t_o_s_config_8h_1aed7c7ebcdee603583a55e8ce04e55841" kindref="member">configTIMER_TASK_STACK_DEPTH</ref>;</highlight></codeline>
<codeline lineno="1536"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>place<sp/>for<sp/>user<sp/>code<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1537"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="Core/Src/uvfr_state_engine.c"/>
  </compounddef>
</doxygen>
