<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.12.0" xml:lang="en-US">
  <compounddef id="bms_8c" kind="file" language="C++">
    <compoundname>bms.c</compoundname>
    <includes refid="main_8h" local="yes">main.h</includes>
    <includes refid="bms_8h" local="yes">bms.h</includes>
    <includes refid="constants_8h" local="yes">constants.h</includes>
    <includes refid="pdu_8h" local="yes">pdu.h</includes>
    <includes refid="can_8h" local="yes">can.h</includes>
    <includes refid="tim_8h" local="yes">tim.h</includes>
    <includes refid="dash_8h" local="yes">dash.h</includes>
    <includes refid="uvfr__utils_8h" local="yes">uvfr_utils.h</includes>
    <incdepgraph>
      <node id="34">
        <label>cmsis_os.h</label>
        <link refid="cmsis__os_8h"/>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="35" relation="include">
        </childnode>
        <childnode refid="32" relation="include">
        </childnode>
        <childnode refid="33" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
        <childnode refid="36" relation="include">
        </childnode>
      </node>
      <node id="15">
        <label>freeRTOS.h</label>
        <link refid="_free_r_t_o_s_8h"/>
        <childnode refid="16" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
        <childnode refid="20" relation="include">
        </childnode>
      </node>
      <node id="18">
        <label>FreeRTOSConfig.h</label>
        <link refid="_free_r_t_o_s_config_8h"/>
      </node>
      <node id="21">
        <label>deprecated_definitions.h</label>
        <link refid="deprecated__definitions_8h"/>
      </node>
      <node id="35">
        <label>event_groups.h</label>
        <link refid="event__groups_8h"/>
        <childnode refid="36" relation="include">
        </childnode>
      </node>
      <node id="31">
        <label>list.h</label>
        <link refid="list_8h"/>
      </node>
      <node id="37">
        <label>message_buffer.h</label>
        <link refid="message__buffer_8h"/>
        <childnode refid="38" relation="include">
        </childnode>
      </node>
      <node id="24">
        <label>mpu_wrappers.h</label>
        <link refid="mpu__wrappers_8h"/>
      </node>
      <node id="20">
        <label>portable.h</label>
        <link refid="portable_8h"/>
        <childnode refid="21" relation="include">
        </childnode>
        <childnode refid="22" relation="include">
        </childnode>
        <childnode refid="24" relation="include">
        </childnode>
      </node>
      <node id="19">
        <label>projdefs.h</label>
        <link refid="projdefs_8h"/>
      </node>
      <node id="32">
        <label>queue.h</label>
        <link refid="queue_8h"/>
        <childnode refid="30" relation="include">
        </childnode>
      </node>
      <node id="33">
        <label>semphr.h</label>
        <link refid="semphr_8h"/>
        <childnode refid="32" relation="include">
        </childnode>
      </node>
      <node id="38">
        <label>stream_buffer.h</label>
        <link refid="stream__buffer_8h"/>
      </node>
      <node id="30">
        <label>task.h</label>
        <link refid="task_8h"/>
        <childnode refid="31" relation="include">
        </childnode>
      </node>
      <node id="36">
        <label>timers.h</label>
        <link refid="timers_8h"/>
        <childnode refid="30" relation="include">
        </childnode>
      </node>
      <node id="22">
        <label>portmacro.h</label>
        <link refid="portmacro_8h"/>
        <childnode refid="23" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>adc.h</label>
        <link refid="adc_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="28">
        <label>bms.h</label>
        <link refid="bms_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>can.h</label>
        <link refid="can_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>constants.h</label>
        <link refid="constants_8h"/>
      </node>
      <node id="26">
        <label>daq.h</label>
        <link refid="daq_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="27" relation="include">
        </childnode>
      </node>
      <node id="42">
        <label>dash.h</label>
        <link refid="dash_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>dma.h</label>
        <link refid="dma_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="25">
        <label>driving_loop.h</label>
        <link refid="driving__loop_8h"/>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="12">
        <label>gpio.h</label>
        <link refid="gpio_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="43">
        <label>imd.h</label>
        <link refid="imd_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>main.h</label>
        <link refid="main_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="14">
        <label>motor_controller.h</label>
        <link refid="motor__controller_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="48">
        <label>odometer.h</label>
        <link refid="odometer_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="44">
        <label>pdu.h</label>
        <link refid="pdu_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="27">
        <label>rb_tree.h</label>
        <link refid="rb__tree_8h"/>
      </node>
      <node id="47">
        <label>temp_monitoring.h</label>
        <link refid="temp__monitoring_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>tim.h</label>
        <link refid="tim_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="45">
        <label>uvfr_conifer.h</label>
        <link refid="uvfr__conifer_8h"/>
        <childnode refid="23" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
      </node>
      <node id="39">
        <label>uvfr_diagnostics.h</label>
        <link refid="uvfr__diagnostics_8h"/>
        <childnode refid="40" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>uvfr_global_config.h</label>
        <link refid="uvfr__global__config_8h"/>
      </node>
      <node id="13">
        <label>uvfr_settings.h</label>
        <link refid="uvfr__settings_8h"/>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="26" relation="include">
        </childnode>
        <childnode refid="28" relation="include">
        </childnode>
      </node>
      <node id="29">
        <label>uvfr_state_engine.h</label>
        <link refid="uvfr__state__engine_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
        <childnode refid="32" relation="include">
        </childnode>
        <childnode refid="33" relation="include">
        </childnode>
        <childnode refid="34" relation="include">
        </childnode>
        <childnode refid="37" relation="include">
        </childnode>
      </node>
      <node id="5">
        <label>uvfr_utils.h</label>
        <link refid="uvfr__utils_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="29" relation="include">
        </childnode>
        <childnode refid="39" relation="include">
        </childnode>
        <childnode refid="27" relation="include">
        </childnode>
        <childnode refid="41" relation="include">
        </childnode>
        <childnode refid="28" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
        <childnode refid="42" relation="include">
        </childnode>
        <childnode refid="43" relation="include">
        </childnode>
        <childnode refid="44" relation="include">
        </childnode>
        <childnode refid="26" relation="include">
        </childnode>
        <childnode refid="45" relation="include">
        </childnode>
        <childnode refid="46" relation="include">
        </childnode>
        <childnode refid="25" relation="include">
        </childnode>
        <childnode refid="47" relation="include">
        </childnode>
        <childnode refid="48" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="23" relation="include">
        </childnode>
        <childnode refid="34" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="37" relation="include">
        </childnode>
        <childnode refid="30" relation="include">
        </childnode>
      </node>
      <node id="41">
        <label>uvfr_vehicle_commands.h</label>
        <link refid="uvfr__vehicle__commands_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="46">
        <label>uvfr_vehicle_logger.h</label>
        <link refid="uvfr__vehicle__logger_8h"/>
        <childnode refid="17" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="29" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>Core/Src/bms.c</label>
        <link refid="bms_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="28" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="44" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
        <childnode refid="42" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>stdarg.h</label>
      </node>
      <node id="16">
        <label>stddef.h</label>
      </node>
      <node id="17">
        <label>stdint.h</label>
      </node>
      <node id="23">
        <label>stdlib.h</label>
      </node>
      <node id="3">
        <label>stm32f4xx_hal.h</label>
      </node>
      <node id="40">
        <label>string.h</label>
      </node>
    </incdepgraph>
    <sectiondef kind="define">
      <memberdef kind="define" id="bms_8c_1a79f5e585e6fa5d54c855cf1a3b16ff88" prot="public" static="no">
        <name>bms_settings</name>
        <initializer><ref refid="uvfr__settings_8h_1a03566822d1b8893362970a459bd67daf" kindref="member">current_vehicle_settings</ref>-&gt;bms_settings</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="12" column="9" bodyfile="Core/Src/bms.c" bodystart="12" bodyend="-1"/>
        <referencedby refid="bms_8h_1aa9af83736568f74c94d41f3f16adf513" compoundref="bms_8c" startline="100" endline="140">BMS_Init</referencedby>
      </memberdef>
    </sectiondef>
    <sectiondef kind="var">
      <memberdef kind="variable" id="bms_8c_1a28e4314b233b9140e73e4fd0bab7e354" prot="public" static="no" mutable="no">
        <type><ref refid="structbms__settings__t" kindref="compound">bms_settings_t</ref></type>
        <definition>bms_settings_t default_bms_settings</definition>
        <argsstring></argsstring>
        <name>default_bms_settings</name>
        <initializer>= {
.BMS_CAN_timeout = 200, 
.max_cell_temp = 500,
.min_cell_temp = -200,
.min_soc = 10,
.min_cell_voltage = 2.5,
.max_cell_voltage = 4.2,
.max_pack_voltage = 5000,
.max_variance_between_cells = 1
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="14" column="16" bodyfile="Core/Src/bms.c" bodystart="14" bodyend="23"/>
        <referencedby refid="uvfr__settings_8h_1add1ebdaa7f93f2a43ca6afc6e05fdd44" compoundref="uvfr__settings_8c" startline="250" endline="275">setupDefaultSettings</referencedby>
        <referencedby refid="uvfr__settings_8c_1a5f5ab3b99bc259455a2ec79144422450" compoundref="uvfr__settings_8c" startline="1155" endline="1236">uvResetFlashToDefault</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a4081f615c3b206c0996bb9a22516f115" prot="public" static="no" mutable="no">
        <type><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref></type>
        <definition>TickType_t bms_last_msg_time</definition>
        <argsstring></argsstring>
        <name>bms_last_msg_time</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="31" column="12" bodyfile="Core/Src/bms.c" bodystart="31" bodyend="-1"/>
        <referencedby refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" compoundref="bms_8c" startline="47" endline="72">BMS_msg1</referencedby>
        <referencedby refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" compoundref="bms_8c" startline="75" endline="98">BMS_msg2</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" prot="public" static="no" mutable="no">
        <type>uint8_t</type>
        <definition>uint8_t is_bms_connected</definition>
        <argsstring></argsstring>
        <name>is_bms_connected</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="32" column="9" bodyfile="Core/Src/bms.c" bodystart="32" bodyend="-1"/>
        <referencedby refid="bms_8h_1aa9af83736568f74c94d41f3f16adf513" compoundref="bms_8c" startline="100" endline="140">BMS_Init</referencedby>
        <referencedby refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" compoundref="bms_8c" startline="47" endline="72">BMS_msg1</referencedby>
        <referencedby refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" compoundref="bms_8c" startline="75" endline="98">BMS_msg2</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a2ef021ab39a98f64902d656ac099f8a9" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t packCurrent</definition>
        <argsstring></argsstring>
        <name>packCurrent</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="34" column="10" bodyfile="Core/Src/bms.c" bodystart="34" bodyend="-1"/>
        <referencedby refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" compoundref="bms_8c" startline="47" endline="72">BMS_msg1</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a178a2c12bb1a2c720fcde0ef2cd6f1f1" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t packVoltage</definition>
        <argsstring></argsstring>
        <name>packVoltage</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="35" column="10" bodyfile="Core/Src/bms.c" bodystart="35" bodyend="-1"/>
        <referencedby refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" compoundref="bms_8c" startline="47" endline="72">BMS_msg1</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a4fe005c273fb4a65d7f0ae7fb04b850e" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t stateOfCharge</definition>
        <argsstring></argsstring>
        <name>stateOfCharge</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="36" column="10" bodyfile="Core/Src/bms.c" bodystart="36" bodyend="-1"/>
        <referencedby refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" compoundref="bms_8c" startline="47" endline="72">BMS_msg1</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a2bd3e52b9f7bb249a6c7a1108efb1995" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t relayState</definition>
        <argsstring></argsstring>
        <name>relayState</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="37" column="10" bodyfile="Core/Src/bms.c" bodystart="37" bodyend="-1"/>
        <referencedby refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" compoundref="bms_8c" startline="47" endline="72">BMS_msg1</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a3db3406866b37db013bd594d7588ed00" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t msg1corrupt</definition>
        <argsstring></argsstring>
        <name>msg1corrupt</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="38" column="10" bodyfile="Core/Src/bms.c" bodystart="38" bodyend="-1"/>
        <referencedby refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" compoundref="bms_8c" startline="47" endline="72">BMS_msg1</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a5b12ba8d86d6649ab8b4a0967484f3ec" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t packDCL</definition>
        <argsstring></argsstring>
        <name>packDCL</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="40" column="10" bodyfile="Core/Src/bms.c" bodystart="40" bodyend="-1"/>
        <referencedby refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" compoundref="bms_8c" startline="75" endline="98">BMS_msg2</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a09f4da3365fb5890a0fd8c5f5871d25e" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t lowTemp</definition>
        <argsstring></argsstring>
        <name>lowTemp</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="41" column="10" bodyfile="Core/Src/bms.c" bodystart="41" bodyend="-1"/>
        <referencedby refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" compoundref="bms_8c" startline="75" endline="98">BMS_msg2</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a30221826d03df3708444924f408282c6" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t highTemp</definition>
        <argsstring></argsstring>
        <name>highTemp</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="42" column="10" bodyfile="Core/Src/bms.c" bodystart="42" bodyend="-1"/>
        <referencedby refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" compoundref="bms_8c" startline="75" endline="98">BMS_msg2</referencedby>
      </memberdef>
      <memberdef kind="variable" id="bms_8c_1a8fa7b800b072c0c1449c7be149c703ba" prot="public" static="no" mutable="no">
        <type>uint16_t</type>
        <definition>uint16_t msg2corrupt</definition>
        <argsstring></argsstring>
        <name>msg2corrupt</name>
        <initializer>= 0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="43" column="10" bodyfile="Core/Src/bms.c" bodystart="43" bodyend="-1"/>
        <referencedby refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" compoundref="bms_8c" startline="75" endline="98">BMS_msg2</referencedby>
      </memberdef>
    </sectiondef>
    <sectiondef kind="func">
      <memberdef kind="function" id="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void BMS_msg1</definition>
        <argsstring>(uv_CAN_msg *msg)</argsstring>
        <name>BMS_msg1</name>
        <param>
          <type><ref refid="structuv___c_a_n__msg" kindref="compound">uv_CAN_msg</ref> *</type>
          <declname>msg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="47" column="6" bodyfile="Core/Src/bms.c" bodystart="47" bodyend="72"/>
        <references refid="bms_8c_1a4081f615c3b206c0996bb9a22516f115" compoundref="bms_8c" startline="31">bms_last_msg_time</references>
        <references refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" compoundref="uvfr__utils_8h" startline="289">uv_CAN_msg::data</references>
        <references refid="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" compoundref="bms_8c" startline="32">is_bms_connected</references>
        <references refid="bms_8c_1a3db3406866b37db013bd594d7588ed00" compoundref="bms_8c" startline="38">msg1corrupt</references>
        <references refid="bms_8c_1a2ef021ab39a98f64902d656ac099f8a9" compoundref="bms_8c" startline="34">packCurrent</references>
        <references refid="bms_8c_1a178a2c12bb1a2c720fcde0ef2cd6f1f1" compoundref="bms_8c" startline="35">packVoltage</references>
        <references refid="bms_8c_1a2bd3e52b9f7bb249a6c7a1108efb1995" compoundref="bms_8c" startline="37">relayState</references>
        <references refid="bms_8c_1a4fe005c273fb4a65d7f0ae7fb04b850e" compoundref="bms_8c" startline="36">stateOfCharge</references>
        <references refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" compoundref="tasks_8c" startline="2303" endline="2315">xTaskGetTickCount</references>
        <referencedby refid="bms_8h_1aa9af83736568f74c94d41f3f16adf513" compoundref="bms_8c" startline="100" endline="140">BMS_Init</referencedby>
      </memberdef>
      <memberdef kind="function" id="bms_8c_1a554435738960054c897ed84e3f5b1edf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void BMS_msg2</definition>
        <argsstring>(uv_CAN_msg *msg)</argsstring>
        <name>BMS_msg2</name>
        <param>
          <type><ref refid="structuv___c_a_n__msg" kindref="compound">uv_CAN_msg</ref> *</type>
          <declname>msg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="75" column="6" bodyfile="Core/Src/bms.c" bodystart="75" bodyend="98"/>
        <references refid="bms_8c_1a4081f615c3b206c0996bb9a22516f115" compoundref="bms_8c" startline="31">bms_last_msg_time</references>
        <references refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" compoundref="uvfr__utils_8h" startline="289">uv_CAN_msg::data</references>
        <references refid="bms_8c_1a30221826d03df3708444924f408282c6" compoundref="bms_8c" startline="42">highTemp</references>
        <references refid="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" compoundref="bms_8c" startline="32">is_bms_connected</references>
        <references refid="bms_8c_1a09f4da3365fb5890a0fd8c5f5871d25e" compoundref="bms_8c" startline="41">lowTemp</references>
        <references refid="bms_8c_1a8fa7b800b072c0c1449c7be149c703ba" compoundref="bms_8c" startline="43">msg2corrupt</references>
        <references refid="bms_8c_1a5b12ba8d86d6649ab8b4a0967484f3ec" compoundref="bms_8c" startline="40">packDCL</references>
        <references refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" compoundref="tasks_8c" startline="2303" endline="2315">xTaskGetTickCount</references>
        <referencedby refid="bms_8h_1aa9af83736568f74c94d41f3f16adf513" compoundref="bms_8c" startline="100" endline="140">BMS_Init</referencedby>
      </memberdef>
      <memberdef kind="function" id="bms_8c_1aa9af83736568f74c94d41f3f16adf513" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void BMS_Init</definition>
        <argsstring>(void *args)</argsstring>
        <name>BMS_Init</name>
        <param>
          <type>void *</type>
          <declname>args</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Core/Src/bms.c" line="100" column="6" bodyfile="Core/Src/bms.c" bodystart="100" bodyend="140"/>
        <references refid="uvfr__utils_8h_1ad70cbc8929c4ad7a5901cd9eef5ca9b0aca1b897aad8f93e76df69c23bc732f2e" compoundref="uvfr__utils_8h" startline="213">BMS</references>
        <references refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" compoundref="bms_8c" startline="47" endline="72">BMS_msg1</references>
        <references refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" compoundref="bms_8c" startline="75" endline="98">BMS_msg2</references>
        <references refid="bms_8c_1a79f5e585e6fa5d54c855cf1a3b16ff88" compoundref="bms_8c" startline="12">bms_settings</references>
        <references refid="uvfr__utils_8h_1a68cc2bdb140f7959b6090b771f3358a9" compoundref="uvfr__utils_8h" startline="271">CAN_BUS_1</references>
        <references refid="structuv__init__task__args_1adec47e7a54822cacfb8fcfc35a22157f" compoundref="uvfr__utils_8h" startline="343">uv_init_task_args::init_info_queue</references>
        <references refid="group__uvfr__can__api_1gafadde3418edf4017889c4c6ec160a2f6" compoundref="can_8c" startline="652" endline="767">insertCANMessageHandler</references>
        <references refid="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" compoundref="bms_8c" startline="32">is_bms_connected</references>
        <references refid="structuv__init__task__args_1a3b81430245e7f832dc1112e53b0ef7ad" compoundref="uvfr__utils_8h" startline="344">uv_init_task_args::meta_task_handle</references>
        <references refid="cmsis__os_8c_1a02e19d5e723bfb06ba9324d625162255" compoundref="cmsis__os_8c" startline="323" endline="336">osDelay</references>
        <references refid="projdefs_8h_1a07848d3078849bd32353c69d30a479b3" compoundref="projdefs_8h" startline="47">pdPASS</references>
        <references refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" compoundref="uvfr__utils_8h" startline="174">UV_OK</references>
        <references refid="task_8h_1a84d4e660b04630be2939d91b3c2412f8">vTaskSuspend</references>
        <references refid="queue_8h_1a81d24a2c1199d58efb76fbee15853112" compoundref="queue_8h" startline="395">xQueueSendToBack</references>
        <references refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" compoundref="tasks_8c" startline="2303" endline="2315">xTaskGetTickCount</references>
        <referencedby refid="uvfr__utils_8h_1a6d40598f9d8daa89ca159a2e87f4fd01" compoundref="uvfr__utils_8c" startline="50" endline="311">uvInit</referencedby>
      </memberdef>
    </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//<sp/>This<sp/>where<sp/>the<sp/>code<sp/>to<sp/>handle<sp/>BMS<sp/>errors<sp/>and<sp/>such<sp/>will<sp/>go</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="main_8h" kindref="compound">main.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="bms_8h" kindref="compound">bms.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="constants_8h" kindref="compound">constants.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pdu_8h" kindref="compound">pdu.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="can_8h" kindref="compound">can.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="tim_8h" kindref="compound">tim.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="dash_8h" kindref="compound">dash.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="uvfr__utils_8h" kindref="compound">uvfr_utils.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12" refid="bms_8c_1a79f5e585e6fa5d54c855cf1a3b16ff88" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>bms_settings<sp/>current_vehicle_settings-&gt;bms_settings</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="bms_8c_1a28e4314b233b9140e73e4fd0bab7e354" refkind="member"><highlight class="normal"><ref refid="structbms__settings__t" kindref="compound">bms_settings_t</ref><sp/><ref refid="bms_8c_1a28e4314b233b9140e73e4fd0bab7e354" kindref="member">default_bms_settings</ref><sp/>=<sp/>{</highlight></codeline>
<codeline lineno="15"><highlight class="normal">.BMS_CAN_timeout<sp/>=<sp/>200,<sp/></highlight><highlight class="comment">//ms</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal">.max_cell_temp<sp/>=<sp/>500,</highlight></codeline>
<codeline lineno="17"><highlight class="normal">.min_cell_temp<sp/>=<sp/>-200,</highlight></codeline>
<codeline lineno="18"><highlight class="normal">.min_soc<sp/>=<sp/>10,</highlight></codeline>
<codeline lineno="19"><highlight class="normal">.min_cell_voltage<sp/>=<sp/>2.5,</highlight></codeline>
<codeline lineno="20"><highlight class="normal">.max_cell_voltage<sp/>=<sp/>4.2,</highlight></codeline>
<codeline lineno="21"><highlight class="normal">.max_pack_voltage<sp/>=<sp/>5000,</highlight></codeline>
<codeline lineno="22"><highlight class="normal">.max_variance_between_cells<sp/>=<sp/>1</highlight></codeline>
<codeline lineno="23"><highlight class="normal">};</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="comment">//two<sp/>IDs<sp/>for<sp/>bms<sp/>can<sp/>message</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="comment">//<sp/>0x6B0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="comment">//<sp/>0x6B1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31" refid="bms_8c_1a4081f615c3b206c0996bb9a22516f115" refkind="member"><highlight class="normal"><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref><sp/><ref refid="bms_8c_1a4081f615c3b206c0996bb9a22516f115" kindref="member">bms_last_msg_time</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="32" refid="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" refkind="member"><highlight class="normal">uint8_t<sp/><ref refid="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" kindref="member">is_bms_connected</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="bms_8c_1a2ef021ab39a98f64902d656ac099f8a9" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a2ef021ab39a98f64902d656ac099f8a9" kindref="member">packCurrent</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>logged</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35" refid="bms_8c_1a178a2c12bb1a2c720fcde0ef2cd6f1f1" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a178a2c12bb1a2c720fcde0ef2cd6f1f1" kindref="member">packVoltage</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>logged</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36" refid="bms_8c_1a4fe005c273fb4a65d7f0ae7fb04b850e" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a4fe005c273fb4a65d7f0ae7fb04b850e" kindref="member">stateOfCharge</ref><sp/>=<sp/>0;<sp/></highlight><highlight class="comment">//<sp/>used<sp/>for<sp/>toggling<sp/>regen<sp/>braking<sp/>/<sp/>low<sp/>charge<sp/>warning</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="bms_8c_1a2bd3e52b9f7bb249a6c7a1108efb1995" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a2bd3e52b9f7bb249a6c7a1108efb1995" kindref="member">relayState</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="38" refid="bms_8c_1a3db3406866b37db013bd594d7588ed00" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a3db3406866b37db013bd594d7588ed00" kindref="member">msg1corrupt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40" refid="bms_8c_1a5b12ba8d86d6649ab8b4a0967484f3ec" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a5b12ba8d86d6649ab8b4a0967484f3ec" kindref="member">packDCL</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="41" refid="bms_8c_1a09f4da3365fb5890a0fd8c5f5871d25e" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a09f4da3365fb5890a0fd8c5f5871d25e" kindref="member">lowTemp</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="42" refid="bms_8c_1a30221826d03df3708444924f408282c6" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a30221826d03df3708444924f408282c6" kindref="member">highTemp</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="43" refid="bms_8c_1a8fa7b800b072c0c1449c7be149c703ba" refkind="member"><highlight class="normal">uint16_t<sp/><ref refid="bms_8c_1a8fa7b800b072c0c1449c7be149c703ba" kindref="member">msg2corrupt</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="comment">//<sp/>extern<sp/>uint16_t<sp/>(var<sp/>name)<sp/>to<sp/>call<sp/>outside<sp/>this<sp/>file</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47" refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" kindref="member">BMS_msg1</ref>(<ref refid="structuv___c_a_n__msg" kindref="compound">uv_CAN_msg</ref>*<sp/>msg){<sp/></highlight><highlight class="comment">//<sp/>msg<sp/>is<sp/>raw<sp/>CAN<sp/>msg,<sp/>gets<sp/>processed<sp/>in<sp/>voltageCANdata</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>msg1<sp/>can<sp/>handle<sp/>current,<sp/>voltage,<sp/>charge,<sp/>relay,<sp/>checksum<sp/>(corruption)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a2ef021ab39a98f64902d656ac099f8a9" kindref="member">packCurrent</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[0]&lt;&lt;8<sp/>|<sp/>msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[1]);<sp/></highlight><highlight class="comment">//<sp/>x<sp/>0.1A</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a178a2c12bb1a2c720fcde0ef2cd6f1f1" kindref="member">packVoltage</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[2]&lt;&lt;8<sp/>|<sp/>msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[3]);<sp/></highlight><highlight class="comment">//<sp/>x<sp/>0.1V</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a4fe005c273fb4a65d7f0ae7fb04b850e" kindref="member">stateOfCharge</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[4])/2;<sp/></highlight><highlight class="comment">//<sp/>x2;<sp/>this<sp/>is<sp/>an<sp/>int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a2bd3e52b9f7bb249a6c7a1108efb1995" kindref="member">relayState</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[5]&lt;&lt;8<sp/>|<sp/>msg<sp/>-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[6]);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a3db3406866b37db013bd594d7588ed00" kindref="member">msg1corrupt</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[7]);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a4081f615c3b206c0996bb9a22516f115" kindref="member">bms_last_msg_time</ref><sp/>=<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>();</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" kindref="member">is_bms_connected</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="bms_8c_1a4fe005c273fb4a65d7f0ae7fb04b850e" kindref="member">stateOfCharge</ref><sp/>&lt;<sp/>20)<sp/>{</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>flash<sp/>low<sp/>battery<sp/>warning<sp/>to<sp/>screen</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="bms_8c_1a4fe005c273fb4a65d7f0ae7fb04b850e" kindref="member">stateOfCharge</ref><sp/>&gt;=<sp/>95)<sp/>{</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>disable<sp/>regenerative<sp/>breaking</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>in<sp/>all<sp/>other<sp/>cases<sp/>battery<sp/>should<sp/>be<sp/>functioning<sp/>as<sp/>normal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>would<sp/>make<sp/>sense<sp/>for<sp/>voltageCANdata<sp/>to<sp/>turn<sp/>into<sp/>float</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//log<sp/>voltage<sp/>data<sp/>to<sp/>where,<sp/>maybe<sp/>setting<sp/>global<sp/>variable</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal">}</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75" refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" kindref="member">BMS_msg2</ref>(<ref refid="structuv___c_a_n__msg" kindref="compound">uv_CAN_msg</ref>*<sp/>msg){</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>msg2<sp/>can<sp/>handle<sp/>DCL<sp/>(Max<sp/>current<sp/>output),<sp/>tempurature,<sp/>checksum</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a5b12ba8d86d6649ab8b4a0967484f3ec" kindref="member">packDCL</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[0]&lt;&lt;8<sp/>|<sp/>msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[3]);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a09f4da3365fb5890a0fd8c5f5871d25e" kindref="member">lowTemp</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[4]);<sp/></highlight><highlight class="comment">//<sp/>celsius</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a30221826d03df3708444924f408282c6" kindref="member">highTemp</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[5]);<sp/></highlight><highlight class="comment">//<sp/>celsius</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a8fa7b800b072c0c1449c7be149c703ba" kindref="member">msg2corrupt</ref><sp/>=<sp/>(msg-&gt;<ref refid="structuv___c_a_n__msg_1aec63cc112176da7895d0cfc8b32e6935" kindref="member">data</ref>[7]);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1a4081f615c3b206c0996bb9a22516f115" kindref="member">bms_last_msg_time</ref><sp/>=<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>();</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" kindref="member">is_bms_connected</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="bms_8c_1a09f4da3365fb5890a0fd8c5f5871d25e" kindref="member">lowTemp</ref><sp/>&lt;=<sp/>-5<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>warning<sp/>-<sp/>temp<sp/>is<sp/>too<sp/>low</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>stop<sp/>operability?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="bms_8c_1a09f4da3365fb5890a0fd8c5f5871d25e" kindref="member">lowTemp</ref><sp/>&gt;<sp/>-5<sp/>&amp;&amp;<sp/><ref refid="bms_8c_1a30221826d03df3708444924f408282c6" kindref="member">highTemp</ref><sp/>&lt;<sp/>55){</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/>normal<sp/>operating<sp/>tempurature<sp/>range</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/>drive<sp/>as<sp/>normal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="bms_8c_1a30221826d03df3708444924f408282c6" kindref="member">highTemp</ref><sp/>&gt;=<sp/>55.0)<sp/>{</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flash<sp/>warning<sp/>-<sp/>approaching<sp/>max<sp/>temp</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maybe<sp/>enable<sp/>cooling<sp/>fan/devices<sp/>here</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="98"><highlight class="normal">}</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100" refid="bms_8h_1aa9af83736568f74c94d41f3f16adf513" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="bms_8c_1aa9af83736568f74c94d41f3f16adf513" kindref="member">BMS_Init</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/>args){</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__init__task__args" kindref="compound">uv_init_task_args</ref>*<sp/>params<sp/>=<sp/>(<ref refid="structuv__init__task__args" kindref="compound">uv_init_task_args</ref>*)<sp/>args;</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="cmsis__os_8c_1a02e19d5e723bfb06ba9324d625162255" kindref="member">osDelay</ref>(200);</highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structuv__init__task__response" kindref="compound">uv_init_task_response</ref><sp/>response<sp/>=<sp/>{<ref refid="uvfr__utils_8h_1a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9" kindref="member">UV_OK</ref>,<ref refid="uvfr__utils_8h_1ad70cbc8929c4ad7a5901cd9eef5ca9b0aca1b897aad8f93e76df69c23bc732f2e" kindref="member">BMS</ref>,0,NULL};</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref><sp/>bms_init_time<sp/>=<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>();</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="portmacro_8h_1aa69c48c6e902ce54f70886e6573c92a9" kindref="member">TickType_t</ref><sp/>init_deadline<sp/>=<sp/>bms_init_time<sp/>+<sp/><ref refid="bms_8c_1a79f5e585e6fa5d54c855cf1a3b16ff88" kindref="member">bms_settings</ref>-&gt;BMS_CAN_timeout;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__uvfr__can__api_1gafadde3418edf4017889c4c6ec160a2f6" kindref="member">insertCANMessageHandler</ref>(0x6B0,<sp/><ref refid="bms_8c_1a7a70ee75f60730eaf8489c863fceea7d" kindref="member">BMS_msg1</ref>,<sp/><ref refid="uvfr__utils_8h_1a68cc2bdb140f7959b6090b771f3358a9" kindref="member">CAN_BUS_1</ref>);</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group__uvfr__can__api_1gafadde3418edf4017889c4c6ec160a2f6" kindref="member">insertCANMessageHandler</ref>(0x6B1,<sp/><ref refid="bms_8c_1a554435738960054c897ed84e3f5b1edf" kindref="member">BMS_msg2</ref>,<sp/><ref refid="uvfr__utils_8h_1a68cc2bdb140f7959b6090b771f3358a9" kindref="member">CAN_BUS_1</ref>);</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(;;){</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(init_deadline<sp/>&lt;<sp/><ref refid="task_8h_1a753ecfe23e7386066ecccad5d16422f7" kindref="member">xTaskGetTickCount</ref>()){</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//BMS<sp/>not<sp/>connected<sp/>lol</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//uvPanic(&quot;BMS<sp/>Not<sp/>Detected&quot;,<sp/>0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TODO<sp/>re-enable<sp/>this<sp/>if<sp/>for<sp/>whatever<sp/>reason<sp/>we<sp/>have<sp/>this<sp/>thing<sp/>again</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//response.status<sp/>=<sp/>UV_ERROR;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="bms_8c_1ab9364948a7d6cbb869d63a78be56501d" kindref="member">is_bms_connected</ref><sp/>==<sp/>1){</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Kill<sp/>yourself</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="queue_8h_1a81d24a2c1199d58efb76fbee15853112" kindref="member">xQueueSendToBack</ref>(params-&gt;<ref refid="structuv__init__task__args_1adec47e7a54822cacfb8fcfc35a22157f" kindref="member">init_info_queue</ref>,&amp;response,100)<sp/>!=<sp/><ref refid="projdefs_8h_1a07848d3078849bd32353c69d30a479b3" kindref="member">pdPASS</ref>){</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//OOPS</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="task_8h_1a84d4e660b04630be2939d91b3c2412f8" kindref="member">vTaskSuspend</ref>(params-&gt;<ref refid="structuv__init__task__args_1a3b81430245e7f832dc1112e53b0ef7ad" kindref="member">meta_task_handle</ref>);</highlight></codeline>
<codeline lineno="140"><highlight class="normal">}</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="Core/Src/bms.c"/>
  </compounddef>
</doxygen>
