<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EV RTOS Project: UVFR CANbus API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EV RTOS Project<span id="projectnumber">&#160;V1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__uvfr__can__api.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">UVFR CANbus API</div></div>
</div><!--header-->
<div class="contents">

<p>This is an api that simplifies usage of CANbus transmitting and receiving.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafadde3418edf4017889c4c6ec160a2f6" id="r_gafadde3418edf4017889c4c6ec160a2f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafadde3418edf4017889c4c6ec160a2f6">insertCANMessageHandler</a> (uint32_t id, void *handlerfunc, int can_num)</td></tr>
<tr class="memdesc:gafadde3418edf4017889c4c6ec160a2f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to insert an id and function into the lookup table of callback functions.  <br /></td></tr>
<tr class="separator:gafadde3418edf4017889c4c6ec160a2f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62414944c3b631f57fdd08e467bcf5a4" id="r_ga62414944c3b631f57fdd08e467bcf5a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga62414944c3b631f57fdd08e467bcf5a4">uvSendCanMSG</a> (<a class="el" href="structuv___c_a_n__msg.html">uv_CAN_msg</a> *tx_msg)</td></tr>
<tr class="memdesc:ga62414944c3b631f57fdd08e467bcf5a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to send CAN message.  <br /></td></tr>
<tr class="separator:ga62414944c3b631f57fdd08e467bcf5a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This is an api that simplifies usage of CANbus transmitting and receiving. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gafadde3418edf4017889c4c6ec160a2f6" name="gafadde3418edf4017889c4c6ec160a2f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafadde3418edf4017889c4c6ec160a2f6">&#9670;&#160;</a></span>insertCANMessageHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void insertCANMessageHandler </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>handlerfunc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>can_num</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to insert an id and function into the lookup table of callback functions. </p>
<p>Checks if specific hash id already exists in the hash table If not, insert the message If it already exists, check to see if the actual CAN id matches. If yes, then previous entries are overwritten If it does not exist, then each node in the hash table functions as it's own linked list </p>

<p class="definition">Definition at line <a class="el" href="can_8c_source.html#l00652">652</a> of file <a class="el" href="can_8c_source.html">can.c</a>.</p>

<p class="reference">References <a class="el" href="can_8c_source.html#l00070">callback_table_1_mutex</a>, <a class="el" href="can_8c_source.html#l00071">callback_table_2_mutex</a>, <a class="el" href="uvfr__utils_8h_source.html#l00271">CAN_BUS_1</a>, <a class="el" href="can_8c_source.html#l00066">CAN_callback_table_1</a>, <a class="el" href="can_8c_source.html#l00068">CAN_callback_table_2</a>, <a class="el" href="can_8c_source.html#l00056">CAN_Callback::CAN_id</a>, <a class="el" href="can_8c_source.html#l00057">CAN_Callback::function</a>, <a class="el" href="can_8c_source.html#l00577">generateHash()</a>, <a class="el" href="can_8c_source.html#l00058">CAN_Callback::next</a>, <a class="el" href="projdefs_8h_source.html#l00045">pdTRUE</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="semphr_8h_source.html#l00447">xSemaphoreGive</a>, and <a class="el" href="semphr_8h_source.html#l00289">xSemaphoreTake</a>.</p>

<p class="reference">Referenced by <a class="el" href="bms_8c_source.html#l00100">BMS_Init()</a>, <a class="el" href="motor__controller_8c_source.html#l00458">MC_Startup()</a>, <a class="el" href="temp__monitoring_8c_source.html#l00112">tempMonitorTask()</a>, and <a class="el" href="uvfr__settings_8c_source.html#l00359">uvSettingsInit()</a>.</p>

</div>
</div>
<a id="ga62414944c3b631f57fdd08e467bcf5a4" name="ga62414944c3b631f57fdd08e467bcf5a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62414944c3b631f57fdd08e467bcf5a4">&#9670;&#160;</a></span>uvSendCanMSG()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvSendCanMSG </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv___c_a_n__msg.html">uv_CAN_msg</a> *</td>          <td class="paramname"><span class="paramname"><em>tx_msg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to send CAN message. </p>
<p>This function is the canonical team method of sending a CAN message. It invokes the canTxDaemon, to avoid any conflicts due to a context switch mid transmission Is it a little bit convoluted? Yes. Is that worth it? Still yes. </p>

<p class="definition">Definition at line <a class="el" href="can_8c_source.html#l00864">864</a> of file <a class="el" href="can_8c_source.html">can.c</a>.</p>

<p class="reference">References <a class="el" href="can_8c_source.html#l00826">__uvCANtxCritSection()</a>, <a class="el" href="can_8c_source.html#l00074">is_can_ok</a>, <a class="el" href="projdefs_8h_source.html#l00047">pdPASS</a>, <a class="el" href="can_8c_source.html#l00047">Tx_msg_queue</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="queue_8h_source.html#l00395">xQueueSendToBack</a>, and <a class="el" href="queue_8h_source.html#l01055">xQueueSendToBackFromISR</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__vehicle__logger_8c_source.html#l00155">flushLogsToCAN()</a>, <a class="el" href="uvfr__settings_8c_source.html#l00160">handleIncomingLaptopMsg()</a>, <a class="el" href="motor__controller_8c_source.html#l00407">MC_EnableCyclicSpeedTransmission()</a>, <a class="el" href="motor__controller_8c_source.html#l00110">MC_Request_Data()</a>, <a class="el" href="motor__controller_8c_source.html#l00141">MC_Set_Param()</a>, <a class="el" href="daq_8c_source.html#l00359">sendDaqMsg()</a>, <a class="el" href="motor__controller_8c_source.html#l00069">sendTorqueToMotorController()</a>, <a class="el" href="temp__monitoring_8c_source.html#l00112">tempMonitorTask()</a>, <a class="el" href="temp__monitoring_8c_source.html#l00057">testfunc2()</a>, <a class="el" href="temp__monitoring_8c_source.html#l00070">testfunc3()</a>, <a class="el" href="pdu_8c_source.html#l00037">u19updatePduChannel()</a>, <a class="el" href="uvfr__settings_8c_source.html#l00840">uvSendSpecificParam()</a>, <a class="el" href="uvfr__settings_8c_source.html#l00359">uvSettingsInit()</a>, and <a class="el" href="uvfr__settings_8c_source.html#l00926">uvSettingsProgrammerTask()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
