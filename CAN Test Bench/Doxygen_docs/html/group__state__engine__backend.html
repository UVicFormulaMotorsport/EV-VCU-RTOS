<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EV RTOS Project: State Engine Internals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EV RTOS Project<span id="projectnumber">&#160;V1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__state__engine__backend.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">State Engine Internals<div class="ingroups"><a class="el" href="group__state__engine.html">State Engine</a></div></div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for State Engine Internals:</div>
<div class="dyncontent">
<div class="center"><img src="group__state__engine__backend.png" border="0" usemap="#agroup____state____engine____backend" alt=""/></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8e41e95f69723171fab38aba3b00a091" id="r_ga8e41e95f69723171fab38aba3b00a091"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8e41e95f69723171fab38aba3b00a091">addTaskToTaskRegister</a> (<a class="el" href="uvfr__state__engine_8h.html#aa6ffd72eb4909ddb38c37a1369e13f09">uv_task_id</a> id, uint8_t assign_to_whom)</td></tr>
<tr class="separator:ga8e41e95f69723171fab38aba3b00a091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf342326f88e8accc1efa35e02cdd6c37" id="r_gaf342326f88e8accc1efa35e02cdd6c37"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf342326f88e8accc1efa35e02cdd6c37">_uvValidateSpecificTask</a> (<a class="el" href="uvfr__state__engine_8h.html#aa6ffd72eb4909ddb38c37a1369e13f09">uv_task_id</a> id)</td></tr>
<tr class="memdesc:gaf342326f88e8accc1efa35e02cdd6c37"><td class="mdescLeft">&#160;</td><td class="mdescRight">make sure the parameters of a task_info struct is valid  <br /></td></tr>
<tr class="separator:gaf342326f88e8accc1efa35e02cdd6c37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c1618caac0d7f29836107f1a44833e8" id="r_ga8c1618caac0d7f29836107f1a44833e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8c1618caac0d7f29836107f1a44833e8">uvValidateManagedTasks</a> ()</td></tr>
<tr class="memdesc:ga8c1618caac0d7f29836107f1a44833e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">ensure that all the tasks people have created actually make sense, and are valid  <br /></td></tr>
<tr class="separator:ga8c1618caac0d7f29836107f1a44833e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15cdf09b5625c2ba29a6c6d5c96214dc" id="r_ga15cdf09b5625c2ba29a6c6d5c96214dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga15cdf09b5625c2ba29a6c6d5c96214dc">uvStartTask</a> (uint32_t *tracker, <a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:ga15cdf09b5625c2ba29a6c6d5c96214dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">: This is a function that starts tasks which are already registered in the system  <br /></td></tr>
<tr class="separator:ga15cdf09b5625c2ba29a6c6d5c96214dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6291142ec714ce1450099943b1b8d00a" id="r_ga6291142ec714ce1450099943b1b8d00a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6291142ec714ce1450099943b1b8d00a">uvDeleteTask</a> (uint32_t *tracker, <a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:ga6291142ec714ce1450099943b1b8d00a"><td class="mdescLeft">&#160;</td><td class="mdescRight">deletes a managed task via the system  <br /></td></tr>
<tr class="separator:ga6291142ec714ce1450099943b1b8d00a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40d4bc9be9f3b81c51aef7ed7c37172f" id="r_ga40d4bc9be9f3b81c51aef7ed7c37172f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga40d4bc9be9f3b81c51aef7ed7c37172f">uvAbortTaskDeletion</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:ga40d4bc9be9f3b81c51aef7ed7c37172f"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a task is scheduled for deletion, we want to be able to resurrect it.  <br /></td></tr>
<tr class="separator:ga40d4bc9be9f3b81c51aef7ed7c37172f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ef71d11e9525846568eadac11c7e8e4" id="r_ga3ef71d11e9525846568eadac11c7e8e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga3ef71d11e9525846568eadac11c7e8e4">uvScheduleTaskDeletion</a> (uint32_t *tracker, <a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:ga3ef71d11e9525846568eadac11c7e8e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedule a task to be deleted in the future double plus ungood imho.  <br /></td></tr>
<tr class="separator:ga3ef71d11e9525846568eadac11c7e8e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafd67eecbab2e6e6915bc6bc71806b715" id="r_gafd67eecbab2e6e6915bc6bc71806b715"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafd67eecbab2e6e6915bc6bc71806b715">uvSuspendTask</a> (uint32_t *tracker, <a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:gafd67eecbab2e6e6915bc6bc71806b715"><td class="mdescLeft">&#160;</td><td class="mdescRight">function to suspend one of the managed tasks.  <br /></td></tr>
<tr class="separator:gafd67eecbab2e6e6915bc6bc71806b715"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1a1157d12026b20c6bbb5542c9f7efb" id="r_gac1a1157d12026b20c6bbb5542c9f7efb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac1a1157d12026b20c6bbb5542c9f7efb">uvTaskCrashHandler</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:gac1a1157d12026b20c6bbb5542c9f7efb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when a task has crashed and we need to figure out what to do with it.  <br /></td></tr>
<tr class="separator:gac1a1157d12026b20c6bbb5542c9f7efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d712c440ee3ae92eae5d820f4745eb9" id="r_ga6d712c440ee3ae92eae5d820f4745eb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6d712c440ee3ae92eae5d820f4745eb9">__uvPanic</a> (char *msg, <a class="el" href="uvfr__vehicle__logger_8h.html#a6678121815d6405973fdc68812442fc7">fault_event_type_e</a> type, const char *file, const int line, const char *func)</td></tr>
<tr class="memdesc:ga6d712c440ee3ae92eae5d820f4745eb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Something bad has occurred here now we in trouble.  <br /></td></tr>
<tr class="separator:ga6d712c440ee3ae92eae5d820f4745eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f35b34432afed7f18f91fb8607f096f" id="r_ga5f35b34432afed7f18f91fb8607f096f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5f35b34432afed7f18f91fb8607f096f">killSelf</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:ga5f35b34432afed7f18f91fb8607f096f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called by a task to nuke itself. Is a wrapper function that is used to do all the different things.  <br /></td></tr>
<tr class="separator:ga5f35b34432afed7f18f91fb8607f096f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad6117850b55ad52be51d93915bcc313c" id="r_gad6117850b55ad52be51d93915bcc313c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad6117850b55ad52be51d93915bcc313c">suspendSelf</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:gad6117850b55ad52be51d93915bcc313c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by a task that needs to suspend itself, once the task has determined it is safe to do so.  <br /></td></tr>
<tr class="separator:gad6117850b55ad52be51d93915bcc313c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c151c9ece181329cf95d74d80c53411" id="r_ga2c151c9ece181329cf95d74d80c53411"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga2c151c9ece181329cf95d74d80c53411">uvSendTaskStatusReport</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="separator:ga2c151c9ece181329cf95d74d80c53411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8519c96858b096f2fccb96d3334df93a" id="r_ga8519c96858b096f2fccb96d3334df93a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8519c96858b096f2fccb96d3334df93a">_stateChangeDaemon</a> (void *args) PRIVILEGED_FUNCTION</td></tr>
<tr class="memdesc:ga8519c96858b096f2fccb96d3334df93a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This collects all the data changing from different tasks, and makes sure that everything works properly.  <br /></td></tr>
<tr class="separator:ga8519c96858b096f2fccb96d3334df93a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace2b4c6c8f012fb6650049e5272b88e4" id="r_gace2b4c6c8f012fb6650049e5272b88e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gace2b4c6c8f012fb6650049e5272b88e4">uvThrottleNonCritTasks</a> ()</td></tr>
<tr class="separator:gace2b4c6c8f012fb6650049e5272b88e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7dff9a1c0653941c1559398025cdec4c" id="r_ga7dff9a1c0653941c1559398025cdec4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7dff9a1c0653941c1559398025cdec4c">uvLateTaskHandler</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t, TickType_t tdiff, uint8_t <a class="el" href="group__state__engine.html#gaf622d52254e824f6da1204abc93b18db">task_tardiness</a>)</td></tr>
<tr class="separator:ga7dff9a1c0653941c1559398025cdec4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga43cdd5f23929fee4ba86d4fd0b60d6ad" id="r_ga43cdd5f23929fee4ba86d4fd0b60d6ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structuv__task__info.html">uv_task_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga43cdd5f23929fee4ba86d4fd0b60d6ad">uvCreateServiceTask</a> ()</td></tr>
<tr class="memdesc:ga43cdd5f23929fee4ba86d4fd0b60d6ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new service task, because fuck you, thats why.  <br /></td></tr>
<tr class="separator:ga43cdd5f23929fee4ba86d4fd0b60d6ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91b9f84bc63d5808a3f70623ed8a0700" id="r_ga91b9f84bc63d5808a3f70623ed8a0700"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga91b9f84bc63d5808a3f70623ed8a0700">uvStartSVCTask</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:ga91b9f84bc63d5808a3f70623ed8a0700"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to start a service task specifically.  <br /></td></tr>
<tr class="separator:ga91b9f84bc63d5808a3f70623ed8a0700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87455110c1a898b9294c66c14043f02a" id="r_ga87455110c1a898b9294c66c14043f02a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga87455110c1a898b9294c66c14043f02a">uvSuspendSVCTask</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:ga87455110c1a898b9294c66c14043f02a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that suspends a service task.  <br /></td></tr>
<tr class="separator:ga87455110c1a898b9294c66c14043f02a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga02ceb2f70d4474d4734de6494aca8978" id="r_ga02ceb2f70d4474d4734de6494aca8978"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga02ceb2f70d4474d4734de6494aca8978">uvDeleteSVCTask</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:ga02ceb2f70d4474d4734de6494aca8978"><td class="mdescLeft">&#160;</td><td class="mdescRight">For when you need to delete a service task... for some reason...  <br /></td></tr>
<tr class="separator:ga02ceb2f70d4474d4734de6494aca8978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad930776c44487128dbb60294a66a68e3" id="r_gad930776c44487128dbb60294a66a68e3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gad930776c44487128dbb60294a66a68e3">uvRestartSVCTask</a> (<a class="el" href="structuv__task__info.html">uv_task_info</a> *t)</td></tr>
<tr class="memdesc:gad930776c44487128dbb60294a66a68e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that takes a service part that may be messed up and tries to reboot it to recover.  <br /></td></tr>
<tr class="separator:gad930776c44487128dbb60294a66a68e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6edf594e7dcaaa6397384eadfbe0e984" id="r_ga6edf594e7dcaaa6397384eadfbe0e984"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structuv__task__info.html">uv_task_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6edf594e7dcaaa6397384eadfbe0e984">uvGetTaskFromName</a> (char *tsk_name)</td></tr>
<tr class="separator:ga6edf594e7dcaaa6397384eadfbe0e984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35ebd76bbdf6f6d800a0ee2f5c5b1253" id="r_ga35ebd76bbdf6f6d800a0ee2f5c5b1253"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structuv__task__info.html">uv_task_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga35ebd76bbdf6f6d800a0ee2f5c5b1253">uvGetTaskFromRTOSHandle</a> (TaskHandle_t t_handle)</td></tr>
<tr class="memdesc:ga35ebd76bbdf6f6d800a0ee2f5c5b1253"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pointer to the task info structure.  <br /></td></tr>
<tr class="separator:ga35ebd76bbdf6f6d800a0ee2f5c5b1253"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga321624ab262c6eeb560495e0e4833966" id="r_ga321624ab262c6eeb560495e0e4833966"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga321624ab262c6eeb560495e0e4833966">is_can_ok</a></td></tr>
<tr class="separator:ga321624ab262c6eeb560495e0e4833966"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<dl class="section attention"><dt>Attention</dt><dd>Do not edit these functions, or even contemplate calling one of them directly unless you 100% know what you are doing. These are DANGEROUS</dd></dl>
<p>This handles all the under the hood bullshit inherent to a system that dynamically starts and restarts RTOS tasks. Due to this being a safety critical system, great care must be taken to prevent the vehicle from entering an unsafe state as a result of anything happening in these functions.</p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6d712c440ee3ae92eae5d820f4745eb9" name="ga6d712c440ee3ae92eae5d820f4745eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d712c440ee3ae92eae5d820f4745eb9">&#9670;&#160;</a></span>__uvPanic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __uvPanic </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="uvfr__vehicle__logger_8h.html#a6678121815d6405973fdc68812442fc7">fault_event_type_e</a></td>          <td class="paramname"><span class="paramname"><em>type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int</td>          <td class="paramname"><span class="paramname"><em>line</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>func</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Something bad has occurred here now we in trouble. </p>
<p>General idea here: Something bad has happened that is severe enough that it requires the shutdown of the vehicle. This can mean several things, such as being on fire, etc... that need to be appropriately handled</p>
<p>This should also log whatever the fuck happened.</p>
<p>The following should happen, in order:</p><ul>
<li>Forcibly put vehicle into a safe state</li>
<li>Change vehicle state to error, and invoke the SCD</li>
<li>Log the error in our lil running journal</li>
</ul>
<p>Should change vehicle state itself be the source of the error, we just need the software to completely fucking hang itself. If things are so fucked that we genuinely cannot even transition to the error state, then get that shit the fuck outta here, we shuttin down fr fr. </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00708">708</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8c_source.html#l00092">changeVehicleState()</a>, <a class="el" href="can_8c_source.html#l00074">is_can_ok</a>, <a class="el" href="uvfr__vehicle__logger_8c_source.html#l00097">logVehicleFault()</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00095">UV_ERROR_STATE</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__state__engine__backend_ga6d712c440ee3ae92eae5d820f4745eb9_cgraph.png" border="0" usemap="#agroup__state__engine__backend_ga6d712c440ee3ae92eae5d820f4745eb9_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga8519c96858b096f2fccb96d3334df93a" name="ga8519c96858b096f2fccb96d3334df93a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8519c96858b096f2fccb96d3334df93a">&#9670;&#160;</a></span>_stateChangeDaemon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _stateChangeDaemon </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>args</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This collects all the data changing from different tasks, and makes sure that everything works properly. </p>
<dl class="section attention"><dt>Attention</dt><dd>DO NOT EVER JUST CALL THIS FUNCTION. THIS SHOULD ONLY BE CALLED FROM changeVehicleState</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>This accepts a <code>void*</code> pointer to avoid compile errors with freeRTOS, since freeRTOS expects a pointer to the function that accepts a void pointer</td></tr>
  </table>
  </dd>
</dl>
<p>This is a one-shot RTOS task that spawns in when we want to change the state of the vehicle state. It performs this in the following way </p>
<p>We get to iterate through all of the managed tasks. Goes via IDs as well. We load up the array entry as a temp pointer to a task info struct. As we go through it determines what to do by comparing the <code><a class="el" href="structuv__task__info.html#ab24dea3bde4de2d839bf15e65c2df0d6">uv_task_info.active_states</a></code> as well as <code><a class="el" href="structuv__task__info.html#a6986d7216c7f889164931b37ab752c29">uv_task_info.deletion_states</a></code> and <code><a class="el" href="structuv__task__info.html#aafd4e2d916f50b54b99fd02d63831e43">uv_task_info.suspension_states</a></code> with <code>uv_vehicle_state</code> </p>
<p>This is done with the bitwise &amp; operator, since the definition of the <code>uv_vehicle_state_t</code> enum facilitates this by only using factors of two.</p>
<p>Acquires pointer to task definition struct, then sets the queue in the struct to the SCD queue, so that the task actually does task things. Love when that happens. Next it sets the bit in the task_tracker corresponding to the task id, therefore marking that some action must be taken to either</p><ul>
<li>confirm that no action is neccessary</li>
<li>bring the task state into the correct state</li>
</ul>
<p>Now we suspend the task because it has been misbehaving in school</p>
<p>Wait for all the tasks that had changes made to respond.</p><div class="fragment"><div class="line"> */</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_struct" href="structuv__scd__response.html">uv_scd_response</a>* response = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_define" href="uvfr__state__engine_8h.html#a2b86418bd482f9d4a2a36f35e786798e">_LONGEST_SC_TIME</a>/<a class="code hl_define" href="uvfr__state__engine_8h.html#a092c530d4a0cd880a59598dc0fca95d4">_SC_DAEMON_PERIOD</a>; i++){ <span class="comment">//This loop verifies to make sure things are actually chillin</span></div>
<div class="line">        vTaskDelay(<a class="code hl_define" href="uvfr__state__engine_8h.html#a092c530d4a0cd880a59598dc0fca95d4">_SC_DAEMON_PERIOD</a>);</div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0;j&lt;10;j++){ <span class="comment">//What kinda magic number is this? Why 10?</span></div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span>(xQueueReceive(state_change_queue,&amp;response,1) == pdPASS){</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span>(response == NULL){<span class="comment">//definately not supposed to happen</span></div>
<div class="line">                    uvPanic(<span class="stringliteral">&quot;null scd response&quot;</span>,0);</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span>(proccessSCDMsg(response)==<a class="code hl_enumvalue" href="uvfr__utils_8h.html#a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9">UV_OK</a>){</div>
<div class="line">                    task_tracker &amp;= ~(0x01&lt;&lt;response-&gt;<a class="code hl_variable" href="structuv__scd__response.html#a0812669214881a452cc54e8783a74c4f">meta_id</a>);</div>
<div class="line">                    <span class="keywordflow">if</span> (_task_register[response-&gt;<a class="code hl_variable" href="structuv__scd__response.html#a0812669214881a452cc54e8783a74c4f">meta_id</a>].task_state == <a class="code hl_enumvalue" href="group__state__engine__api.html#ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691">UV_TASK_DELETED</a>){</div>
<div class="line">                        _task_register[response-&gt;<a class="code hl_variable" href="structuv__scd__response.html#a0812669214881a452cc54e8783a74c4f">meta_id</a>].task_handle = NULL;</div>
<div class="line">                    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">                }<span class="keywordflow">else</span>{</div>
<div class="line">                    <span class="comment">//Not ok, this means that process SCD has returned something weird. More detailed error_handling can be added later.</span></div>
<div class="line">                    uvPanic(<span class="stringliteral">&quot;Task giving Sass to SCD&quot;</span>,0);</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span>(uvFree(response)!=<a class="code hl_enumvalue" href="uvfr__utils_8h.html#a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9">UV_OK</a>){</div>
<div class="line">                    uvPanic(<span class="stringliteral">&quot;failed to free memory&quot;</span>, 0);</div>
<div class="line">                }</div>
<div class="line">                    response = NULL;</div>
<div class="line"> </div>
<div class="line">                }<span class="keywordflow">else</span>{</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//You timed out didnt you... Naughty naughty...</span></div>
<div class="line">    <span class="keywordflow">if</span>(task_tracker != 0){</div>
<div class="line">        uvPanic(<span class="stringliteral">&quot;SCD Timeout&quot;</span>,0);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">//TODO: Forcibly reconcile vehicle state, and nuke whatever tasks require nuking, suspend whatever needs suspended</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">//END_OF_STATE_CHANGE_DAEMON:</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">//}</span></div>
<div class="line"> </div>
<div class="line">TaskHandle_t scd_handle = ((<a class="code hl_struct" href="structstate__change__daemon__args.html">state_change_daemon_args</a>*)args)-&gt;meta_task_handle;</div>
<div class="line">uvFree(args);</div>
<div class="line"> </div>
<div class="line">vQueueDelete(state_change_queue);</div>
<div class="line">state_change_queue = NULL;</div>
<div class="line"><span class="comment">/**</span></div>
<div class="ttc" id="agroup__state__engine__api_html_ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691"><div class="ttname"><a href="group__state__engine__api.html#ggac94b6bd11853173599ccff034055cc88af6465f57e0b6515721c5cbebd769e691">UV_TASK_DELETED</a></div><div class="ttdeci">@ UV_TASK_DELETED</div><div class="ttdef"><b>Definition</b> <a href="uvfr__state__engine_8h_source.html#l00133">uvfr_state_engine.h:133</a></div></div>
<div class="ttc" id="astructstate__change__daemon__args_html"><div class="ttname"><a href="structstate__change__daemon__args.html">state_change_daemon_args</a></div><div class="ttdef"><b>Definition</b> <a href="uvfr__state__engine_8c_source.html#l00064">uvfr_state_engine.c:64</a></div></div>
<div class="ttc" id="astructuv__scd__response_html"><div class="ttname"><a href="structuv__scd__response.html">uv_scd_response</a></div><div class="ttdef"><b>Definition</b> <a href="uvfr__state__engine_8h_source.html#l00121">uvfr_state_engine.h:121</a></div></div>
<div class="ttc" id="astructuv__scd__response_html_a0812669214881a452cc54e8783a74c4f"><div class="ttname"><a href="structuv__scd__response.html#a0812669214881a452cc54e8783a74c4f">uv_scd_response::meta_id</a></div><div class="ttdeci">uv_task_id meta_id</div><div class="ttdef"><b>Definition</b> <a href="uvfr__state__engine_8h_source.html#l00123">uvfr_state_engine.h:123</a></div></div>
<div class="ttc" id="auvfr__state__engine_8h_html_a092c530d4a0cd880a59598dc0fca95d4"><div class="ttname"><a href="uvfr__state__engine_8h.html#a092c530d4a0cd880a59598dc0fca95d4">_SC_DAEMON_PERIOD</a></div><div class="ttdeci">#define _SC_DAEMON_PERIOD</div><div class="ttdef"><b>Definition</b> <a href="uvfr__state__engine_8h_source.html#l00071">uvfr_state_engine.h:71</a></div></div>
<div class="ttc" id="auvfr__state__engine_8h_html_a2b86418bd482f9d4a2a36f35e786798e"><div class="ttname"><a href="uvfr__state__engine_8h.html#a2b86418bd482f9d4a2a36f35e786798e">_LONGEST_SC_TIME</a></div><div class="ttdeci">#define _LONGEST_SC_TIME</div><div class="ttdef"><b>Definition</b> <a href="uvfr__state__engine_8h_source.html#l00070">uvfr_state_engine.h:70</a></div></div>
<div class="ttc" id="auvfr__utils_8h_html_a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9"><div class="ttname"><a href="uvfr__utils_8h.html#a71c52c44be11d0980910401cb9b5fb9ea93b7493f003cb72e7b6138f2794b58e9">UV_OK</a></div><div class="ttdeci">@ UV_OK</div><div class="ttdef"><b>Definition</b> <a href="uvfr__utils_8h_source.html#l00174">uvfr_utils.h:174</a></div></div>
</div><!-- fragment --><p>The final act of the SCD, is to delete itself </p><div class="fragment"><div class="line"> */</div>
<div class="line">vTaskDelete(scd_handle);</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00881">881</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00070">_LONGEST_SC_TIME</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00071">_SC_DAEMON_PERIOD</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00258">uv_task_info::active_states</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00259">uv_task_info::deletion_states</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00123">uv_scd_response::meta_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00260">uv_task_info::suspension_states</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00262">uv_task_info::task_flags</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00211">UV_TASK_AWAITING_DELETION</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00212">UV_TASK_DEFER_DELETION</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00133">UV_TASK_DELETED</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00132">UV_TASK_NOT_STARTED</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00134">UV_TASK_RUNNING</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00135">UV_TASK_SUSPENDED</a>, <a class="el" href="uvfr__state__engine_8c_source.html#l00519">uvDeleteTask()</a>, <a class="el" href="uvfr__state__engine_8c_source.html#l00591">uvScheduleTaskDeletion()</a>, <a class="el" href="uvfr__state__engine_8c_source.html#l00401">uvStartTask()</a>, <a class="el" href="uvfr__state__engine_8c_source.html#l00618">uvSuspendTask()</a>, and <a class="el" href="uvfr__state__engine_8c_source.html#l00038">vehicle_state</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l00092">changeVehicleState()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__state__engine__backend_ga8519c96858b096f2fccb96d3334df93a_cgraph.png" border="0" usemap="#agroup__state__engine__backend_ga8519c96858b096f2fccb96d3334df93a_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="gaf342326f88e8accc1efa35e02cdd6c37" name="gaf342326f88e8accc1efa35e02cdd6c37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf342326f88e8accc1efa35e02cdd6c37">&#9670;&#160;</a></span>_uvValidateSpecificTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> _uvValidateSpecificTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvfr__state__engine_8h.html#aa6ffd72eb4909ddb38c37a1369e13f09">uv_task_id</a></td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>make sure the parameters of a task_info struct is valid </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00344">344</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00258">uv_task_info::active_states</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00259">uv_task_info::deletion_states</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00260">uv_task_info::suspension_states</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00234">uv_task_info::task_function</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00229">uv_task_info::task_name</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, and <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l00331">addTaskToTaskRegister()</a>, and <a class="el" href="uvfr__state__engine_8c_source.html#l00379">uvValidateManagedTasks()</a>.</p>

</div>
</div>
<a id="ga8e41e95f69723171fab38aba3b00a091" name="ga8e41e95f69723171fab38aba3b00a091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e41e95f69723171fab38aba3b00a091">&#9670;&#160;</a></span>addTaskToTaskRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> addTaskToTaskRegister </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="uvfr__state__engine_8h.html#aa6ffd72eb4909ddb38c37a1369e13f09">uv_task_id</a></td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>assign_to_whom</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00331">331</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8c_source.html#l00344">_uvValidateSpecificTask()</a>, and <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__state__engine__backend_ga8e41e95f69723171fab38aba3b00a091_cgraph.png" border="0" usemap="#agroup__state__engine__backend_ga8e41e95f69723171fab38aba3b00a091_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga5f35b34432afed7f18f91fb8607f096f" name="ga5f35b34432afed7f18f91fb8607f096f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f35b34432afed7f18f91fb8607f096f">&#9670;&#160;</a></span>killSelf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void killSelf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called by a task to nuke itself. Is a wrapper function that is used to do all the different things. </p>
<p>First lets load up the queue and the values in it. These come from the task we are doing.</p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00724">724</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00248">uv_task_info::cmd_data</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00123">uv_scd_response::meta_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00122">uv_scd_response::response_val</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00228">uv_task_info::task_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00104">UV_NO_CMD</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00114">UV_SUCCESSFUL_DELETION</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00133">UV_TASK_DELETED</a>.</p>

<p class="reference">Referenced by <a class="el" href="can_8c_source.html#l01045">CANbusRxSvcDaemon()</a>, <a class="el" href="can_8c_source.html#l00920">CANbusTxSvcDaemon()</a>, <a class="el" href="daq_8c_source.html#l00305">daqMasterTask()</a>, <a class="el" href="odometer_8c_source.html#l00046">odometerTask()</a>, <a class="el" href="ready__to__drive_8c_source.html#l00041">rtdTask()</a>, <a class="el" href="driving__loop_8c_source.html#l00254">StartDrivingLoop()</a>, <a class="el" href="temp__monitoring_8c_source.html#l00112">tempMonitorTask()</a>, <a class="el" href="uvfr__settings_8c_source.html#l00926">uvSettingsProgrammerTask()</a>, and <a class="el" href="uvfr__state__engine_8c_source.html#l01102">uvTaskManager()</a>.</p>

</div>
</div>
<a id="gad6117850b55ad52be51d93915bcc313c" name="gad6117850b55ad52be51d93915bcc313c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad6117850b55ad52be51d93915bcc313c">&#9670;&#160;</a></span>suspendSelf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void suspendSelf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by a task that needs to suspend itself, once the task has determined it is safe to do so. </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00765">765</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00248">uv_task_info::cmd_data</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00123">uv_scd_response::meta_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00122">uv_scd_response::response_val</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00228">uv_task_info::task_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00104">UV_NO_CMD</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00115">UV_SUCCESSFUL_SUSPENSION</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00135">UV_TASK_SUSPENDED</a>.</p>

<p class="reference">Referenced by <a class="el" href="can_8c_source.html#l01045">CANbusRxSvcDaemon()</a>, <a class="el" href="can_8c_source.html#l00920">CANbusTxSvcDaemon()</a>, <a class="el" href="odometer_8c_source.html#l00046">odometerTask()</a>, <a class="el" href="ready__to__drive_8c_source.html#l00041">rtdTask()</a>, <a class="el" href="driving__loop_8c_source.html#l00254">StartDrivingLoop()</a>, <a class="el" href="temp__monitoring_8c_source.html#l00112">tempMonitorTask()</a>, and <a class="el" href="uvfr__state__engine_8c_source.html#l01102">uvTaskManager()</a>.</p>

</div>
</div>
<a id="ga40d4bc9be9f3b81c51aef7ed7c37172f" name="ga40d4bc9be9f3b81c51aef7ed7c37172f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga40d4bc9be9f3b81c51aef7ed7c37172f">&#9670;&#160;</a></span>uvAbortTaskDeletion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvAbortTaskDeletion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If a task is scheduled for deletion, we want to be able to resurrect it. </p>
<p>Calling this will find the task deletion timer, and remove the task from the grave. </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00579">579</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, and <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>.</p>

</div>
</div>
<a id="ga43cdd5f23929fee4ba86d4fd0b60d6ad" name="ga43cdd5f23929fee4ba86d4fd0b60d6ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga43cdd5f23929fee4ba86d4fd0b60d6ad">&#9670;&#160;</a></span>uvCreateServiceTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structuv__task__info.html">uv_task_info</a> * uvCreateServiceTask </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new service task, because fuck you, thats why. </p>
<p>Acquire the pointer to the spot in the array, we are doing this since we need to return the pointer anyways, and it cleans up the syntax a little.</p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01217">1217</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00065">_UV_DEFAULT_TASK_STACK_SIZE</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00258">uv_task_info::active_states</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00259">uv_task_info::deletion_states</a>, <a class="el" href="uvfr__state__engine_8c_source.html#l00011">MAX_NUM_MANAGED_TASKS</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00252">uv_task_info::parent</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00238">uv_task_info::stack_size</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00260">uv_task_info::suspension_states</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00262">uv_task_info::task_flags</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00234">uv_task_info::task_function</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00228">uv_task_info::task_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00229">uv_task_info::task_name</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00235">uv_task_info::task_priority</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00202">UV_TASK_GENERIC_SVC</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00132">UV_TASK_NOT_STARTED</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00206">UV_TASK_SCD_IGNORE</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__utils_8c_source.html#l00050">uvInit()</a>, and <a class="el" href="uvfr__state__engine_8c_source.html#l00168">uvInitStateEngine()</a>.</p>

</div>
</div>
<a id="ga02ceb2f70d4474d4734de6494aca8978" name="ga02ceb2f70d4474d4734de6494aca8978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga02ceb2f70d4474d4734de6494aca8978">&#9670;&#160;</a></span>uvDeleteSVCTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvDeleteSVCTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For when you need to delete a service task... for some reason... </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01313">1313</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00248">uv_task_info::cmd_data</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__utils_8h_source.html#l00177">UV_ABORTED</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00105">UV_KILL_CMD</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00133">UV_TASK_DELETED</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00132">UV_TASK_NOT_STARTED</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00134">UV_TASK_RUNNING</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00135">UV_TASK_SUSPENDED</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l01341">uvRestartSVCTask()</a>.</p>

</div>
</div>
<a id="ga6291142ec714ce1450099943b1b8d00a" name="ga6291142ec714ce1450099943b1b8d00a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6291142ec714ce1450099943b1b8d00a">&#9670;&#160;</a></span>uvDeleteTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvDeleteTask </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>tracker</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>deletes a managed task via the system </p>
<p>This function is the lowtier god of the program. It pulls up and is like "YOU SHOULD KILL YOURSELF, NOW!!" It sends a message to the task which tells it to kill itself.</p>
<p>The task complies. It does not have a choice. </p>
<p>This checks with the RTOS kernel to see that the task as stated by the scheduler matches the state known by uvfr_utils</p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00519">519</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00248">uv_task_info::cmd_data</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00228">uv_task_info::task_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__utils_8h_source.html#l00177">UV_ABORTED</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00105">UV_KILL_CMD</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00133">UV_TASK_DELETED</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00132">UV_TASK_NOT_STARTED</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00135">UV_TASK_SUSPENDED</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00288">uvTaskIsDelaying</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l00881">_stateChangeDaemon()</a>, and <a class="el" href="uvfr__state__engine_8c_source.html#l00473">killEmAll()</a>.</p>

</div>
</div>
<a id="ga6edf594e7dcaaa6397384eadfbe0e984" name="ga6edf594e7dcaaa6397384eadfbe0e984"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6edf594e7dcaaa6397384eadfbe0e984">&#9670;&#160;</a></span>uvGetTaskFromName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structuv__task__info.html">uv_task_info</a> * uvGetTaskFromName </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>tsk_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sometimes you just gottta deal with it lol </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01448">1448</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

</div>
</div>
<a id="ga35ebd76bbdf6f6d800a0ee2f5c5b1253" name="ga35ebd76bbdf6f6d800a0ee2f5c5b1253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga35ebd76bbdf6f6d800a0ee2f5c5b1253">&#9670;&#160;</a></span>uvGetTaskFromRTOSHandle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structuv__task__info.html">uv_task_info</a> * uvGetTaskFromRTOSHandle </td>
          <td>(</td>
          <td class="paramtype">TaskHandle_t</td>          <td class="paramname"><span class="paramname"><em>t_handle</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the pointer to the task info structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t_handle</td><td>A freeRTOS task handle.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">A</td><td>pointer to a <a class="el" href="structuv__task__info.html" title="This struct is designed to hold neccessary information about an RTOS task that will be managed by uvf...">uv_task_info</a> data structure. This is mostly useful for cases where you know the RTOS handle, but not the task info struct </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01460">1460</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

</div>
</div>
<a id="ga7dff9a1c0653941c1559398025cdec4c" name="ga7dff9a1c0653941c1559398025cdec4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7dff9a1c0653941c1559398025cdec4c">&#9670;&#160;</a></span>uvLateTaskHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uvLateTaskHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t</td>          <td class="paramname"><span class="paramname"><em>tdiff</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>task_tardiness</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01068">1068</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00262">uv_task_info::task_flags</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00231">uv_task_info::task_period</a>, <a class="el" href="uvfr__state__engine_8c_source.html#l00021">task_tardiness</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00218">UV_TASK_MISSION_CRITICAL</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l01102">uvTaskManager()</a>.</p>

</div>
</div>
<a id="gad930776c44487128dbb60294a66a68e3" name="gad930776c44487128dbb60294a66a68e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad930776c44487128dbb60294a66a68e3">&#9670;&#160;</a></span>uvRestartSVCTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvRestartSVCTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that takes a service part that may be messed up and tries to reboot it to recover. </p>
<p>This may be necessary if a SVC task is not responding. Be careful though, since this has the potential to delay more important tasks :o Therefore, this technique should be used sparingly, and each task gets a limited number of attempts within a certain time period. </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01341">1341</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="uvfr__state__engine_8c_source.html#l01313">uvDeleteSVCTask()</a>, and <a class="el" href="uvfr__state__engine_8c_source.html#l01257">uvStartSVCTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__state__engine__backend_gad930776c44487128dbb60294a66a68e3_cgraph.png" border="0" usemap="#agroup__state__engine__backend_gad930776c44487128dbb60294a66a68e3_cgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ga3ef71d11e9525846568eadac11c7e8e4" name="ga3ef71d11e9525846568eadac11c7e8e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ef71d11e9525846568eadac11c7e8e4">&#9670;&#160;</a></span>uvScheduleTaskDeletion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvScheduleTaskDeletion </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>tracker</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Schedule a task to be deleted in the future double plus ungood imho. </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00591">591</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00262">uv_task_info::task_flags</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00228">uv_task_info::task_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__utils_8h_source.html#l00177">UV_ABORTED</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00211">UV_TASK_AWAITING_DELETION</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00133">UV_TASK_DELETED</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l00881">_stateChangeDaemon()</a>.</p>

</div>
</div>
<a id="ga2c151c9ece181329cf95d74d80c53411" name="ga2c151c9ece181329cf95d74d80c53411"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c151c9ece181329cf95d74d80c53411">&#9670;&#160;</a></span>uvSendTaskStatusReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uvSendTaskStatusReport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00865">865</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

</div>
</div>
<a id="ga91b9f84bc63d5808a3f70623ed8a0700" name="ga91b9f84bc63d5808a3f70623ed8a0700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga91b9f84bc63d5808a3f70623ed8a0700">&#9670;&#160;</a></span>uvStartSVCTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvStartSVCTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to start a service task specifically. </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01257">1257</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00238">uv_task_info::stack_size</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00250">uv_task_info::task_args</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00262">uv_task_info::task_flags</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00234">uv_task_info::task_function</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00229">uv_task_info::task_name</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00235">uv_task_info::task_priority</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__utils_8h_source.html#l00177">UV_ABORTED</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00202">UV_TASK_GENERIC_SVC</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00134">UV_TASK_RUNNING</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00135">UV_TASK_SUSPENDED</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l01341">uvRestartSVCTask()</a>.</p>

</div>
</div>
<a id="ga15cdf09b5625c2ba29a6c6d5c96214dc" name="ga15cdf09b5625c2ba29a6c6d5c96214dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga15cdf09b5625c2ba29a6c6d5c96214dc">&#9670;&#160;</a></span>uvStartTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvStartTask </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>tracker</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>: This is a function that starts tasks which are already registered in the system </p>
<p>This bad boi gets called from the stateChangeDaemon because it's a special little snowflake. </p>
<p>The first thing we will do is check if the task is running, since this could theoretically get called from literally anywhere. If the task is running, then we check to see if <code>t-&gt;task_handle</code> is set to <code>NULL</code> . If it is null, that is a physically impossible_state. Neither very mindful or very demure.</p>
<p>That being said, if the task appears legit, then just update the corresponding bits in the tracker, and return that the task has aborted.</p>
<p>If a task has been suspended, we do not want to create a new instance of the task, becuase then the task will go out of scope, and changing the task handle to a new instance will result in the task never being de-initialized, therefore causing a memory leak. We want to call <code>vTaskResume</code> instead, and just boot the task back into existence.</p>
<p>If none of the previous if statements caught the task handle, then that means that either this is our first time attempting to activate this task, or the task has been deleted at some point prior to this one</p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00401">401</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00256">uv_task_info::last_execution_time</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00238">uv_task_info::stack_size</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00234">uv_task_info::task_function</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00228">uv_task_info::task_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00229">uv_task_info::task_name</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00235">uv_task_info::task_priority</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__utils_8h_source.html#l00177">UV_ABORTED</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00134">UV_TASK_RUNNING</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00135">UV_TASK_SUSPENDED</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l00881">_stateChangeDaemon()</a>, and <a class="el" href="uvfr__utils_8c_source.html#l00050">uvInit()</a>.</p>

</div>
</div>
<a id="ga87455110c1a898b9294c66c14043f02a" name="ga87455110c1a898b9294c66c14043f02a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87455110c1a898b9294c66c14043f02a">&#9670;&#160;</a></span>uvSuspendSVCTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvSuspendSVCTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that suspends a service task. </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01298">1298</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__utils_8h_source.html#l00177">UV_ABORTED</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00135">UV_TASK_SUSPENDED</a>.</p>

</div>
</div>
<a id="gafd67eecbab2e6e6915bc6bc71806b715" name="gafd67eecbab2e6e6915bc6bc71806b715"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafd67eecbab2e6e6915bc6bc71806b715">&#9670;&#160;</a></span>uvSuspendTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvSuspendTask </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>tracker</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>function to suspend one of the managed tasks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tracker</td><td>is a pointer to an int. If the task actually suspends, we update the tracker, since no further action is needed.</td></tr>
    <tr><td class="paramname">t</td><td>is a pointer to a <a class="el" href="structuv__task__info.html">uv_task_info</a> struct. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00618">618</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00248">uv_task_info::cmd_data</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00246">uv_task_info::task_handle</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00228">uv_task_info::task_id</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00243">uv_task_info::task_state</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00106">UV_SUSPEND_CMD</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00133">UV_TASK_DELETED</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00132">UV_TASK_NOT_STARTED</a>, <a class="el" href="uvfr__state__engine_8h_source.html#l00135">UV_TASK_SUSPENDED</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00288">uvTaskIsDelaying</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l00881">_stateChangeDaemon()</a>.</p>

</div>
</div>
<a id="gac1a1157d12026b20c6bbb5542c9f7efb" name="gac1a1157d12026b20c6bbb5542c9f7efb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1a1157d12026b20c6bbb5542c9f7efb">&#9670;&#160;</a></span>uvTaskCrashHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvTaskCrashHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuv__task__info.html">uv_task_info</a> *</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when a task has crashed and we need to figure out what to do with it. </p>
<p>Effectively, there are a couple variables we care about here: 1) Can the vehicle continue operation without that task active? 2) Do we really care?</p>
<p>If the task is critical, then this needs to 100% result in a panic. If it isn't then we can try to restart the task, noting that this may result in strange undefined behavior down the line. Thankfully if a task is not safety critical, we don't really care whether it misbehaves. Appropriate countermeasures are in place to prevent one task from overflowing into another task, as well as to mitigate against possible memory leaks. </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00675">675</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8h_source.html#l00262">uv_task_info::task_flags</a>, <a class="el" href="uvfr__utils_8h_source.html#l00176">UV_ERROR</a>, <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>, and <a class="el" href="uvfr__state__engine_8h_source.html#l00218">UV_TASK_MISSION_CRITICAL</a>.</p>

</div>
</div>
<a id="gace2b4c6c8f012fb6650049e5272b88e4" name="gace2b4c6c8f012fb6650049e5272b88e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace2b4c6c8f012fb6650049e5272b88e4">&#9670;&#160;</a></span>uvThrottleNonCritTasks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvThrottleNonCritTasks </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l01063">1063</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

</div>
</div>
<a id="ga8c1618caac0d7f29836107f1a44833e8" name="ga8c1618caac0d7f29836107f1a44833e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c1618caac0d7f29836107f1a44833e8">&#9670;&#160;</a></span>uvValidateManagedTasks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="can_8h.html#aef3770e45bbacbf527fd93dd80eea9b9">uv_status</a> uvValidateManagedTasks </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ensure that all the tasks people have created actually make sense, and are valid </p>

<p class="definition">Definition at line <a class="el" href="uvfr__state__engine_8c_source.html#l00379">379</a> of file <a class="el" href="uvfr__state__engine_8c_source.html">uvfr_state_engine.c</a>.</p>

<p class="reference">References <a class="el" href="uvfr__state__engine_8c_source.html#l00344">_uvValidateSpecificTask()</a>, and <a class="el" href="uvfr__utils_8h_source.html#l00174">UV_OK</a>.</p>

<p class="reference">Referenced by <a class="el" href="uvfr__state__engine_8c_source.html#l00213">uvStartStateMachine()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__state__engine__backend_ga8c1618caac0d7f29836107f1a44833e8_cgraph.png" border="0" usemap="#agroup__state__engine__backend_ga8c1618caac0d7f29836107f1a44833e8_cgraph" alt=""/></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga321624ab262c6eeb560495e0e4833966" name="ga321624ab262c6eeb560495e0e4833966"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga321624ab262c6eeb560495e0e4833966">&#9670;&#160;</a></span>is_can_ok</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t is_can_ok</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="can_8c_source.html#l00074">74</a> of file <a class="el" href="can_8c_source.html">can.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="can_8c_source.html#l00826">__uvCANtxCritSection()</a>, <a class="el" href="uvfr__state__engine_8c_source.html#l00708">__uvPanic()</a>, <a class="el" href="can_8c_source.html#l00920">CANbusTxSvcDaemon()</a>, <a class="el" href="can_8c_source.html#l00456">HAL_CAN_RxFifo0MsgPendingCallback()</a>, <a class="el" href="can_8c_source.html#l00512">HAL_CAN_RxFifo1MsgPendingCallback()</a>, <a class="el" href="can_8c_source.html#l00076">handleCANbusError()</a>, and <a class="el" href="can_8c_source.html#l00864">uvSendCanMSG()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
